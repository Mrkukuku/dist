webpackJsonp([46],{"hq/s":function(e,t){},txBY:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r("/IwO");var a={mixins:[r("nQ03").a],data:function(){return{ruleForm:{name:"",phone:"",type:"",content:"",unitName:"",address:""},rules:{name:[{required:!0,message:"请输入名字",trigger:"blur"}],phone:[{required:!0,message:"请输入电话",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:["change","blur"]}],content:[{required:!0,message:"请输入投诉内容",trigger:"blur"}],unitName:[{required:!0,message:"请输入受理人",trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"blur"}]},options:[],unitId:""}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.axios({url:"/api/admin/complaints/add",method:"post",dataType:"json",data:t.ruleForm}).then(function(e){0==e.data.code?alert("保存成功"):t.$alert(e.data.msg,"提示",{confirmButtonText:"OK"})})})},getType:function(){var e=this;this.axios({url:"/api/admin/complaints/unit/type",method:"post",dataType:"json"}).then(function(t){0==t.data.code?e.options=t.data.data:_this.$alert(t.data.msg,"提示",{confirmButtonText:"OK"})})}},mounted:function(){this.$route.query.id&&(this.ruleForm.unitId=Number(this.$route.query.id),this.ruleForm.unitName=this.$route.query.unitName,this.getType())}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"complaintsReport allcontent"},[r("div",{staticClass:"headCss"},[e._v("智慧消防投诉举报")]),e._v(" "),r("div",{staticClass:"headTwoCss"},[e._v("请填写有用的信息有助于帮我们进行审核")]),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"140px"}},[r("div",{staticClass:"bgColorBox"},[r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电话",prop:"phone"}},[r("el-input",{model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1)],1),e._v(" "),r("div",{staticClass:"bgColorBox"},[r("el-form-item",{attrs:{label:"行业场所类型",prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.options,function(e){return r("el-option",{key:e.desc,attrs:{label:e.desc,value:e.desc}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"地址",prop:"address"}},[r("el-input",{attrs:{readonly:!0},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}}),e._v(" "),r("el-button",{staticClass:"clickButton",on:{click:e.openmap}},[e._v("点击地图")]),e._v(" "),r("div",{attrs:{id:"mapdiv"}},[r("el-dialog",{staticClass:"mapdialog",attrs:{title:"百度地图定位查询",visible:e.mapVisible,width:"95%","modal-append-to-body":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.mapVisible=t}}},[r("div",{staticClass:"amap-wrapper"},[r("div",{staticClass:"inputButton"},[r("el-amap-search-box",{staticClass:"search-box",attrs:{"search-option":e.searchOption,"on-search-result":e.onSearchResult}}),e._v(" "),r("el-button",{staticClass:"searchok",attrs:{type:"primary"},on:{click:e.getok}},[e._v("确定")])],1),e._v(" "),r("el-amap",{staticClass:"amap-demo bm_view",attrs:{vid:"amap-vue",plugin:e.plugins,events:e.events,zoom:e.zoom,center:e.center}},[e._l(e.markermap,function(e,t){return r("el-amap-marker",{key:e.index,attrs:{position:e.position,icon:e.icon,title:e.title,events:e.events,visible:e.visible,draggable:e.draggable,vid:t}})}),e._v(" "),r("el-amap-info-window",{attrs:{position:e.currentWindow.position,content:e.currentWindow.content,visible:e.currentWindow.visible,events:e.currentWindow.events}})],2)],1)])],1)],1)],1),e._v(" "),r("div",{staticClass:"bgColorBox"},[r("el-form-item",{attrs:{label:"投诉受理方",prop:"unitName"}},[r("el-input",{attrs:{readonly:!0},model:{value:e.ruleForm.unitName,callback:function(t){e.$set(e.ruleForm,"unitName",t)},expression:"ruleForm.unitName"}})],1),e._v(" "),r("el-form-item",{staticClass:"textareaCss",attrs:{label:"投诉内容",prop:"content"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1)],1),e._v(" "),r("el-form-item",{staticClass:"formfooter"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("ruleForm")}}},[e._v("立即提交")])],1)],1)],1)},staticRenderFns:[]};var o=r("VU/8")(a,s,!1,function(e){r("hq/s")},"data-v-236f546e",null);t.default=o.exports}});