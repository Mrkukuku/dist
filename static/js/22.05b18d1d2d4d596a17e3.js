webpackJsonp([22],{E9pH:function(e,t){},OenQ:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("g5qz"),i=(l("inaZ"),l("MCsY")),r={mixins:[a.a],components:{pagination:i.a},data:function(){return{module:"installationInformation",unitId:sessionStorage.getItem("unitId"),userType:sessionStorage.getItem("userTypes"),title:"",unitName:"",treedefaultProps:{children:"children",label:"label"},currentPage:1,rows:10,total:1,ruleForm:{title:"",installerName:"",installerPhone:"",debuggerName:"",debuggerPhone:"",unitName:"",unitId:""},rules:{title:[{required:!0,message:"请输入安装标题",trigger:"blur"}],installerName:[{required:!0,message:"请输入安装人姓名",trigger:"blur"}],installerPhone:[{required:!0,message:"请输入安装人电话",trigger:"blur"}],debuggerName:[{required:!0,message:"请输入调试人员",trigger:"blur"}],debuggerPhone:[{required:!0,message:"请输入调试人员电话",trigger:"blur"}],unitName:[{required:!0,message:"请输入安装公司",trigger:"blur"}]}}},methods:{searchsubmit:function(){var e=this;this.currentPage=1,this.$refs.paginationChild.changePageNum(this.currentPage),this.axios({url:"/api/admin/device/install.search",method:"post",data:{unitId:this.unitId,pageSize:this.rows,pageNum:this.currentPage,title:this.title,unitName:this.unitName}}).then(function(t){0==t.data.code?(e.tableData=t.data.list,e.total=t.data.total,e.currentPage=t.data.pageNum):e.$alert(t.data.msg,"提示",{confirmButtonText:"OK"})})},searchreset:function(){this.title="",this.unitName=""},editdatas:function(e){var t=this;this.axios({url:"/api/admin/device/install.search",method:"post",data:{id:e,pageNum:1,pageSize:100}}).then(function(e){t.ruleForm=e.data.list[0],t.opendialog()})},handleNodeClick:function(e){this.unitId=e.id,this.rows=10,this.currentPage=1,this.getData()},renderContent:function(e,t){var l=t.node;return e("span",[e("i",{class:t.data.icon})," ",e("span",[l.label])])},pageChange:function(e){this.currentPage=e.page_index,this.rows=e.page_limit,this.getData()}}},n={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"allcontent",attrs:{id:"installationInformation"}},[1==e.userType?l("el-col",{staticClass:"tree_box",attrs:{span:4}},[l("div",[l("el-input",{staticClass:"filter_text",attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),l("el-tree",{ref:"tree",attrs:{data:e.Treedata,props:e.treedefaultProps,"render-content":e.renderContent,"highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1)]):e._e(),e._v(" "),l("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[l("div",{staticClass:"top"},[l("div",[e._v("\n                    标题:\n                    "),l("el-input",{model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),e._v("  \n                    安装公司:\n                    "),l("el-input",{model:{value:e.unitName,callback:function(t){e.unitName=t},expression:"unitName"}}),e._v("  \n                    "),l("el-button",{attrs:{type:"primary"},on:{click:e.searchsubmit}},[e._v("查询")]),e._v(" "),l("el-button",{on:{click:e.searchreset}},[e._v("重置")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.opendialog}},[l("i",{staticClass:"el-icon-plus"}),e._v(" 新增")])],1)]),e._v(" "),l("div",{staticStyle:{"margin-top":"10px",height:"88%",position:"relative"}},[l("el-table",{staticStyle:{width:"150"},attrs:{data:e.tableData,border:""}},[l("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),l("el-table-column",{attrs:{prop:"title",label:"安装标题",width:"200"}}),e._v(" "),l("el-table-column",{attrs:{prop:"installerName",label:"安装人姓名",width:"150"}}),e._v(" "),l("el-table-column",{attrs:{prop:"installerPhone",label:"安装人电话",width:"200"}}),e._v(" "),l("el-table-column",{attrs:{prop:"unitName",label:"安装公司",width:"250"}}),e._v(" "),l("el-table-column",{attrs:{prop:"debuggerName",label:"调试人员姓名",width:"150"}}),e._v(" "),l("el-table-column",{attrs:{prop:"debuggerPhone",label:"调试人员电话",width:"200"}}),e._v(" "),l("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(l){return e.editdatas(t.row.id)}}},[e._v("编辑")]),e._v(" "),l("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger"},on:{click:function(l){return e.handleDelete(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),l("div",{staticStyle:{position:"absolute",bottom:"0"}},[l("pagination",{ref:"paginationChild",attrs:{total:e.total},on:{pageChange:e.pageChange}})],1)],1),e._v(" "),l("el-dialog",{staticClass:"dialog",attrs:{title:"添加/修改安装信息",visible:e.dialogVisible,width:"30%","close-on-click-modal":!1,"before-close":e.closedialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[l("el-form-item",{attrs:{label:"安装标题",prop:"title"}},[l("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"安装人姓名",prop:"installerName"}},[l("el-input",{model:{value:e.ruleForm.installerName,callback:function(t){e.$set(e.ruleForm,"installerName",t)},expression:"ruleForm.installerName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"安装人电话",prop:"installerPhone"}},[l("el-input",{model:{value:e.ruleForm.installerPhone,callback:function(t){e.$set(e.ruleForm,"installerPhone",t)},expression:"ruleForm.installerPhone"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"安装公司",prop:"unitName"}},[l("el-input",{model:{value:e.ruleForm.unitName,callback:function(t){e.$set(e.ruleForm,"unitName",t)},expression:"ruleForm.unitName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"调试人员",prop:"debuggerName"}},[l("el-input",{model:{value:e.ruleForm.debuggerName,callback:function(t){e.$set(e.ruleForm,"debuggerName",t)},expression:"ruleForm.debuggerName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"调试人员电话",prop:"debuggerPhone"}},[l("el-input",{model:{value:e.ruleForm.debuggerPhone,callback:function(t){e.$set(e.ruleForm,"debuggerPhone",t)},expression:"ruleForm.debuggerPhone"}})],1),e._v(" "),l("el-form-item",{staticClass:"formfooter"},[l("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("ruleForm")}}},[e._v("立即提交")]),e._v(" "),l("el-button",{on:{click:e.closedialog}},[e._v("取 消")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var o=l("VU/8")(r,n,!1,function(e){l("E9pH")},"data-v-7cd228c5",null);t.default=o.exports}});