webpackJsonp([2],{f5ub:function(t,e){},zIkb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("BO1k"),n=a.n(s),r={data:function(){var t=this;return{tableData:Array(20).fill({date:"2016-05-02",name:"王小虎"}),editableTabsValue:"2",datapassword:null,userType:sessionStorage.getItem("userTypes"),editableTabs:[{title:"Tab 1",name:"1",content:"Tab 1 content"},{title:"Tab 2",name:"2",content:"Tab 2 content"}],tabIndex:2,displayVisible:!1,updateVisible:!1,showunitVisible:!1,ruleForm2:{password:"",pass:"",checkPass:""},rules2:{password:{required:!0,message:"请输入原密码",trigger:"blur"},pass:[{required:!0,validator:function(e,a,s){""===a?s(new Error("请输入密码")):(""!==t.ruleForm2.checkPass&&t.$refs.ruleForm2.validateField("checkPass"),s())},trigger:"blur"}],checkPass:[{required:!0,validator:function(e,a,s){""===a?s(new Error("请再一次输入密码")):a!==t.ruleForm2.pass?s(new Error("两次密码不一致，请重新输入!")):s()},trigger:"blur"}]},userbox:{user:"",username:"",phone:"",email:""},unitId:"",unit_Form:{name:"",address:"",latitude:0,longitude:0,organizationCode:"",phone:"",postalCode:"",region:"",typeName:"",unitNum:"",fireControlRoomPhone:"",fireRunnerName:"",fireRunnerPhone:"",fireRunnerIdNo:"",fireSafetyOfficerName:"",fireSafetyOfficerPhone:"",fireSafetyOfficerIdNo:"",fireSafetyOfficerBackupPhone:"",legalPersonName:"",legalPersonIdNo:"",legalPersonPhone:"",staffNum:"",establishmentDate:"",economicsOwnership:"",fixedAssets:null,unitArea:null,totalArea:null,unitPlanUrl:"",unitDesc:"",createdTime:""}}},methods:{tabClick:function(){this.$router.push({path:this.activeIndex}),this.$store.commit("routeJump/delete_tabs","/unitmanagement/PollingSummary"),this.$store.commit("routeJump/delete_tabs","/unitmanagement/ligthSpot")},tabRemove:function(t){"/unitmanagement/userManagement"!=t&&(this.$store.commit("routeJump/delete_tabs",t),this.activeIndex===t&&(this.openTab&&this.openTab.length>=1?(this.$store.commit("routeJump/set_active_index",this.openTab[this.openTab.length-1].route),this.$router.push({path:this.activeIndex})):this.$router.push({path:"/unitmanagement/userManagement"})))},handleCommand:function(t){var e=this,a=this;1==t?this.axios({url:"/api/admin/user/single",method:"post",data:{id:sessionStorage.getItem("user_id")}}).then(function(t){0==t.data.code?(a.userbox.user=t.data.data.account,a.userbox.username=t.data.data.username,a.userbox.phone=t.data.data.phone,a.userbox.email=t.data.data.email,e.displayVisible=!0):a.$alert(t.data.msg,"提示",{confirmButtonText:"OK"})}):3==t?(sessionStorage.clear(),this.$router.push("/login")):2==t?this.updateVisible=!0:this.axios({url:"/api/admin/unit/single",method:"post",data:{id:sessionStorage.getItem("unitId")}}).then(function(t){0==t.data.code?(a.showunitVisible=!0,a.unit_Form=t.data.data):a.$alert(t.data.msg,"提示",{confirmButtonText:"OK"})})},submitFormuser:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var a=e;e.axios({url:"/api/admin/user/update.password",method:"post",data:{password:e.ruleForm2.pass}}).then(function(t){0==t.data.code?a.$alert("修改成功","提示",{confirmButtonText:"OK",callback:function(){a.resetFormuser("ruleForm2"),a.updateVisible=!1}}):a.$alert(t.data.msg,"提示",{confirmButtonText:"OK"})})})},resetFormuser:function(t){this.$refs[t].resetFields()},changePassword:function(){var t=this;this.axios({url:"/api/admin/user/password/valid",method:"post",data:{password:this.ruleForm2.password}}).then(function(e){0!=e.data.code&&(t.ruleForm2.password="",t.$message.error(e.data.msg))})}},computed:{openTab:function(){return this.$store.state.routeJump.openTab},activeIndex:{get:function(){return this.$store.state.routeJump.activeIndex},set:function(t){this.$store.commit("routeJump/set_active_index",t)}}},watch:{$route:function(t){var e=!1,a=!0,s=!1,r=void 0;try{for(var i,o=n()(this.openTab);!(a=(i=o.next()).done);a=!0){if(i.value.name===t.name){this.$store.commit("routeJump/set_active_index",t.path),this.activeIndex=t.path,e=!0;break}}}catch(t){s=!0,r=t}finally{try{!a&&o.return&&o.return()}finally{if(s)throw r}}e||(this.$store.commit("routeJump/add_tabs",{route:t.path,name:t.name}),this.$store.commit("routeJump/set_active_index",t.path))}},mounted:function(){"/login"!==this.$route.path&&"/unitmanagement/userManagement"!==this.$route.path?(this.$store.commit("routeJump/add_tabs",{route:this.$route.path,name:this.$route.name}),this.$store.commit("routeJump/set_active_index",this.$route.path)):(this.$store.commit("routeJump/add_tabs",{route:"/unitmanagement/userManagement",name:"人员管理"}),this.$store.commit("routeJump/set_active_index","/unitmanagement/userManagement"),this.$router.push("/unitmanagement/userManagement")),document.querySelector(".loginuser").innerHTML=sessionStorage.user_name,this.unitId=sessionStorage.unitId}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"menu"}},[a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{attrs:{width:"230px"}},[a("el-menu",[a("h1",{staticStyle:{"text-align":"center"}},[t._v("智慧消防")]),t._v(" "),a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[t._v("单位日常管理")]),t._v(" "),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"1-1"}},[a("router-link",{attrs:{to:"/unitmanagement/userManagement"}},[t._v("人员信息")])],1),t._v(" "),a("el-menu-item",{attrs:{index:"1-10"}},[a("router-link",{attrs:{to:"/configurationModule/inspectionRecord"}},[t._v("巡检记录")])],1),t._v(" "),a("el-menu-item",{attrs:{index:"1-12"}},[a("router-link",{attrs:{to:"/unitmanagement/everydayRecord"}},[t._v("每日一查")])],1),t._v(" "),a("el-menu-item",{attrs:{index:"1-19"}},[a("router-link",{attrs:{to:"/unitmanagement/everydatPatrol"}},[t._v("每日巡逻")])],1),t._v(" "),a("el-menu-item",{attrs:{index:"1-16"}},[a("router-link",{attrs:{to:"/unitmanagement/spotCheck"}},[t._v("每月点检")])],1),t._v(" "),a("el-menu-item",{attrs:{index:"1-14"}},[a("router-link",{attrs:{to:"/unitmanagement/fireWatch"}},[t._v("每月防火检查")])],1),t._v(" "),a("el-menu-item",{attrs:{index:"1-13"}},[a("router-link",{attrs:{to:"/unitmanagement/connectList"}},[t._v("消控交接记录")])],1),t._v(" "),a("el-menu-item",{attrs:{index:"1-17"}},[a("router-link",{attrs:{to:"/unitmanagement/pumpHouse"}},[t._v("消防水泵房记录")])],1),t._v(" "),a("el-menu-item",{attrs:{index:"1-18"}},[a("router-link",{attrs:{to:"/unitmanagement/lightPolling"}},[t._v("疏散/照明灯月检")])],1),t._v(" "),a("el-menu-item",{attrs:{index:"3-7"}},[a("router-link",{attrs:{to:"/configurationModule/qrCode"}},[t._v("设备二维码")])],1)],1)],2)],1)],1),t._v(" "),a("el-dialog",{staticClass:"showuserbox",attrs:{title:"个人信息",visible:t.displayVisible,width:"30%"},on:{"update:visible":function(e){t.displayVisible=e}}},[a("div",[a("p",[a("span",{staticClass:"userbox"},[t._v("用户账号：")]),a("span",{staticClass:"user"},[t._v(t._s(t.userbox.user))])]),t._v(" "),a("p",[a("span",{staticClass:"userbox"},[t._v("姓名：")]),a("span",{staticClass:"username"},[t._v(t._s(t.userbox.username))])]),t._v(" "),a("p",[a("span",{staticClass:"userbox"},[t._v("手机号码：")]),a("span",{staticClass:"phone"},[t._v(t._s(t.userbox.phone))])]),t._v(" "),a("p",[a("span",{staticClass:"userbox"},[t._v("邮箱Email：")]),a("span",{staticClass:"email"},[t._v(t._s(t.userbox.email))])])])]),t._v(" "),a("el-dialog",{staticClass:"updateuserbox",attrs:{title:"修改密码",visible:t.updateVisible,width:"25%"},on:{"update:visible":function(e){t.updateVisible=e}}},[a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm2,rules:t.rules2,"status-icon":"","label-width":"120px"}},[a("el-form-item",{attrs:{label:"原密码",prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},on:{blur:function(e){return e.preventDefault(),t.changePassword()}},model:{value:t.ruleForm2.password,callback:function(e){t.$set(t.ruleForm2,"password",e)},expression:"ruleForm2.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"pass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:t.ruleForm2.pass,callback:function(e){t.$set(t.ruleForm2,"pass",e)},expression:"ruleForm2.pass"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:t.ruleForm2.checkPass,callback:function(e){t.$set(t.ruleForm2,"checkPass",e)},expression:"ruleForm2.checkPass"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitFormuser("ruleForm2")}}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:function(e){return t.resetFormuser("ruleForm2")}}},[t._v("重置")])],1)],1)],1),t._v(" "),a("el-dialog",{staticClass:"showunitbox",attrs:{title:"单位信息",visible:t.showunitVisible,width:"65%"},on:{"update:visible":function(e){t.showunitVisible=e}}},[a("fieldset",[a("legend",[t._v("单位信息")]),t._v(" "),a("table",{staticClass:"detail_table"},[a("tr",[a("td",[t._v("单位名称： "),a("span",[t._v(t._s(t.unit_Form.name))])]),t._v(" "),a("td",[t._v("单位电话： "),a("span",[t._v(t._s(t.unit_Form.phone))])]),t._v(" "),a("td",[t._v("单位类型： "),a("span",[t._v(t._s(t.unit_Form.typeName))])])]),t._v(" "),a("tr",[a("td",[t._v("所属区域： "),a("span",[t._v(t._s(t.unit_Form.region))])]),t._v(" "),a("td",[t._v("统一社会信用代码： "),a("span",[t._v(t._s(t.unit_Form.organizationCode))])]),t._v(" "),a("td",[t._v("成立时间： "),a("span",[t._v(t._s(t.unit_Form.establishmentDate))])])]),t._v(" "),a("tr",[a("td",[t._v("邮政编码： "),a("span",[t._v(t._s(t.unit_Form.postalCode))])]),t._v(" "),a("td",[t._v("单位地址： "),a("span",[t._v(t._s(t.unit_Form.address))])]),t._v(" "),a("td",[t._v("单位备注： "),a("span",[t._v(t._s(t.unit_Form.unitDesc?t.unit_Form.unitDesc:"暂无"))])])]),t._v(" "),a("tr",[a("td",[t._v("法人姓名： "),a("span",[t._v(t._s(t.unit_Form.legalPersonName))])]),t._v(" "),a("td",[t._v("法人电话： "),a("span",[t._v(t._s(t.unit_Form.legalPersonPhone))])]),t._v(" "),a("td",[t._v("法人身份证号： "),a("span",[t._v(t._s(t.unit_Form.legalPersonIdNo))])])])])]),t._v(" "),a("fieldset",[a("legend",[t._v("消防信息")]),t._v(" "),a("table",{staticClass:"detail_table"},[a("tr",[a("td",[t._v("消防安全责任人姓名： "),a("span",[t._v(t._s(t.unit_Form.fireRunnerName))])]),t._v(" "),a("td",[t._v("消防安全责任人电话： "),a("span",[t._v(t._s(t.unit_Form.fireRunnerPhone))])]),t._v(" "),a("td",[t._v("消防安全责任人身份号码： "),a("span",[t._v(t._s(t.unit_Form.fireRunnerIdNo))])])]),t._v(" "),a("tr",[a("td",[t._v("消防安全管理人姓名： "),a("span",[t._v(t._s(t.unit_Form.fireSafetyOfficerName))])]),t._v(" "),a("td",[t._v("消防安全管理人电话： "),a("span",[t._v(t._s(t.unit_Form.fireSafetyOfficerPhone))])]),t._v(" "),a("td",[t._v("消防安全管理人身份号码： "),a("span",[t._v(t._s(t.unit_Form.fireSafetyOfficerIdNo))])])]),t._v(" "),a("tr",[a("td",[t._v("消防安全控制室电话： "),a("span",[t._v(t._s(t.unit_Form.fireControlRoomPhone))])]),t._v(" "),a("td",[t._v("兼职消防管理人电话： "),a("span",[t._v(t._s(t.unit_Form.fireSafetyOfficerBackupPhone))])]),t._v(" "),a("td")])])]),t._v(" "),a("fieldset",[a("legend",[t._v("其他信息")]),t._v(" "),a("table",{staticClass:"detail_table"},[a("tr",[a("td",[t._v("经济所有制： "),a("span",[t._v(t._s(t.unit_Form.economicsOwnership))])]),t._v(" "),a("td",[t._v("单位固定资产： "),a("span",[t._v(t._s(t.unit_Form.fixedAssets))])]),t._v(" "),a("td",[t._v("单位占地面积： "),a("span",[t._v(t._s(t.unit_Form.unitArea))])])]),t._v(" "),a("tr",[a("td",[t._v("单位职工人数： "),a("span",[t._v(t._s(t.unit_Form.staffNum))])]),t._v(" "),a("td",[t._v("单位建筑面积： "),a("span",[t._v(t._s(t.unit_Form.totalArea))])])])])])]),t._v(" "),a("el-container",[a("el-header",{staticStyle:{"text-align":"right"},attrs:{id:"user_operation"}},[a("span",{staticClass:"loginuser"},[t._v("王小虎")]),t._v(" "),a("el-dropdown",{on:{command:t.handleCommand}},[a("i",{staticClass:"el-icon-setting",staticStyle:{"margin-right":"15px",color:"#fff","font-size":"14px"}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown",id:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1"}},[t._v("查看个人信息")]),t._v(" "),-1!=t.unitId?a("div",[a("el-dropdown-item",{attrs:{command:"4"}},[t._v("查看单位信息")])],1):t._e(),t._v(" "),a("el-dropdown-item",{attrs:{command:"2"}},[t._v("修改密码")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"3"}},[t._v("退出")])],1)],1)],1),t._v(" "),a("div",{staticClass:"content"},[a("div",[t.openTab.length?a("el-tabs",{attrs:{type:"border-card",closable:""},on:{"tab-click":t.tabClick,"tab-remove":t.tabRemove},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},t._l(t.openTab,function(t){return a("el-tab-pane",{key:t.name,attrs:{label:t.name,name:t.route}})}),1):t._e()],1),t._v(" "),a("div",{staticClass:"content-wrap"},[a("router-view")],1)])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(r,i,!1,function(t){a("f5ub")},null,null);e.default=o.exports}});