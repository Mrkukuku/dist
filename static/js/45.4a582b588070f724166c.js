webpackJsonp([45],{Hixj:function(t,e){},RNy2:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("g5qz"),n=i("MCsY"),o={mixins:[a.a],components:{pagination:n.a},data:function(){var t=this;return{radio:1,module:"inspectionRecord",userType:"",unitId:"",currentPage:1,rows:10,total:0,tableData:[],startTime:"",endTime:"",expireTimeOptionStart:{disabledDate:function(e){var i=t.endTime;return i&&e.getTime()>new Date(i).getTime()||e.getTime()>Date.now()}},expireTimeOptionEnd:{disabledDate:function(e){var i=t.startTime;return i&&e.getTime()<new Date(i).getTime()||e.getTime()>Date.now()}},type:"",typeList:[],type1:"",typeList1:[{id:0,name:"未完成"},{id:1,name:"已完成"}],type2:"",typeList2:[]}},methods:{exportPolling:function(){},seach:function(){this.currentPage=1,this.getDatas()},getDatas:function(){var t=this;this.axios({url:"/api/admin/fire/control/handover/list",method:"post",data:{startTime:this.startTime,endTime:this.endTime,unitId:this.unitId,pageSize:this.rows,pageNum:this.currentPage,uid:this.type,exceptionType:this.type1}}).then(function(e){0==e.data.code?(t.tableData=e.data.list,t.total=e.data.total):t.$alert(e.data.msg)})},getpeople:function(){var t=this;this.axios({url:"/api/admin/user/fire/control/list",method:"post",data:{id:this.unitId}}).then(function(e){0==e.data.code?t.typeList=e.data.data:t.$alert(e.data.msg)})},getData:function(){},handleReset:function(){this.startTime="",this.endTime="",this.type="",this.type1="",this.currentPage=1,this.$refs.paginations.changePageNum(1),this.getDatas()},pageChange:function(t){this.currentPage=t.page_index,this.rows=t.page_limit,this.getDatas()},renderContent:function(t,e){var i=e.node;return t("span",[t("i",{class:e.data.icon})," ",t("span",[i.label])])},handleNodeClick:function(t){this.unitId=t.id,this.getDatas(),this.getpeople()}},mounted:function(){this.userType=sessionStorage.getItem("userTypes"),this.unitId=Number(sessionStorage.getItem("unitId")),this.userType}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"allcontent",attrs:{id:"fire_facility"}},[i("el-row",{staticStyle:{height:"100%"}},[3!=t.userType?i("el-col",{staticClass:"tree_box",attrs:{span:4}},[i("div",[i("el-input",{staticClass:"filter_text",attrs:{placeholder:"输入关键字进行过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),t._v(" "),i("el-tree",{ref:"tree",attrs:{data:t.Treedata,props:t.defaultProps,"render-content":t.renderContent,"highlight-current":"","filter-node-method":t.filterNode},on:{"node-click":t.handleNodeClick}})],1)]):t._e(),t._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:3==t.userType?24:20}},[i("div",{staticClass:"top"},[i("div",[t._v("\r\n              \r\n                  提交人 "),i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.typeList,function(t){return i("el-option",{key:t.id,attrs:{label:t.text,value:t.id}})}),1),t._v("\r\n                  维修人 "),i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.type2,callback:function(e){t.type2=e},expression:"type2"}},t._l(t.typeList2,function(t){return i("el-option",{key:t.id,attrs:{label:t.text,value:t.id}})}),1),t._v("\r\n                  完成情况 "),i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.type1,callback:function(e){t.type1=e},expression:"type1"}},t._l(t.typeList1,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v("\r\n                  \r\n                时间筛选："),i("el-date-picker",{staticClass:"picker",attrs:{type:"date",placeholder:"开始日期","picker-options":t.expireTimeOptionStart},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}}),t._v(" -\r\n                "),i("el-date-picker",{staticClass:"picker",attrs:{type:"date","picker-options":t.expireTimeOptionEnd,placeholder:"结束日期"},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}}),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.seach}},[t._v(" 查询")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.exportPolling}},[t._v("导出")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleReset}},[t._v("重置")])],1)]),t._v(" "),i("div",{staticStyle:{"margin-top":"10px",height:"88%",position:"relative"}},[i("el-table",{attrs:{data:t.tableData,border:""}},[i("el-table-column",{attrs:{label:"故障情况",align:"center"}},[i("el-table-column",{attrs:{prop:"time",label:"发现时间",align:"center",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(1==e.row.fireViolation&&2==e.row.fireViolationDesc.status?"√":""))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"time",label:"发现人签名",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(1==e.row.fireViolation&&1==e.row.fireViolationDesc.status?"√":""))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"time",label:"故障部位",align:"center",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(1==e.row.fireViolation&&2==e.row.fireViolationDesc.status?"√":""))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"time",label:"故障情况描述",align:"center",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(1==e.row.fireViolation&&1==e.row.fireViolationDesc.status?"√":""))])]}}])})],1),t._v(" "),i("el-table-column",{attrs:{label:"故障维修情况",align:"center"}},[i("el-table-column",{attrs:{prop:"time",label:"是否停用系统",align:"center",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(1==e.row.fireViolation&&2==e.row.fireViolationDesc.status?"√":""))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"time",label:"现场图片",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(1==e.row.fireViolation&&1==e.row.fireViolationDesc.status?"√":""))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"time",label:"安全保护措施",align:"center",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(1==e.row.fireViolation&&2==e.row.fireViolationDesc.status?"√":""))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"time",label:"维修时间",align:"center",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(1==e.row.fireViolation&&1==e.row.fireViolationDesc.status?"√":""))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"time",label:"维修人员（单位）",align:"center",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(1==e.row.fireViolation&&1==e.row.fireViolationDesc.status?"√":""))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"time",label:"维修方法",align:"center",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(1==e.row.fireViolation&&1==e.row.fireViolationDesc.status?"√":""))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"time",label:"整改图片",align:"center",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(1==e.row.fireViolation&&1==e.row.fireViolationDesc.status?"√":""))])]}}])})],1),t._v(" "),i("el-table-column",{attrs:{prop:"time",label:"故障排除确认",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(1==e.row.fireViolation&&1==e.row.fireViolationDesc.status?"√":""))])]}}])})],1),t._v(" "),i("div",{staticClass:"page",staticStyle:{position:"absolute",bottom:"0"}},[i("pagination",{ref:"paginations",attrs:{total:t.total},on:{pageChange:t.pageChange}})],1)],1)])],1)],1)},staticRenderFns:[]};var r=i("VU/8")(o,l,!1,function(t){i("Hixj")},null,null);e.default=r.exports}});