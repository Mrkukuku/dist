webpackJsonp([18],{EZ6t:function(e,t){},"x+oq":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),l=i.n(a),o={components:{pagination:i("MCsY").a},data:function(){var e=this;return{noticeName:"",noticetime:"",filterText:"",treedefaultProps:{children:"children",label:"label"},props:{multiple:!0,checkStrictly:!0},ruleForm:{startTime:"",endTime:"",unitIds:[],title:"",content:"",fileList:[]},rules:{title:[{required:!0,message:"请输入公告标题",trigger:"blur"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}],unitIds:[{required:!0,message:"请选择单位集合",trigger:"blur"}],time:[{validator:function(t,i,a){if(""==e.ruleForm.startTime||""==e.ruleForm.endTime)a(new Error("请选择完成时限"));else{var l=new Date(e.ruleForm.startTime),o=new Date(e.ruleForm.endTime);l.getTime()>o.getTime()?a(new Error("开始时间必须小于结束时间")):a()}},required:!0,trigger:"blur"}]},replyForm:{completed:"1",completedNote:"",fileList:[]},replyRules:{completed:[{required:!0,message:"请选择完成状态",trigger:"blur"}],completedNote:[{required:!0,message:"请输入描述",trigger:"blur"}]},pageNum:1,pageSize:10,pageNum1:1,pageSize1:10,total:10,total1:10,Treedata:[],tableData:[{}],unitId:"",userType:"",userTypes:"",dialogVisible:!1,ArchitecturalVisible:!1,imgList:[],photoOptions:[{id:1,name:"第一张"},{id:2,name:"第二张"},{id:3,name:"第三张"},{id:4,name:"第四张"},{id:5,name:"第五张"}],unitoOptions:[],oldChooseData:[],posterURL:"",phoneName:"",upload:"",selectFeedbackDialog:!1,unitFeedbackDialog:!1,unitFeedbackDialog1:!1,FeedbackReply:!1,feedBackId:"",unitListData:[],dialogImageUrl:"",replyPhotoVisible:!1,replyPhotoList:[],completed:!1,type:"",type1:"",typeOptions:[{label:"已查看",value:"1"},{label:"未查看",value:"0"}],typeOptions1:[{label:"已完成",value:"1"},{label:"未完成",value:"0"}],unitTableData:[]}},methods:{uploadsFile:function(e){var t=this,i=new FormData;i.append("file",e.file),i.append("fileType",10),this.axios({url:"/api/admin/file/upload",method:"post",data:i}).then(function(i){0==i.data.code?t.ruleForm.fileList.push({url:i.data.data.fileUrl,uid:e.file.uid,name:e.file.name}):(e.file,t.$alert(i.data.msg,"提示",{confirmButtonText:"OK"}))})},handleRemoveFile:function(e){for(var t in this.ruleForm.fileList)this.ruleForm.fileList[t].uid==e.uid&&this.ruleForm.fileList.splice(t,1)},uploadsFile1:function(e){var t=this,i=new FormData;i.append("file",e.file),i.append("fileType",10),this.axios({url:"/api/admin/file/upload",method:"post",data:i}).then(function(i){0==i.data.code?t.replyForm.fileList.push({url:i.data.data.fileUrl,uid:e.file.uid,name:e.file.name}):(e.file,t.$alert(i.data.msg,"提示",{confirmButtonText:"OK"}))})},handleRemoveFile1:function(e){for(var t in this.replyForm.fileList)this.replyForm.fileList[t].uid==e.uid&&this.replyForm.fileList.splice(t,1)},downFile:function(e){e.url&&this.download(e.url,e.name)},getBlob:function(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=function(){200===i.status&&t(i.response)},i.send()},saveAs:function(e,t){if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(e,t);else{var i=document.createElement("a"),a=document.querySelector("body");i.href=window.URL.createObjectURL(e),i.download=t,i.style.display="none",a.appendChild(i),i.click(),a.removeChild(i),window.URL.revokeObjectURL(i.href)}},download:function(e,t){var i=this;this.getBlob(e,function(e){i.saveAs(e,t)})},renderContent:function(e,t){var i=t.node;return e("span",[e("i",{class:t.data.icon})," ",e("span",[i.label])])},selectChange:function(e){this.$forceUpdate();var t=this.unitoOptions.map(function(e){return e.id}),i=this.oldChooseData.length>0?this.oldChooseData:[];if(e.includes("ALL_SELECT")&&(this.ruleForm.unitIds=t),i.includes("ALL_SELECT")&&!e.includes("ALL_SELECT")&&(this.ruleForm.unitIds=[]),i.includes("ALL_SELECT")&&e.includes("ALL_SELECT")){var a=e.indexOf("ALL_SELECT");e.splice(a,1),this.ruleForm.unitIds=e}i.includes("ALL_SELECT")||e.includes("ALL_SELECT")||e.length===t.length-1&&(this.ruleForm.unitIds=["ALL_SELECT"].concat(e)),this.oldChooseData=this.ruleForm.unitIds},handleNodeClick:function(e){this.unitId=e.id,this.userTypes=e.type+2,this.pageSize=10,this.pageNum=1,this.getData()},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},getData:function(){var e=this;this.axios({url:"/api/admin/announcement/search/page",method:"post",data:{unitId:this.unitId,pageSize:this.pageSize,pageNum:this.pageNum,title:this.noticeName}}).then(function(t){if(0==t.data.code){if(e.tableData=t.data.list,e.total=t.data.total,e.tableData.length>0)for(var i in e.tableData)e.tableData[i].time=e.$moment(e.tableData[i].startTime).format("YYYY-MM-DD")+"到"+e.$moment(e.tableData[i].endTime).format("YYYY-MM-DD"),e.tableData[i].createdTime=e.$moment(e.tableData[i].createdTime).format("YYYY-MM-DD HH:mm"),0==e.tableData[i].completed?e.tableData[i].completed="未完成":e.tableData[i].completed="已完成"}else e.$alert(t.data.msg,"提示",{confirmButtonText:"OK"})})},handleDelete:function(e){var t=this;this.$confirm("你确定要删除吗").then(function(){var i=t;t.axios({url:"/api/admin/announcement/delete",method:"post",data:{id:e}}).then(function(e){0==e.data.code?i.$alert("删除成功","提示",{confirmButtonText:"OK",callback:function(){i.getData()}}):i.$alert(e.data.msg,"提示",{confirmButtonText:"OK"})})})},resetNotice:function(){this.noticeName="",this.noticetime="",this.getData()},searchData:function(){this.pageNum=1,this.$refs.paginationChild.changePageNum(this.pageNum),this.getData()},pageChange:function(e){this.pageNum=e.page_index,this.pageSize=e.page_limit,this.getData()},pageChange1:function(e){this.pageNum1=e.page_index,this.pageSize1=e.page_limit,this.openUnitFeedback()},getTreeData:function(){var e=this;this.axios({url:"/api/admin/unit/list.left",method:"post",data:{pageNum:1e3,pageSize:1}}).then(function(t){0==t.data.code?e.Treedata=t.data.data:e.$alert(t.data.msg,"提示",{confirmButtonText:"OK"})})},getUnitData:function(){var e=this;this.axios({url:"/api/admin/unit/list/announcement",method:"post",data:{id:this.unitId}}).then(function(t){0==t.data.code?(e.unitoOptions=t.data.data,e.unitoOptions.unshift({id:"ALL_SELECT",name:"全部"})):e.$alert(t.data.msg,"提示",{confirmButtonText:"OK"})})},opendialog:function(){this.getUnitData(),delete this.ruleForm.id,this.dialogVisible=!0},closedialog:function(){this.dialogVisible=!1,delete this.ruleForm.id,l()(this.$data.ruleForm,this.$options.data().ruleForm)},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){t.ruleForm.unitId=t.unitId,"ALL_SELECT"==t.ruleForm.unitIds[0]&&t.ruleForm.unitIds.splice(0,1);var i=t;t.ruleForm.unitId=t.unitId,t.axios({url:"/api/admin/announcement/add",method:"post",data:t.ruleForm}).then(function(e){0==e.data.code?i.$alert("保存成功","提示",{confirmButtonText:"OK",callback:function(){i.getData(),i.closedialog()}}):i.$alert(e.data.msg,"提示",{confirmButtonText:"OK"})})}else t.$alert("请填表单必填字段")})},replySubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var i=t;for(var a in t.replyForm.unitId=t.unitId,t.replyForm.announcementId=t.feedBackId,t.replyForm.imgaes=[],t.replyPhotoList)t.replyForm.imgaes.push(t.replyPhotoList[a].img);t.axios({url:"/api/admin/announcement/unit/update",method:"post",data:t.replyForm}).then(function(e){0==e.data.code?i.$alert("保存成功","提示",{confirmButtonText:"OK",callback:function(){i.getData(),i.closeReplyFeedback()}}):i.$alert(e.data.msg,"提示",{confirmButtonText:"OK"})})}})},closeArchitectural:function(){this.ArchitecturalVisible=!1},noticePhoto:function(e){this.ArchitecturalVisible=!0,this.feedBackId=e,this.photoList()},beforeUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),i="jpg"===t,a="png"===t,l=e.size/1024/1024<5;return i||a?l?(this.posterURL=URL.createObjectURL(e.raw),void(this.upload=e.raw)):(this.$message({message:"上传文件大小不能超过 5MB!",type:"warning"}),this.$refs.upload.clearFiles(),void(this.files=null)):(this.$message({message:"上传文件只能是jpg,png格式!",type:"warning"}),this.$refs.upload.clearFiles(),void(this.imgFile=null))},unituploads:function(){var e=this;if(e.phoneName){e.posterURL||e.$alert("请上传图片","提示",{confirmButtonText:"OK"});var t=new FormData;t.append("file",this.upload),t.append("fileType",7),this.axios({url:"/api/admin/file/upload",method:"post",data:t}).then(function(t){0==t.data.code?(e.imgUrl=t.data.data.fileUrl,e.$alert("上传成功","提示",{confirmButtonText:"OK"})):e.$alert(t.data.msg,"提示",{confirmButtonText:"OK"})})}else e.$alert("请选择图片选项","提示",{confirmButtonText:"OK"})},photoSubmit:function(){var e=this;""!=this.phoneName&""!=this.imgUrl?this.axios({url:"/api/admin/announcement/image/add",method:"post",data:{image:this.imgUrl,announcementId:this.feedBackId,num:this.phoneName}}).then(function(t){0===t.data.code?e.$alert("添加成功","提示",{confirmButtonText:"OK",callback:function(){e.photoReset(),e.photoList()}}):e.$alert(t.data.msg,"提示",{confirmButtonText:"OK"})}):e.$alert("请选择图片或图片选项","提示",{confirmButtonText:"OK"})},photoList:function(){var e=this;this.axios({url:"/api/admin/announcement/image/list",method:"post",data:{id:this.feedBackId}}).then(function(t){0===t.data.code?e.imgList=t.data.data:e.$alert(t.data.msg,"提示",{confirmButtonText:"OK"})})},photoReset:function(){this.posterURL="",this.imgUrl="",this.phoneName=""},selectFeedback:function(e,t){this.completed="已完成"==t;var i=this;this.feedBackId=e,this.axios({url:"/api/admin/announcement/search/single",method:"post",data:{id:e,unitId:this.unitId}}).then(function(e){0==e.data.code?(i.ruleForm=e.data.data,i.ruleForm.time=i.$moment(i.ruleForm.startTime).format("YYYY-MM-DD")+"至"+i.$moment(i.ruleForm.endTime).format("YYYY-MM-DD"),i.selectFeedbackDialog=!0):i.$alert(e.data.msg,"提示",{confirmButtonText:"OK"})})},closeSelectFeedback:function(){this.selectFeedbackDialog=!1,this.closedialog()},closeUnitFeedback:function(){this.unitFeedbackDialog=!1},closeUnitFeedback1:function(){this.unitFeedbackDialog1=!1},openUnitFeedback:function(){var e=this;this.axios({url:"/api/admin/announcement/unit/list",method:"post",data:{id:this.feedBackId,status:this.type,completed:this.type1,pageSize:this.pageSize1,pageNum:this.pageNum1}}).then(function(t){0==t.data.code?(e.unitTableData=t.data.list,e.unitTableData.map(function(t){t.finishTime=t.finishTime&&e.$moment(t.finishTime).format("YYYY-MM-DD HH:mm:ss")}),e.total1=t.data.total,e.unitFeedbackDialog=!0):e.$alert(t.data.msg,"提示",{confirmButtonText:"OK"})})},editNotic:function(e){var t=this;this.axios({url:"/api/admin/announcement/unit/single",method:"post",data:{id:e}}).then(function(e){0==e.data.code?(t.unitListData=e.data.data,t.unitFeedbackDialog1=!0):t.$alert(e.data.msg,"提示",{confirmButtonText:"OK"})})},handleReset:function(){this.type="",this.type1="",this.pageSize1=10,this.pageNum1=1,this.$refs.paginationChild.changePageNum(this.pageNum),this.openUnitFeedback()},closeReplyFeedback:function(){this.closeSelectFeedback(),this.FeedbackReply=!1,document.querySelector(".replyPhoto ul").innerHTML="",l()(this.$data.replyForm,this.$options.data().replyForm)},openReplyFeedback:function(){this.FeedbackReply=!0},handleRemove:function(e,t){for(var i in this.replyPhotoList)this.replyPhotoList[i].uid==e.uid&&this.replyPhotoList.splice(i,1)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.replyPhotoVisible=!0},replyPhotoSubmit:function(e){var t=this,i=this,a=new FormData;a.append("file",e.file),a.append("fileType",7),this.axios({url:"/api/admin/file/upload",method:"post",data:a}).then(function(a){0==a.data.code?(i.replyPhotoList.push({img:a.data.data.fileUrl,uid:e.file.uid}),t.$message({message:"上传成功",type:"success"})):i.$alert(a.data.msg,"提示",{confirmButtonText:"OK"})})}},mounted:function(){this.userType=sessionStorage.getItem("userTypes"),2==this.userType||3==this.userType?(this.userTypes=this.userType,this.unitId=sessionStorage.getItem("unitId"),this.getData()):this.getTreeData()},watch:{filterText:function(e){this.$refs.tree.filter(e)}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"allcontent",attrs:{id:"noticeManagement"}},[1==e.userType?i("el-col",{staticClass:"tree_box",attrs:{span:3}},[i("div",[i("el-input",{staticClass:"filter_text",attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),i("el-tree",{ref:"tree",attrs:{data:e.Treedata,props:e.treedefaultProps,"render-content":e.renderContent,"highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1)]):e._e(),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:21}},[i("div",{staticClass:"top"},[i("div",[e._v("\n                公告标题:\n                "),i("el-input",{model:{value:e.noticeName,callback:function(t){e.noticeName=t},expression:"noticeName"}}),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.searchData}},[e._v("查询")]),e._v(" "),i("el-button",{on:{click:e.resetNotice}},[e._v("重置")]),e._v(" "),2==e.userTypes?[i("el-button",{attrs:{type:"primary"},on:{click:e.opendialog}},[e._v("新增")])]:e._e()],2)]),e._v(" "),i("div",{staticStyle:{"margin-top":"10px",height:"88%",position:"relative"}},[i("el-table",{staticStyle:{width:"150"},attrs:{data:e.tableData,border:""}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{prop:"title",label:"公告标题",width:"250"}}),e._v(" "),3==e.userType?[i("el-table-column",{attrs:{prop:"completed",label:"完成状态",width:"100"}})]:e._e(),e._v(" "),i("el-table-column",{attrs:{prop:"time",label:"完成时限",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createdTime",label:"发布时间",width:"160"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==e.userTypes?i("span",[i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.handleDelete(t.row.id)}}},[e._v("删除")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(i){return e.noticePhoto(t.row.id)}}},[e._v("公告有关图片")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){return e.selectFeedback(t.row.id)}}},[e._v("查看反馈")])],1):e._e(),e._v(" "),3==e.userTypes?i("span",[i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){return e.selectFeedback(t.row.id,t.row.completed)}}},[e._v("完成")])],1):e._e()]}}])})],2),e._v(" "),i("div",{staticStyle:{position:"absolute",bottom:"0"}},[i("pagination",{ref:"paginationChild",attrs:{total:e.total},on:{pageChange:e.pageChange}})],1)],1),e._v(" "),i("el-dialog",{staticClass:"dialog",attrs:{title:"公告信息",visible:e.dialogVisible,width:"50%","close-on-click-modal":!1,"before-close":e.closedialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"134px"}},[i("el-form-item",{attrs:{label:"公告标题",prop:"title"}},[i("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"单位集合",prop:"unitIds"}},[i("el-select",{attrs:{multiple:"",filterable:"","collapse-tags":"",placeholder:"请选择单位集合"},on:{change:e.selectChange},model:{value:e.ruleForm.unitIds,callback:function(t){e.$set(e.ruleForm,"unitIds",t)},expression:"ruleForm.unitIds"}},e._l(e.unitoOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"完成时限",prop:"time"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"请选择开始时间"},model:{value:e.ruleForm.startTime,callback:function(t){e.$set(e.ruleForm,"startTime",t)},expression:"ruleForm.startTime"}}),e._v(" - \n                        "),i("el-date-picker",{attrs:{type:"date",placeholder:"请选择结束时间"},model:{value:e.ruleForm.endTime,callback:function(t){e.$set(e.ruleForm,"endTime",t)},expression:"ruleForm.endTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"公告内容",prop:"content"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1),e._v(" "),i("el-form-item",{staticClass:"replyfile",attrs:{label:"文件（最多三个）"}},[i("el-upload",{attrs:{action:"https://jsonplaceholder.typicode.com/posts/","http-request":e.uploadsFile,"file-list":e.ruleForm.fileList,"on-remove":e.handleRemoveFile}},[i("el-button",[e._v("选择文件")])],1)],1),e._v(" "),i("el-form-item",{staticClass:"formfooter"},[i("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("ruleForm")}}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:e.closedialog}},[e._v("取 消")])],1)],1)],1),e._v(" "),i("el-dialog",{staticClass:"dialog",attrs:{title:"公告图片",visible:e.ArchitecturalVisible,"close-on-click-modal":!1,"before-close":e.closeArchitectural},on:{"update:visible":function(t){e.ArchitecturalVisible=t}}},[i("fieldset",[i("legend",[e._v("各单位图片")]),e._v(" "),i("el-carousel",{attrs:{autoplay:!1,arrow:"always",height:"300px","initial-index":1}},e._l(e.imgList,function(t){return i("el-carousel-item",{key:t.name,staticClass:"elbg"},[i("span",{staticStyle:{width:"100%","text-align":"center",display:"inline-block","margin-bottom":"5px"}},[e._v(" 第"+e._s(t.num)+"张 ")]),e._v(" "),i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.image,alt:""}})])}),1)],1),e._v(" "),i("fieldset",[i("legend",[e._v("新增单位图片")]),e._v(" "),i("el-form",{attrs:{"label-width":"100px"}},[i("el-form-item",{attrs:{label:"图片选项"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.phoneName,callback:function(t){e.phoneName=t},expression:"phoneName"}},e._l(e.photoOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{staticStyle:{height:"auto"},attrs:{label:"单位图片",prop:"phone"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"",accept:".jpg,.png,.JPG,.PNG","show-file-list":!1,"on-change":e.beforeUpload,"auto-upload":!1}},[e.posterURL?i("img",{staticClass:"avatar",attrs:{src:e.posterURL}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),i("el-button",{on:{click:e.unituploads}},[e._v("立即上传")])],1),e._v(" "),i("el-form-item",{attrs:{"solt-scope":"scope"}},[i("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{size:"small",type:"primary"},on:{click:e.photoSubmit}},[e._v("提交")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.photoReset}},[e._v("重置")])],1)],1)],1)]),e._v(" "),i("el-dialog",{staticClass:"Feedback dialog ",attrs:{title:"公告信息",visible:e.selectFeedbackDialog,width:"40%","close-on-click-modal":!1,"before-close":e.closeSelectFeedback},on:{"update:visible":function(t){e.selectFeedbackDialog=t}}},[i("fieldset",[i("legend",[e._v("公告信息")]),e._v(" "),i("div",{staticClass:"divBox"},[i("div",{staticClass:"descript"},[e._v("公告标题:")]),e._v(" "),i("div",[e._v(e._s(e.ruleForm.title))])]),e._v(" "),i("div",{staticClass:"divBox"},[i("div",{staticClass:"descript"},[e._v("完成时限:")]),e._v(" "),i("div",[e._v(e._s(e.ruleForm.time))])]),e._v(" "),i("div",{staticClass:"textarea"},[i("div",{staticClass:"descript"},[e._v("公告内容:")]),e._v(" "),i("div",[e._v("\n                            "+e._s(e.ruleForm.content)+"\n                        ")])]),e._v(" "),i("div",{staticClass:"textarea"},[i("div",{staticClass:"descript"},[e._v("公告图片:")]),e._v(" "),i("div",{staticClass:"img"},e._l(e.ruleForm.images,function(e){return i("span",{key:e.id,staticStyle:{display:"inline-block","margin-left":"10px"}},[i("img",{attrs:{src:e.image,alt:""}})])}),0)]),e._v(" "),i("div",{staticClass:"textarea"},[i("div",{staticClass:"descript"},[e._v("文件:")]),e._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center"}},e._l(e.ruleForm.fileUrl,function(t,a){return i("div",{key:a},[e._v("\n                                "+e._s(t.name)+" "),i("el-button",{on:{click:function(i){return e.downFile(t)}}},[e._v("下载")])],1)}),0)])]),e._v(" "),2==e.userTypes?i("div",[i("el-button",{attrs:{type:"primary"},on:{click:e.openUnitFeedback}},[e._v("查看各单位反馈详情")]),e._v(" "),i("el-button",{on:{click:e.closeSelectFeedback}},[e._v("关闭")])],1):i("div",[i("el-button",{attrs:{type:"primary",disabled:e.completed},on:{click:e.openReplyFeedback}},[e._v("完成")]),e._v(" "),i("el-button",{on:{click:e.closeSelectFeedback}},[e._v("关闭")])],1),e._v(" "),i("el-dialog",{staticClass:"Feedback dialog",attrs:{title:"公告信息",visible:e.unitFeedbackDialog,width:"50%","append-to-body":!0,"close-on-click-modal":!1,"before-close":e.closeUnitFeedback},on:{"update:visible":function(t){e.unitFeedbackDialog=t}}},[i("div",{staticClass:"selcets"},[e._v("\n                         查看情况："),i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.typeOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v("\n                         完成情况："),i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.type1,callback:function(t){e.type1=t},expression:"type1"}},e._l(e.typeOptions1,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.openUnitFeedback}},[e._v(" 查询")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleReset}},[e._v("重置")])],1),e._v(" "),i("el-table",{staticStyle:{width:"150"},attrs:{data:e.unitTableData,border:""}},[i("el-table-column",{attrs:{prop:"unitName",label:"单位名称",width:"250"}}),e._v(" "),i("el-table-column",{attrs:{label:"完成状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(0==t.row.completed?"未完成":"已完成"))]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"查看状态",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(0==t.row.status?"未查看":"已查看"))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"finishTime",label:"完成时间",width:"160"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.editNotic(t.row.id)}}},[e._v("查看")])]}}])})],1),e._v(" "),i("pagination",{ref:"paginationChild1",attrs:{total:e.total1},on:{pageChange:e.pageChange1}})],1),e._v(" "),i("el-dialog",{staticClass:"Feedback dialog",attrs:{title:"单位完成详情",visible:e.unitFeedbackDialog1,width:"50%","append-to-body":!0,"close-on-click-modal":!1,"before-close":e.closeUnitFeedback1},on:{"update:visible":function(t){e.unitFeedbackDialog1=t}}},[i("fieldset",{staticStyle:{border:"1px solid #eee"}},[i("legend",[e._v("单位反馈情况")]),e._v(" "),i("div",{staticClass:"feedDiv"},[i("div",{staticClass:"FeedBox"},[i("div",{staticClass:"descript"},[e._v("单位名称:"+e._s(e.unitListData.unitName))]),e._v(" "),i("el-tag",{staticClass:"tags",staticStyle:{"margin-top":"10px"}},[e._v(e._s(1==e.unitListData.status?"已查看":"未查看"))])],1),e._v(" "),i("div",{staticClass:"FeedBox"},[i("div",{staticClass:"descript"},[e._v("完成状态:")]),e._v(" "),0==e.unitListData.completed?i("div",[e._v("未完成")]):i("div",[e._v("已完成")])]),e._v(" "),i("div",{staticClass:"textareaFeed"},[i("div",{staticClass:"descript"},[e._v("图片:")]),e._v(" "),i("div",e._l(e.unitListData.images,function(e){return i("span",{key:e,staticStyle:{height:"100px","margin-left":"10px"}},[i("img",{attrs:{src:e,alt:""}})])}),0)]),e._v(" "),i("div",{staticClass:"textareaFeed"},[i("div",{staticClass:"descript"},[e._v("文件:")]),e._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center"}},e._l(e.unitListData.fileUrl,function(t,a){return i("div",{key:a},[e._v("\n                                        "+e._s(t.name)+" "),i("el-button",{on:{click:function(i){return e.downFile(t)}}},[e._v("下载")])],1)}),0)]),e._v(" "),i("div",{staticClass:"textareaFeed"},[i("div",{staticClass:"descript"},[e._v("完成描述:")]),e._v(" "),i("div",[e._v(e._s(e.unitListData.completedNote?e.unitListData.completedNote:"无"))])])])])]),e._v(" "),i("el-dialog",{staticClass:"Feedback dialog",attrs:{title:"公告完成情况",visible:e.FeedbackReply,width:"50%","append-to-body":!0,"close-on-click-modal":!1,"before-close":e.closeReplyFeedback},on:{"update:visible":function(t){e.FeedbackReply=t}}},[i("el-form",{ref:"replyForm",staticClass:"demo-ruleForm",attrs:{model:e.replyForm,rules:e.replyRules,"label-width":"137px"}},[i("el-form-item",{attrs:{label:"描述",prop:"completedNote"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.replyForm.completedNote,callback:function(t){e.$set(e.replyForm,"completedNote",t)},expression:"replyForm.completedNote"}})],1),e._v(" "),i("el-form-item",{staticClass:"replyPhoto",attrs:{label:"图片(最多三张)"}},[i("el-upload",{attrs:{action:"","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"http-request":e.replyPhotoSubmit,limit:3,"on-remove":e.handleRemove}},[i("i",{staticClass:"el-icon-plus"})]),e._v(" "),i("el-dialog",{attrs:{visible:e.replyPhotoVisible},on:{"update:visible":function(t){e.replyPhotoVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),i("el-form-item",{staticClass:"replyfile",attrs:{label:"文件（最多三个）"}},[i("el-upload",{attrs:{action:"https://jsonplaceholder.typicode.com/posts/","http-request":e.uploadsFile1,"file-list":e.replyForm.fileList,"on-remove":e.handleRemoveFile1}},[i("el-button",[e._v("选择文件")])],1)],1),e._v(" "),i("el-form-item",{staticClass:"formfooter"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.replySubmit("replyForm")}}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:e.closeReplyFeedback}},[e._v("取 消")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var s=i("VU/8")(o,n,!1,function(e){i("EZ6t")},"data-v-9d233a30",null);t.default=s.exports}});