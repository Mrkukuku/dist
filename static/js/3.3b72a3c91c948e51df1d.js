webpackJsonp([3],{"9bBU":function(e,t,a){a("mClu");var i=a("FeBl").Object;e.exports=function(e,t,a){return i.defineProperty(e,t,a)}},C4MV:function(e,t,a){e.exports={default:a("9bBU"),__esModule:!0}},bOdI:function(e,t,a){"use strict";t.__esModule=!0;var i,l=a("C4MV"),o=(i=l)&&i.__esModule?i:{default:i};t.default=function(e,t,a){return t in e?(0,o.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},mClu:function(e,t,a){var i=a("kM2E");i(i.S+i.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})},"p/9D":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),l=a.n(i),o=a("bOdI"),r=a.n(o),n=a("g5qz");function s(e,t,a,i,l){var o=document.getElementById(e),r=13,n=13,s=16,d=16,c=3,u=0;o.onclick=1==i?null:function(e){if(document.querySelectorAll("#container>div"))if(u=document.querySelectorAll("#container>div"),l)for(var i=0;i<u.length;i++)u[i].id==l&&o.removeChild(u[i]);else for(i=0;i<u.length;i++)u[i].id==a&&o.removeChild(u[i]);if(t)for(var m=0;m<t.length;m++)t[m].deviceId==a&&t.splice(m,1);var p=e.clientY-o.offsetTop-document.querySelector(".dialog_log .el-dialog").offsetTop,v=e.clientX-o.offsetLeft-document.querySelector(".dialog_log .el-dialog").offsetLeft,g=document.createElement("div"),f=document.createElement("div"),b=document.createElement("div");l?(g.id=l,f.className="dot dotnow partdot"):(f.className="dot dotnow",g.id=a),b.className="pulse",f.style.left=v-r/2+"px",f.style.top=p-n/2+"px",b.style.left=v-s/2-c+"px",b.style.top=p-d/2-c+"px",g.appendChild(f),g.appendChild(b),o.appendChild(g),l?t.push({x:parseInt(f.style.left),y:parseInt(f.style.top),partId:l}):t.push({x:parseInt(f.style.left),y:parseInt(f.style.top),deviceId:a})}}var d=a("nQ03"),c=a("MCsY"),u={mixins:[n.a,d.a],components:{pagination:c.a},data:function(){var e,t,a=this;return t={module:"device",disabled_flag:!1,currentPage:1,rows:10,total:1,companyId:sessionStorage.getItem("unitId"),companyIds:sessionStorage.getItem("unitId"),deviceId:null,userType:sessionStorage.getItem("userTypes"),partId:null,installMsg:"",partDeviceId:null,installchange:!0,radio:"1",flag:!1,choosed:"one",system:"",devicestype:"",onLine:"",deviceName:"",addFlag:!0,normal:[],changeSystem:!1,dialogVisible:!1,openPortdialog:!1,changeParts:!1,Insert_Update_Parts:!1,changeRelation:!1,pagePartNum:1,pagePartSize:10,partTotal:0,PartData:[],positionList:[],tableEquipmentData:[],PortData:[],intelligentFireList:[],deviceTypeList:[],portNumberList:[]},r()(t,"addFlag",!0),r()(t,"BuildingFloor",[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}]),r()(t,"Floor",""),r()(t,"FloorImage",""),r()(t,"portSignalNameList",[]),r()(t,"CommunicationList",[]),r()(t,"options",[{id:0,name:"室外"}]),r()(t,"installOptions",[]),r()(t,"EquipmentDetail",{deviceName:"",deviceModel:"",deviceTypeDesc:"",intelligentFireSystemDesc:"",manufacturer:"",manufacturerTel:"",supplier:"",supplierTel:"",brand:"",protocolIdDesc:"",accessTypeDesc:"",deviceImgUrl:""}),r()(t,"unitId",sessionStorage.getItem("unitId")),r()(t,"ruleForm",(e={id:null,deviceLibId:"",deviceAlias:"",unitId:"",deviceCode:"",deviceUserCode:"",openDate:"",communicationMethod:"",communicationInformation:"",buildingId:"",installationDate:"",description:"",installerName:"",installerPhone:"",installationCompany:"",debugger:"",debuggerPhone:"",deviceSubNum:"",devicePointManagement:"",interfaceType:"",dataItemAnalysis:"",nodeResolution:"",installMsg:"",portNumber:"",portSignalName:"",analogCoefficient:"",upperLimit:"",lowerLimit:"",normalName:"",exceptionName:"",address:"",longitude:"",latitude:"",cameraMacAddress:"",cameraAddress:"",cameraAccount:"",cameraPassword:"",verificationCode:"",cameraPlatform:"",cameraIsExistsSd:"",cameraIsCloud:"",cameraIds:[],cameraBackIds:[],expirationTime:""},r()(e,"nodeResolution",[]),r()(e,"customResolution",{resolutionType:"1",resolutionRule:{host:{start:"",end:""},node:{start:"",end:""},loop:{start:"",end:""}}}),r()(e,"customResolutionType","0"),e)),r()(t,"rules",{deviceAlias:[{validator:function(e,t,a){""==t?a(new Error("请输入设备别名")):t&&(/^[\u4e00-\u9fa5\w\s\S]{1,25}$/.test(t)?a():a(new Error("长度不能超过25位")))},required:!0,trigger:"blur"}],deviceCode:[{required:!0,message:"请输入正确格式的序列号",trigger:"blur"},{validator:function(e,t,i){""==t?i(new Error("请输入序列号")):t&&(2==a.radio||3==a.radio||4==a.radio?/^[0-9]*$/.test(t)?t<1e14||t>1e15?i(new Error("请输入15位序列号")):i():i(new Error("请输入正确的序列号")):i())},required:!0,trigger:"blur"}],buildingId:[{required:!0,message:"请选择建筑",trigger:"blur"}],installMsg:[{required:!0,message:"请选择安装模板",trigger:"blur"}],installationCompany:[{required:!0,message:"请输入设备安装公司",trigger:"blur"}],openDate:[{required:!0,message:"请选择开通日期",trigger:"blur"}],communicationMethod:[{required:!0,message:"请输入通讯方式",trigger:"blur"}],communicationInformation:[{required:!0,message:"请输入通讯方式信息",trigger:"blur"}],installationDate:[{required:!0,message:"请选择安装日期",trigger:"blur"}],installerName:[{required:!0,message:"请输入安装人姓名",trigger:"blur"}],installerPhone:[{required:!0,message:"请输入安装人电话",trigger:"blur"}],debugger:[{required:!0,message:"请输入调试人员",trigger:"blur"}],debuggerPhone:[{required:!0,message:"请输入调试人员电话",trigger:"blur"}],description:[{required:!0,message:"请输入安装位置信息",trigger:"blur"}],cameraMacAddress:[{required:!0,message:"请输入mac地址",trigger:"blur"}],cameraAddress:[{required:!0,message:"请输入ip地址",trigger:"blur"}],cameraAccount:[{required:!0,message:"请输入设备账号",trigger:"blur"}],cameraPassword:[{required:!0,message:"请输入设备密码",trigger:"blur"}]}),r()(t,"portForm",{portNumber:"",portSignalName:""}),r()(t,"rulesPort",{portNumber:[{required:!0,message:"请输入端口号",trigger:"blur"}],portSignalName:[{required:!0,message:"请输入端口号名",trigger:"blur"}]}),r()(t,"partForm",{id:null,deviceId:null,partName:"",partNum:"",partAddress:""}),r()(t,"rulesPart",{partName:[{required:!0,message:"请输入部件名",trigger:"blur"}],partNum:[{required:!0,message:"请输入部件编号",trigger:"blur"}],partAddress:[{required:!0,message:"请输入部件地址",trigger:"blur"}]}),r()(t,"treedefaultProps",{children:"children",label:"label"}),r()(t,"style",{backgroundImage:"url(https://oss-kaleidoscope.oss-cn-hangzhou.aliyuncs.com/common/no_pic.gif)"}),r()(t,"deviceData",[{id:"12987122",name:"Tom",amount1:"234",amount2:"3.2",amount3:10},{id:"12987123",name:"Tom",amount1:"165",amount2:"4.43",amount3:12},{id:"12987124",name:"Tom",amount1:"324",amount2:"1.9",amount3:9},{id:"12987125",name:"Tom",amount1:"621",amount2:"2.2",amount3:17},{id:"12987126",name:"Tom",amount1:"539",amount2:"4.1",amount3:15}]),r()(t,"deviceOnline",[{id:"",name:"全部"},{id:"1",name:"在线"},{id:"2",name:"离线"}]),r()(t,"cadFlag",!1),r()(t,"sicOptions",[{value:1,label:"是"},{value:0,label:"否"}]),r()(t,"deviceOptions",[]),r()(t,"deviceOptions1",[]),r()(t,"sicFlag",!0),r()(t,"serialFlag",!0),r()(t,"overDueTime",null),r()(t,"pickerOptions",{disabledDate:function(e){return e.getTime()<Date.now()}}),r()(t,"dataAnalysisOPtions",[]),r()(t,"resolutionTypeOPtions",[{name:"十进制",value:"1"},{name:"十六进制",value:"2"}]),r()(t,"deviceAdditionalFlag",!1),r()(t,"deviceAdditionalData",[]),r()(t,"deviceAdditionalForm",{customSys:"",signalName:"",port:"",num:"",rangeMin:"",rangeMax:"",unit:""}),r()(t,"rulesdeviceAdditional",{customSys:[{required:!0,message:"请输入系统名称",trigger:"blur"}],signalName:[{required:!0,message:"请输入信号名称",trigger:"blur"}],port:[{required:!0,message:"请输入端口号",trigger:"blur"}],num:[{required:!0,message:"请输入子号",trigger:"blur"}],rangeMin:[{required:!0,message:"请输入参考值最小值",trigger:"blur"}],rangeMax:[{required:!0,message:"请输入参考值最大值",trigger:"blur"}],unit:[{required:!0,message:"请输入单位",trigger:"blur"}]}),r()(t,"Insert_Update_Additional",!1),r()(t,"customResolutionOPtions",[{name:"0",value:"0"},{name:"1",value:"1"},{name:"2",value:"2"},{name:"3",value:"3"},{name:"4",value:"4"},{name:"5",value:"5"},{name:"6",value:"6"},{name:"7",value:"7"}]),t},methods:{getDataAnalysis:function(){var e=this;this.axios({url:"/api/admin/device/node/resolution/list",method:"post",data:{}}).then(function(t){e.dataAnalysisOPtions=t.data.data})},showOverdueDevice:function(){this.overDueTime=new Date,this.getData()},renderContent:function(e,t){var a=t.node;return e("span",[e("i",{class:t.data.icon})," ",e("span",[a.label])])},handleNodeClick:function(e){this.companyId=e.id,this.unitId=e.id,this.rows=10,this.currentPage=1,this.overDueTime=null,this.istallmsgFun(),0==e.type?this.addFlag=!0:this.addFlag=!1,this.getData()},opendialogDeviceManagement:function(){var e=this;this.axios({url:"/api/admin/device/lib/list",method:"post",dataType:"json",data:{pageNum:1,pageSize:1e3,intelligentFireSystemId:this.radio}}).then(function(t){0==t.data.code&&(e.tableEquipmentData=t.data.list,document.querySelector(".dialog_system div").style.width="50%",e.choosed="two")})},closeequipmentgrounpdialog:function(){this.dialogVisible=!1,this.handleReset()},getSicList:function(){var e=this;this.axios({url:"/api/admin/device/unit/camera/list",method:"post",data:{id:this.companyId}}).then(function(t){e.deviceOptions=t.data.data}),this.axios({url:"/api/admin/device/unit/camera/back/list",method:"post",data:{id:this.companyId}}).then(function(t){e.deviceOptions1=t.data.data})},BuildList:function(){this.options=[{id:0,name:"室外"}];var e=this;this.axios({url:"/api/admin/building/unit",method:"post",dataType:"json",data:{pageNum:1,pageSize:100,unitId:this.companyId}}).then(function(t){if(0==t.data.code&&t.data.list.length)for(var a=0;a<t.data.list.length;a++)e.options.push(t.data.list[a])})},ImportEquipment:function(e,t){var a=this,i=this;this.BuildList(),this.axios({url:"/api/admin/device/lib/single",method:"post",dataType:"json",data:{id:e}}).then(function(l){0==l.data.code&&(i.EquipmentDetail=l.data.data,i.ruleForm.deviceLibId=e,i.radio=l.data.data.intelligentFireSystemId,i.Communication(),1==t?(a.installchange=!1,a.flag=!0):0==t?(a.flag=!1,a.installchange=!1):2==t&&(a.installchange=!0,a.flag=!1,a.ruleForm.installationDate=new Date,a.ruleForm.openDate=new Date),i.dialogVisible=!0,setTimeout(function(){i.changeSystem=!1},1e3),1==l.data.data.cameraType?(a.sicFlag=!0,a.getSicList()):2==l.data.data.cameraType&&(a.sicFlag=!1,a.getSicList()),1==l.data.data.intelligentFireSystemId&&a.getDataAnalysis())})},Communication:function(){var e=this;this.axios({url:"/api/admin/device/dict",method:"post",dataType:"json",data:{id:6}}).then(function(t){0==t.data.code&&(e.CommunicationList=t.data.data)})},openchangeSystem:function(){this.choosed="one",this.radio="1",document.querySelector(".dialog_system div").style.width="35%",this.changeSystem=!0,this.serialFlag=!1},closeSystemdialog:function(){this.changeSystem=!1},deviceType:function(e){var t=this;this.axios({url:"/api/admin/device/system?id="+e,method:"post"}).then(function(e){t.deviceTypeList=e.data.data})},Select:function(){var e=this;this.axios({url:"/api/admin/device/dict",method:"post",data:{id:4}}).then(function(t){0==t.data.code?(e.intelligentFireList=t.data.data,e.deviceType("")):e.$alert(t.data.msg,"提示",{confirmButtonText:"OK"})})},currentSel:function(e){this.devicestype="",this.deviceType(e)},resetSearch:function(){this.system="",this.devicestype="",this.onLine="",this.deviceName="",this.overDueTime=null,this.getData()},searchsubmit:function(){var e=this;this.currentPage=1,this.$refs.paginationChild.changePageNum(this.currentPage),this.axios({url:"/api/admin/device/list",method:"post",data:{pageNum:this.currentPage,pageSize:this.rows,unitId:this.companyId,systemId:this.system,deviceType:this.devicestype,online:this.onLine,deviceName:this.deviceName,now:this.overDueTime}}).then(function(t){0==t.data.code&&(e.tableData=t.data.list,e.total=t.data.total,e.currentPage=t.data.pageNum,e.overDueTime=null,e.tableData.map(function(e){1==e.online?e.online="在线":2==e.online?e.online="离线":e.online="故障"}))})},pageChange:function(e){this.currentPage=e.page_index,this.rows=e.page_limit,this.getData()},resetPortForm:function(){this.portForm.portNumber="",this.portForm.portSignalName=""},closePortdialog:function(){this.openPortdialog=!1,this.ruleForm.portNumber=this.portNumberList.join(),this.ruleForm.portSignalName=this.portSignalNameList.join()},SubmintPortdialog:function(e){var t=this,a=this;this.$refs[e].validate(function(e){e&&(t.PortData.push({portNumber:a.portForm.portNumber,portSignalName:a.portForm.portSignalName}),t.portNumberList.push(a.portForm.portNumber),t.portSignalNameList.push(a.portForm.portSignalName),a.portForm.portNumber="",a.portForm.portSignalName="")})},deletePort:function(e){this.portNumberList.splice(e.$index,1),this.portSignalNameList.splice(e.$index,1),this.PortData.splice(e.$index,1)},closePartsdialog:function(){this.changeParts=!1},closeRelationdialog:function(){if(this.changeRelation=!1,this.Floor="",this.style.backgroundImage="url(https://oss-kaleidoscope.oss-cn-hangzhou.aliyuncs.com/common/no_pic.gif)",document.querySelector("#container>div"))for(var e=document.querySelectorAll("#container>div"),t=0;t<e.length;t++)document.getElementById("container").removeChild(e[t])},handleRelation:function(e,t,a,i){this.deviceId=e,this.partId=a;var l=e;i&&(l=this.partDeviceId);var o=this,r="";this.axios({url:"/api/admin/device/single",method:"post",dataType:"json",data:{id:l}}).then(function(e){0==e.data.code&&(r=e.data.data.buildingId,o.axios({url:"/api/admin/building/list.picture",method:"post",dataType:"json",data:{id:r}}).then(function(e){0==e.data.code&&(o.BuildingFloor=e.data.data,t&&o.SelectFloorChange(t),o.changeRelation=!0)}))})},createDIv:function(e,t,a,i){var l=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div");a&&(l.id=a,o.className="dot"),i&&(l.id=i,o.className="dot partdot"),a!=this.deviceId||i||(o.className="dot dotnow"),i==this.partId&&i&&(o.className="dot dotnow partdot"),r.className="pulse",o.style.left=e+"px",o.style.top=t+"px",r.style.left=parseInt(e)+7-8-3+"px",r.style.top=parseInt(t)+7-8-3+"px",l.appendChild(o),l.appendChild(r),document.getElementById("container").appendChild(l)},SelectFloorChange:function(e){var t=this;if(document.querySelector("#container>div"))for(var a=document.querySelectorAll("#container>div"),i=0;i<a.length;i++)document.getElementById("container").removeChild(a[i]);e&&(this.Floor=e);var l=this;this.axios({url:"/api/admin/cad/position.list",method:"post",dataType:"json",data:{pictureId:this.Floor}}).then(function(e){if(0==e.data.code)for(var t=0;t<e.data.data.length;t++)l.createDIv(e.data.data[t].x,e.data.data[t].y,e.data.data[t].deviceId,e.data.data[t].partId)}),this.axios({url:"/api/admin/building/position",method:"post",dataType:"json",data:{id:this.Floor}}).then(function(e){0==e.data.code&&(l.FloorImage=e.data.data.img,"https://oss-kaleidoscope.oss-cn-hangzhou.aliyuncs.com/common/no_pic.gif"==l.FloorImage?(t.cadFlag=!0,l.$message({message:"该层没有上传平面图，请先给建筑添加平面图",type:"warning",callback:function(){l.style.backgroundImage="url("+l.FloorImage+")",s("container",l.positionList,l.deviceId,1)}})):(l.style.backgroundImage="url("+l.FloorImage+") ",s("container",l.positionList,l.deviceId,0,l.partId),t.cadFlag=!1))})},editDeviceData:function(e,t){this.serialFlag=!0;var a=this;this.axios({url:"/api/admin/device/single",method:"post",dataType:"json",data:{id:e}}).then(function(e){0==e.data.code&&(a.ruleForm=e.data.data,a.ruleForm.id=e.data.data.deviceId,a.ruleForm.nodeResolution=a.ruleForm.nodeResolution&&1*a.ruleForm.nodeResolution,a.ruleForm.customResolutionType=String(e.data.data.customResolutionType),a.ImportEquipment(e.data.data.deviceLibId,t))})},DeviceDataDetail:function(e){this.editDeviceData(e,1)},submitCad:function(e){for(var t=this,a=0;a<this.positionList.length;a++)this.positionList[a].pictureId=e;this.axios({url:"/api/admin/cad/position.update",method:"post",dataType:"json",data:this.positionList[this.positionList.length-1]}).then(function(e){0==e.data.code?t.$alert("添加成功","提示",{confirmButtonText:"OK",callback:function(){t.closeRelationdialog(),t.searchsubmit()}}):t.$alert(e.data.msg,"提示",{confirmButtonText:"OK"})})},resetCad:function(e){var t=[{}],a=this;t[0].pictureId=e,t[0].deviceId=this.deviceId,this.axios({url:"/api/admin/cad/position.update",method:"post",dataType:"json",data:t[0]}).then(function(e){0==e.data.code?a.$alert("删除成功","提示",{confirmButtonText:"OK",callback:function(){a.closeRelationdialog(),a.partList(),a.searchsubmit()}}):a.$alert(e.data.msg,"提示",{confirmButtonText:"OK"})})},changePartsOpen:function(e){this.partDeviceId=e,this.partList()},partList:function(){var e=this;this.axios({url:"/api/admin/device/part.list",method:"post",dataType:"json",data:{deviceId:this.partDeviceId,pageNum:this.pagePartNum,pageSize:this.pagePartSize}}).then(function(t){0==t.data.code&&(e.PartData=t.data.list,e.partTotal=t.data.total,e.changeParts=!0)})},openInsertPart:function(){this.Insert_Update_Parts=!0,this.resetPartForm()},closeInsert_Updatedialog:function(){this.Insert_Update_Parts=!1,delete this.partForm.id,l()(this.$data.partForm,this.$options.data().partForm)},PartSizeChange:function(e){this.pagePartSize=e,this.partList()},PartCurrentChange:function(e){this.pagePartNum=e,this.partList()},SubmitPart:function(e){var t=this,a=this;this.partForm.deviceId=this.partDeviceId,this.$refs[e].validate(function(e){if(e){var i="/api/admin/device/part.add",l="添加成功";t.partForm.id&&(i="/api/admin/device/part.update",l="修改成功"),t.axios({url:i,method:"post",dataType:"json",data:t.partForm}).then(function(e){0==e.data.code?a.$alert(l,"提示",{confirmButtonText:"OK",callback:function(){a.closeInsert_Updatedialog(),a.partList()}}):t.$message.error(e.data.msg)})}})},resetPartForm:function(){this.partForm.partName="",this.partForm.partNum="",this.partForm.partAddress=""},partDelete:function(e){var t=this,a=this;this.$confirm("你确定要删除吗").then(function(){t.axios({url:"/api/admin/device/part.delete",method:"post",dataType:"json",data:{id:e}}).then(function(e){0==e.data.code&&a.$alert("删除成功","提示",{confirmButtonText:"OK",callback:function(){t.partList()}})})})},editPartData:function(e){var t=this;this.axios({url:"/api/admin/device/part.list",method:"post",dataType:"json",data:{id:e,pageNum:1,pageSize:10}}).then(function(e){0==e.data.code&&(t.partForm=e.data.list[0],t.Insert_Update_Parts=!0)})},handleExceed:function(e,t){this.$alert("当前限制选择 1 个文件，请重新上传","提示",{confirmButtonText:"OK"})},beforeUpload:function(e){return"application/vnd.ms-excel"===e.type||(this.$alert("添加文件类型不对，请重新选择excel格式","提示",{confirmButtonText:"OK"}),!1)},exportPart:function(){window.location.href="https://oss-kaleidoscope.oss-cn-hangzhou.aliyuncs.com/duty/1587457164952-%E6%89%B9%E9%87%8F%E5%AF%BC%E5%85%A5%E9%83%A8%E4%BB%B6.xls"},uploadFile:function(e){var t=this,a=new FormData;a.append("file",e.file),a.append("deviceId",this.partDeviceId),this.axios({url:"/api/admin/device/part.excel",method:"post",dataType:"json",data:a}).then(function(e){0==e.data.code&&(t.$alert("上传成功","提示",{confirmButtonText:"OK",callback:function(){t.normal=[]}}),t.partList())})},istallmsgFun:function(){var e=this;this.axios({url:"/api/admin/device/install.select",method:"post",dataType:"json",data:{id:this.companyIds}}).then(function(t){0==t.data.code&&(e.installOptions=t.data.data)})},installValue:function(e){var t=this;if(0==e){this.axios({url:"/api/admin/device/install.search",method:"post",dataType:"json",data:{id:this.ruleForm.installMsg,pageNum:1,pageSize:100}}).then(function(e){if(0==e.data.code){var a=e.data.list[0];t.ruleForm.installerName=a.installerName,t.ruleForm.installerPhone=a.installerPhone,t.ruleForm.installationCompany=a.unitName,t.ruleForm.debugger=a.debuggerName,t.ruleForm.debuggerPhone=a.debuggerPhone}})}},openDeviceAdditionalBox:function(e){this.deviceAdditionalFlag=!0,this.deviceId=e,this.deviceAdditionalList(e)},closedeviceAdditionaldialog:function(){this.deviceAdditionalFlag=!1},editdeviceAdditionalData:function(e){var t=this;this.axios({url:"/api/admin/rtu/info/single",method:"post",dataType:"json",data:{id:e}}).then(function(e){0==e.data.code&&(t.deviceAdditionalForm=e.data.data,t.Insert_Update_Additional=!0)})},deviceAdditionalDelete:function(e){var t=this,a=this;this.$confirm("你确定要删除吗").then(function(){t.axios({url:"/api/admin/rtu/info/delete",method:"post",dataType:"json",data:{id:e}}).then(function(e){0==e.data.code&&a.$alert("删除成功","提示",{confirmButtonText:"OK",callback:function(){t.deviceAdditionalList()}})})})},deviceAdditionalList:function(){var e=this;this.axios({url:"/api/admin/rtu/info/list",method:"post",dataType:"json",data:{id:this.deviceId}}).then(function(t){0==t.data.code&&(e.deviceAdditionalData=t.data.data)})},closeInsert_UpdateAdditionaldialog:function(){this.Insert_Update_Additional=!1,delete this.deviceAdditionalForm.id,l()(this.$data.deviceAdditionalForm,this.$options.data().deviceAdditionalForm)},deviceAdditional:function(){this.Insert_Update_Additional=!0},SubmitAdditionalForm:function(e){var t=this,a=this;this.deviceAdditionalForm.deviceId=this.deviceId,this.$refs[e].validate(function(e){if(e){var i="/api/admin/rtu/info/add",l="添加成功";t.deviceAdditionalForm.id&&(i="/api/admin/rtu/info/update",l="修改成功"),t.axios({url:i,method:"post",dataType:"json",data:t.deviceAdditionalForm}).then(function(e){0==e.data.code?a.$alert(l,"提示",{confirmButtonText:"OK",callback:function(){a.closeInsert_UpdateAdditionaldialog(),a.deviceAdditionalList()}}):t.$message.error(e.data.msg)})}})}},mounted:function(){this.Select(),-1!=this.companyId&&this.istallmsgFun()},created:function(){this.companyId=sessionStorage.getItem("unitId"),this.myHeader={Authorization:sessionStorage.getItem("Authorization")}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"allcontent",attrs:{id:"DeviceManagement"}},[3!=e.userType?a("el-col",{staticClass:"tree_box",attrs:{span:4}},[a("div",[a("el-input",{staticClass:"filter_text",attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",attrs:{data:e.Treedata,props:e.treedefaultProps,"render-content":e.renderContent,"highlight-current--":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1)]):e._e(),e._v(" "),a("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[a("div",{staticClass:"top",staticStyle:{"margin-left":"10px"}},[a("div",[e._v("\n                    设备名称:\n                    "),a("el-input",{model:{value:e.deviceName,callback:function(t){e.deviceName=t},expression:"deviceName"}}),e._v("\n                    隶属系统:"),a("el-select",{attrs:{placeholder:"--请选择--"},on:{change:e.currentSel},model:{value:e.system,callback:function(t){e.system=t},expression:"system"}},e._l(e.intelligentFireList,function(e){return a("el-option",{key:e.code,attrs:{label:e.description,value:e.code}})}),1),e._v("\n                    设备类型:"),a("el-select",{attrs:{placeholder:"--请选择--"},model:{value:e.devicestype,callback:function(t){e.devicestype=t},expression:"devicestype"}},e._l(e.deviceTypeList,function(e){return a("el-option",{key:e.code,attrs:{label:e.description,value:e.code}})}),1),e._v("\n                    在线状态:"),a("el-select",{attrs:{placeholder:"--请选择--"},model:{value:e.onLine,callback:function(t){e.onLine=t},expression:"onLine"}},e._l(e.deviceOnline,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-button",{attrs:{type:"danger",plain:""},on:{click:e.showOverdueDevice}},[e._v("过期设备")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.searchsubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.resetSearch}},[e._v("重置")]),e._v(" "),3==e.userType?[a("el-button",{attrs:{type:"primary"},on:{click:e.openchangeSystem}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 新增")])]:[a("el-button",{attrs:{type:"primary",disabled:e.addFlag},on:{click:e.openchangeSystem}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 新增")])]],2)]),e._v(" "),a("el-dialog",{staticClass:"dialog dialog_insert",attrs:{title:"添加修改数据设备信息",visible:e.dialogVisible,width:"74%","close-on-click-modal":!1,"before-close":e.closedialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm ruleForm_insert",attrs:{model:e.ruleForm,rules:e.rules,inline:!0,data:e.ruleForm,"label-width":"110px",disabled:1==e.flag}},[a("fieldset",[a("legend",[e._v("基本设备信息")]),e._v(" "),a("el-form-item",{attrs:{label:"设备名称"}},[a("el-input",{attrs:{disabled:""},model:{value:e.EquipmentDetail.deviceName,callback:function(t){e.$set(e.EquipmentDetail,"deviceName",t)},expression:"EquipmentDetail.deviceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备型号"}},[a("el-input",{attrs:{disabled:""},model:{value:e.EquipmentDetail.deviceModel,callback:function(t){e.$set(e.EquipmentDetail,"deviceModel",t)},expression:"EquipmentDetail.deviceModel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备隶属系统"}},[a("el-input",{attrs:{disabled:""},model:{value:e.EquipmentDetail.intelligentFireSystemDesc,callback:function(t){e.$set(e.EquipmentDetail,"intelligentFireSystemDesc",t)},expression:"EquipmentDetail.intelligentFireSystemDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备类型"}},[a("el-input",{attrs:{disabled:""},model:{value:e.EquipmentDetail.deviceTypeDesc,callback:function(t){e.$set(e.EquipmentDetail,"deviceTypeDesc",t)},expression:"EquipmentDetail.deviceTypeDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备生产商"}},[a("el-input",{attrs:{disabled:""},model:{value:e.EquipmentDetail.manufacturer,callback:function(t){e.$set(e.EquipmentDetail,"manufacturer",t)},expression:"EquipmentDetail.manufacturer"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"生厂商电话"}},[a("el-input",{attrs:{disabled:""},model:{value:e.EquipmentDetail.manufacturerTel,callback:function(t){e.$set(e.EquipmentDetail,"manufacturerTel",t)},expression:"EquipmentDetail.manufacturerTel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备供应商"}},[a("el-input",{attrs:{disabled:""},model:{value:e.EquipmentDetail.supplier,callback:function(t){e.$set(e.EquipmentDetail,"supplier",t)},expression:"EquipmentDetail.supplier"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商电话"}},[a("el-input",{attrs:{disabled:""},model:{value:e.EquipmentDetail.supplierTel,callback:function(t){e.$set(e.EquipmentDetail,"supplierTel",t)},expression:"EquipmentDetail.supplierTel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌"}},[a("el-input",{attrs:{disabled:""},model:{value:e.EquipmentDetail.brand,callback:function(t){e.$set(e.EquipmentDetail,"brand",t)},expression:"EquipmentDetail.brand"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备协议类型"}},[a("el-input",{attrs:{disabled:""},model:{value:e.EquipmentDetail.protocolIdDesc,callback:function(t){e.$set(e.EquipmentDetail,"protocolIdDesc",t)},expression:"EquipmentDetail.protocolIdDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备接入类型"}},[a("el-input",{attrs:{disabled:""},model:{value:e.EquipmentDetail.accessTypeDesc,callback:function(t){e.$set(e.EquipmentDetail,"accessTypeDesc",t)},expression:"EquipmentDetail.accessTypeDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备图片"}},[a("img",{staticClass:"avatar",staticStyle:{width:"180px"},attrs:{src:e.EquipmentDetail.deviceImgUrl}})]),e._v(" "),a("el-form-item",{attrs:{label:"设备别名",prop:"deviceAlias"}},[a("el-input",{model:{value:e.ruleForm.deviceAlias,callback:function(t){e.$set(e.ruleForm,"deviceAlias",t)},expression:"ruleForm.deviceAlias"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"产品序列号",prop:"deviceCode"}},[a("el-input",{attrs:{disabled:e.serialFlag},model:{value:e.ruleForm.deviceCode,callback:function(t){e.$set(e.ruleForm,"deviceCode",t)},expression:"ruleForm.deviceCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开通日期",prop:"openDate"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",placeholder:"请选择日期",type:"date"},model:{value:e.ruleForm.openDate,callback:function(t){e.$set(e.ruleForm,"openDate",t)},expression:"ruleForm.openDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"过期日期",prop:"expirationTime"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",placeholder:"请选择日期","picker-options":e.pickerOptions,type:"date"},model:{value:e.ruleForm.expirationTime,callback:function(t){e.$set(e.ruleForm,"expirationTime",t)},expression:"ruleForm.expirationTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"通讯方式",prop:"communicationMethod"}},[a("el-select",{attrs:{placeholder:"--请选择--"},model:{value:e.ruleForm.communicationMethod,callback:function(t){e.$set(e.ruleForm,"communicationMethod",t)},expression:"ruleForm.communicationMethod"}},e._l(e.CommunicationList,function(e){return a("el-option",{key:e.code,attrs:{label:e.description,value:e.code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"通讯方式信息",prop:"communicationInformation"}},[a("el-input",{model:{value:e.ruleForm.communicationInformation,callback:function(t){e.$set(e.ruleForm,"communicationInformation",t)},expression:"ruleForm.communicationInformation"}})],1)],1),e._v(" "),a("fieldset",[a("legend",[e._v("安装设备信息")]),e._v(" "),a("el-form-item",{attrs:{label:"选择建筑",prop:"buildingId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.buildingId,callback:function(t){e.$set(e.ruleForm,"buildingId",t)},expression:"ruleForm.buildingId"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),1==e.installchange?[a("el-form-item",{attrs:{label:"选择安装模板",prop:"installMsg"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{"visible-change":e.installValue},model:{value:e.ruleForm.installMsg,callback:function(t){e.$set(e.ruleForm,"installMsg",t)},expression:"ruleForm.installMsg"}},e._l(e.installOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1)]:e._e(),e._v(" "),0==e.installchange?[a("el-form-item",{attrs:{label:"安装公司",prop:"installationCompany"}},[a("el-input",{model:{value:e.ruleForm.installationCompany,callback:function(t){e.$set(e.ruleForm,"installationCompany",t)},expression:"ruleForm.installationCompany"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"安装人姓名",prop:"installerName"}},[a("el-input",{model:{value:e.ruleForm.installerName,callback:function(t){e.$set(e.ruleForm,"installerName",t)},expression:"ruleForm.installerName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"安装人电话",prop:"installerPhone"}},[a("el-input",{model:{value:e.ruleForm.installerPhone,callback:function(t){e.$set(e.ruleForm,"installerPhone",t)},expression:"ruleForm.installerPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"调试人员",prop:"debugger"}},[a("el-input",{model:{value:e.ruleForm.debugger,callback:function(t){e.$set(e.ruleForm,"debugger",t)},expression:"ruleForm.debugger"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"调试人员电话",prop:"debuggerPhone"}},[a("el-input",{model:{value:e.ruleForm.debuggerPhone,callback:function(t){e.$set(e.ruleForm,"debuggerPhone",t)},expression:"ruleForm.debuggerPhone"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"安装日期",prop:"installationDate"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",placeholder:"请选择日期",type:"date"},model:{value:e.ruleForm.installationDate,callback:function(t){e.$set(e.ruleForm,"installationDate",t)},expression:"ruleForm.installationDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"安装位置",prop:"description"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1)],2),e._v(" "),a("fieldset",[a("legend",[e._v("扩展设备信息")]),e._v(" "),1==e.radio?a("div",[a("el-form-item",{attrs:{label:"设备子号",prop:"deviceSubNum"}},[a("el-input",{model:{value:e.ruleForm.deviceSubNum,callback:function(t){e.$set(e.ruleForm,"deviceSubNum",t)},expression:"ruleForm.deviceSubNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备点位管理",prop:"devicePointManagement"}},[a("el-input",{model:{value:e.ruleForm.devicePointManagement,callback:function(t){e.$set(e.ruleForm,"devicePointManagement",t)},expression:"ruleForm.devicePointManagement"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"接口类型",prop:"interfaceType"}},[a("el-input",{model:{value:e.ruleForm.interfaceType,callback:function(t){e.$set(e.ruleForm,"interfaceType",t)},expression:"ruleForm.interfaceType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据项解析",prop:"dataItemAnalysis"}},[a("el-input",{model:{value:e.ruleForm.dataItemAnalysis,callback:function(t){e.$set(e.ruleForm,"dataItemAnalysis",t)},expression:"ruleForm.dataItemAnalysis"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部位解析方式",prop:"nodeResolution"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.nodeResolution,callback:function(t){e.$set(e.ruleForm,"nodeResolution",t)},expression:"ruleForm.nodeResolution"}},e._l(e.dataAnalysisOPtions,function(e){return a("el-option",{key:e.code,attrs:{label:e.description,value:e.code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"解析方式"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.customResolution.resolutionType,callback:function(t){e.$set(e.ruleForm.customResolution,"resolutionType",t)},expression:"ruleForm.customResolution.resolutionType"}},e._l(e.resolutionTypeOPtions,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"启用部位号"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.customResolutionType,callback:function(t){e.$set(e.ruleForm,"customResolutionType",t)},expression:"ruleForm.customResolutionType"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:e.ruleForm.customResolutionType,callback:function(t){e.$set(e.ruleForm,"customResolutionType",t)},expression:"ruleForm.customResolutionType"}},[e._v("否")])],1),e._v(" "),a("el-form-item",{attrs:{label:"主机"}},[a("el-select",{attrs:{placeholder:"开始索引小于结束索引"},model:{value:e.ruleForm.customResolution.resolutionRule.host.start,callback:function(t){e.$set(e.ruleForm.customResolution.resolutionRule.host,"start",t)},expression:"ruleForm.customResolution.resolutionRule.host.start"}},e._l(e.customResolutionOPtions,function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})}),1),e._v(" - \n                                    "),a("el-select",{attrs:{placeholder:"结束索引要大于开始索引"},model:{value:e.ruleForm.customResolution.resolutionRule.host.end,callback:function(t){e.$set(e.ruleForm.customResolution.resolutionRule.host,"end",t)},expression:"ruleForm.customResolution.resolutionRule.host.end"}},e._l(e.customResolutionOPtions,function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"回路(大于主机)"}},[a("el-select",{attrs:{placeholder:"开始索引小于结束索引"},model:{value:e.ruleForm.customResolution.resolutionRule.loop.start,callback:function(t){e.$set(e.ruleForm.customResolution.resolutionRule.loop,"start",t)},expression:"ruleForm.customResolution.resolutionRule.loop.start"}},e._l(e.customResolutionOPtions,function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})}),1),e._v(" - \n                                    "),a("el-select",{attrs:{placeholder:"结束索引要大于开始索引"},model:{value:e.ruleForm.customResolution.resolutionRule.loop.end,callback:function(t){e.$set(e.ruleForm.customResolution.resolutionRule.loop,"end",t)},expression:"ruleForm.customResolution.resolutionRule.loop.end"}},e._l(e.customResolutionOPtions,function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"nodeWidth",attrs:{label:"节点(大于回路主机)"}},[a("el-select",{attrs:{placeholder:"开始索引小于结束索引"},model:{value:e.ruleForm.customResolution.resolutionRule.node.start,callback:function(t){e.$set(e.ruleForm.customResolution.resolutionRule.node,"start",t)},expression:"ruleForm.customResolution.resolutionRule.node.start"}},e._l(e.customResolutionOPtions,function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})}),1),e._v(" - \n                                    "),a("el-select",{attrs:{placeholder:"结束索引要大于开始索引"},model:{value:e.ruleForm.customResolution.resolutionRule.node.end,callback:function(t){e.$set(e.ruleForm.customResolution.resolutionRule.node,"end",t)},expression:"ruleForm.customResolution.resolutionRule.node.end"}},e._l(e.customResolutionOPtions,function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})}),1)],1)],1):e._e(),e._v(" "),2==e.radio?a("div",[a("el-form-item",{attrs:{label:"端口号"}},[a("el-input",{on:{focus:function(t){e.openPortdialog=!0}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"正常名",prop:"normalName"}},[a("el-input",{model:{value:e.ruleForm.normalName,callback:function(t){e.$set(e.ruleForm,"normalName",t)},expression:"ruleForm.normalName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"异常名",prop:"exceptionName"}},[a("el-input",{model:{value:e.ruleForm.exceptionName,callback:function(t){e.$set(e.ruleForm,"exceptionName",t)},expression:"ruleForm.exceptionName"}})],1)],1):e._e(),e._v(" "),3==e.radio?a("div",[a("el-form-item",{attrs:{label:"端口号",prop:"portNumber"}},[a("el-input",{attrs:{placeholder:"请选择端口号"},on:{focus:function(t){e.openPortdialog=!0}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模拟系数",prop:"analogCoefficient"}},[a("el-input",{model:{value:e.ruleForm.analogCoefficient,callback:function(t){e.$set(e.ruleForm,"analogCoefficient",t)},expression:"ruleForm.analogCoefficient"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上限",prop:"upperLimit"}},[a("el-input",{model:{value:e.ruleForm.upperLimit,callback:function(t){e.$set(e.ruleForm,"upperLimit",t)},expression:"ruleForm.upperLimit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"下限",prop:"lowerLimit"}},[a("el-input",{model:{value:e.ruleForm.lowerLimit,callback:function(t){e.$set(e.ruleForm,"lowerLimit",t)},expression:"ruleForm.lowerLimit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"正常名",prop:"normalName"}},[a("el-input",{model:{value:e.ruleForm.normalName,callback:function(t){e.$set(e.ruleForm,"normalName",t)},expression:"ruleForm.normalName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"异常名",prop:"exceptionName"}},[a("el-input",{model:{value:e.ruleForm.exceptionName,callback:function(t){e.$set(e.ruleForm,"exceptionName",t)},expression:"ruleForm.exceptionName"}})],1)],1):e._e(),e._v(" "),8==e.radio?a("div",[a("el-form-item",{attrs:{label:"mac地址"}},[a("el-input",{model:{value:e.ruleForm.cameraMacAddress,callback:function(t){e.$set(e.ruleForm,"cameraMacAddress",t)},expression:"ruleForm.cameraMacAddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"ip地址"}},[a("el-input",{model:{value:e.ruleForm.cameraAddress,callback:function(t){e.$set(e.ruleForm,"cameraAddress",t)},expression:"ruleForm.cameraAddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账号"}},[a("el-input",{model:{value:e.ruleForm.cameraAccount,callback:function(t){e.$set(e.ruleForm,"cameraAccount",t)},expression:"ruleForm.cameraAccount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{"show-password":""},model:{value:e.ruleForm.cameraPassword,callback:function(t){e.$set(e.ruleForm,"cameraPassword",t)},expression:"ruleForm.cameraPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备验证码"}},[a("el-input",{model:{value:e.ruleForm.verificationCode,callback:function(t){e.$set(e.ruleForm,"verificationCode",t)},expression:"ruleForm.verificationCode"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.sicFlag,expression:"sicFlag"}],attrs:{label:"是否支持云台"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.cameraPlatform,callback:function(t){e.$set(e.ruleForm,"cameraPlatform",t)},expression:"ruleForm.cameraPlatform"}},e._l(e.sicOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.sicFlag,expression:"sicFlag"}],attrs:{label:"是否支持SD卡"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.cameraIsExistsSd,callback:function(t){e.$set(e.ruleForm,"cameraIsExistsSd",t)},expression:"ruleForm.cameraIsExistsSd"}},e._l(e.sicOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.sicFlag,expression:"sicFlag"}],attrs:{label:"是否支持云存储"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.cameraIsCloud,callback:function(t){e.$set(e.ruleForm,"cameraIsCloud",t)},expression:"ruleForm.cameraIsCloud"}},e._l(e.sicOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.sicFlag,expression:"!sicFlag"}],attrs:{label:"关联摄像头"}},[a("el-select",{staticClass:"sic_width",attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.ruleForm.cameraIds,callback:function(t){e.$set(e.ruleForm,"cameraIds",t)},expression:"ruleForm.cameraIds"}},e._l(e.deviceOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.sicFlag,expression:"sicFlag"}],attrs:{label:"关联录像机"}},[a("el-select",{staticClass:"sic_width",attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.ruleForm.cameraBackIds,callback:function(t){e.$set(e.ruleForm,"cameraBackIds",t)},expression:"ruleForm.cameraBackIds"}},e._l(e.deviceOptions1,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.sicFlag,expression:"sicFlag"}],attrs:{label:"设备地址"}},[a("el-input",{attrs:{disabled:!0,"label-width":"150px"},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}}),e._v(" "),a("el-button",{on:{click:e.openmap}},[e._v("点击地图")])],1)],1):e._e()]),e._v(" "),a("el-form-item",{staticClass:"formfooter"},[a("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("ruleForm")}}},[e._v("立即提交")]),e._v(" "),a("el-button",{on:{click:e.closeequipmentgrounpdialog}},[e._v("取 消")])],1)],1)],1),e._v(" "),a("el-dialog",{staticClass:"dialog_system",attrs:{title:"选择系统类别",visible:e.changeSystem,width:"35%","close-on-click-modal":!1,"before-close":e.closeSystemdialog},on:{"update:visible":function(t){e.changeSystem=t}}},["one"==e.choosed?a("div",[a("el-radio",{attrs:{label:"1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("远程监控系统")]),e._v(" "),a("el-radio",{attrs:{label:"3"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("智慧用电系统")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("智慧用水系统")]),e._v(" "),a("el-radio",{attrs:{label:"4"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("智能预警系统")]),e._v(" "),a("el-radio",{attrs:{label:"5"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("燃气监测系统")]),e._v(" "),a("el-radio",{attrs:{label:"6"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("智能电桩系统")]),e._v(" "),a("el-radio",{attrs:{label:"7"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("智能疏散系统")]),e._v(" "),a("el-radio",{attrs:{label:"8"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("视频监控系统")]),e._v(" "),a("div",{staticClass:"formfooter",staticStyle:{"margin-top":"10px"}},[a("el-button",{on:{click:e.closeSystemdialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.opendialogDeviceManagement}},[e._v("下一步")])],1)],1):e._e(),e._v(" "),"two"==e.choosed?a("div",[e._v("\n                        请选择设备类型\n                        "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableEquipmentData,border:""},on:{"selection-change":e.SelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceName",label:"设备名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceModel",label:"设备型号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"intelligentFireSystemDesc",label:"设备隶属系统",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceTypeDesc",label:"设备类型",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.ImportEquipment(t.row.id,2)}}},[e._v("导入")])]}}],null,!1,3091977251)})],1)],1):e._e()]),e._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{title:"添加修改端口号端口名称",visible:e.openPortdialog,width:"35%","close-on-click-modal":!1,"before-close":e.closePortdialog},on:{"update:visible":function(t){e.openPortdialog=t}}},[a("fieldset",[a("legend",[e._v("添加端口号")]),e._v(" "),a("el-form",{ref:"portForm",staticClass:"demo-ruleForm",attrs:{model:e.portForm,rules:e.rulesPort,data:e.portForm,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"端口号",prop:"portNumber"}},[a("el-input",{model:{value:e.portForm.portNumber,callback:function(t){e.$set(e.portForm,"portNumber",t)},expression:"portForm.portNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"端口名称",prop:"portSignalName"}},[a("el-input",{model:{value:e.portForm.portSignalName,callback:function(t){e.$set(e.portForm,"portSignalName",t)},expression:"portForm.portSignalName"}})],1),e._v(" "),a("el-form-item",{staticClass:"formfooter"},[a("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:function(t){return e.SubmintPortdialog("portForm")}}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.resetPortForm}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.PortData,border:""}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"portNumber",label:"端口号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"portSignalName",label:"端口名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deletePort(t)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{title:"部件",visible:e.changeParts,width:"55%","close-on-click-modal":!1,"before-close":e.closePartsdialog},on:{"update:visible":function(t){e.changeParts=t}}},[a("div",{staticClass:"top"},[a("el-button",{attrs:{type:"primary"},on:{click:e.openInsertPart}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 新增")]),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"","before-upload":e.beforeUpload,limit:1,"file-list":e.normal,"http-request":e.uploadFile,"on-exceed":e.handleExceed}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("导入")])],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.exportPart}},[e._v("下载模板")])],1),e._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{title:"新增修改部件",visible:e.Insert_Update_Parts,width:"25%","append-to-body":!0,"before-close":e.closeInsert_Updatedialog},on:{"update:visible":function(t){e.Insert_Update_Parts=t}}},[a("el-form",{ref:"partForm",staticClass:"demo-ruleForm",attrs:{model:e.partForm,rules:e.rulesPart,data:e.partForm,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"部件号",prop:"partName"}},[a("el-input",{model:{value:e.partForm.partName,callback:function(t){e.$set(e.partForm,"partName",t)},expression:"partForm.partName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"编号",prop:"partNum"}},[a("el-input",{model:{value:e.partForm.partNum,callback:function(t){e.$set(e.partForm,"partNum",t)},expression:"partForm.partNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部件地址",prop:"partAddress"}},[a("el-input",{model:{value:e.partForm.partAddress,callback:function(t){e.$set(e.partForm,"partAddress",t)},expression:"partForm.partAddress"}})],1),e._v(" "),a("el-form-item",{staticClass:"formfooter"},[a("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:function(t){return e.SubmitPart("partForm")}}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.resetPartForm}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%",heigth:"60%"},attrs:{data:e.PartData,border:""}},[a("el-table-column",{attrs:{prop:"partName",label:"部件名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"partNum",label:"部件编号",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"partAddress",label:"部件地址",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.editPartData(t.row.id)}}},[e._v(" 编辑")]),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.partDelete(t.row.id)}}},[e._v(" 删除")]),e._v(" "),a("el-button",{staticClass:"el-icon-share",attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){return e.handleRelation(e.deviceId,t.row.deviceFloor,t.row.id,1)}}},[e._v("关联CAD图")])]}}])})],1),e._v(" "),a("div",{staticClass:"page_all",staticStyle:{position:"relative","margin-top":"30px"}},[a("el-pagination",{attrs:{"current-page":e.pagePartNum,"page-sizes":[10,20,50,100],"page-size":e.pagePartSize,layout:"total, sizes, prev, pager, next, jumper",total:e.partTotal},on:{"size-change":e.PartSizeChange,"current-change":e.PartCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{staticClass:"dialog_log",attrs:{title:"关联CAD",visible:e.changeRelation,width:"54%","close-on-click-modal":!1,"before-close":e.closeRelationdialog},on:{"update:visible":function(t){e.changeRelation=t}}},[a("div",{staticStyle:{"line-height":"43px"}},[e._v("\n                    建筑楼层:\n                    "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.SelectFloorChange},model:{value:e.Floor,callback:function(t){e.Floor=t},expression:"Floor"}},e._l(e.BuildingFloor,function(e){return a("el-option",{key:e.id,attrs:{label:e.floor,value:e.id}})}),1)],1),e._v(" "),a("div",[e._v("建筑平面图:")]),e._v(" "),a("div",{style:e.style,attrs:{id:"container"}}),e._v(" "),a("div",{staticStyle:{"margin-top":"5%","text-align":"right"}},[a("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{size:"mini",type:"primary",disabled:e.cadFlag},on:{click:function(t){return e.submitCad(e.Floor)}}},[e._v(" 确定")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.resetCad(e.Floor)}}},[e._v("重置")])],1)]),e._v(" "),a("div",{attrs:{id:"mapdiv"}},[a("el-dialog",{staticClass:"mapdialog",attrs:{title:"百度地图定位查询",visible:e.mapVisible,width:"95%","modal-append-to-body":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.mapVisible=t}}},[a("div",{staticClass:"amap-wrapper"},[a("el-amap-search-box",{staticClass:"search-box",attrs:{"search-option":e.searchOption,"on-search-result":e.onSearchResult}}),e._v(" "),a("el-button",{staticClass:"searchok",attrs:{type:"primary"},on:{click:e.getok}},[e._v("确定")]),e._v(" "),a("el-amap",{staticClass:"amap-demo bm_view",attrs:{vid:"amap-vue",plugin:e.plugins,events:e.events,zoom:e.zoom,center:e.center}},[e._l(e.markermap,function(e,t){return a("el-amap-marker",{key:e.index,attrs:{position:e.position,icon:e.icon,title:e.title,events:e.events,visible:e.visible,draggable:e.draggable,vid:t}})}),e._v(" "),a("el-amap-info-window",{attrs:{position:e.currentWindow.position,content:e.currentWindow.content,visible:e.currentWindow.visible,events:e.currentWindow.events}})],2)],1)])],1),e._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{title:"",visible:e.deviceAdditionalFlag,width:"55%","close-on-click-modal":!1,"before-close":e.closedeviceAdditionaldialog},on:{"update:visible":function(t){e.deviceAdditionalFlag=t}}},[a("div",{staticClass:"top"},[a("el-button",{attrs:{type:"primary"},on:{click:e.deviceAdditional}},[e._v("新增")])],1),e._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{title:"设备额外信息",visible:e.Insert_Update_Additional,width:"25%","append-to-body":!0,"before-close":e.closeInsert_UpdateAdditionaldialog},on:{"update:visible":function(t){e.Insert_Update_Additional=t}}},[a("el-form",{ref:"deviceAdditionalForm",staticClass:"demo-ruleForm",attrs:{model:e.deviceAdditionalForm,rules:e.rulesdeviceAdditional,data:e.deviceAdditionalForm,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"系统名称",prop:"customSys"}},[a("el-input",{model:{value:e.deviceAdditionalForm.customSys,callback:function(t){e.$set(e.deviceAdditionalForm,"customSys",t)},expression:"deviceAdditionalForm.customSys"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"信号名称",prop:"signalName"}},[a("el-input",{model:{value:e.deviceAdditionalForm.signalName,callback:function(t){e.$set(e.deviceAdditionalForm,"signalName",t)},expression:"deviceAdditionalForm.signalName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"端口",prop:"port"}},[a("el-input",{directives:[{name:"numberInput",rawName:"v-numberInput"}],attrs:{placeholder:"1-16"},model:{value:e.deviceAdditionalForm.port,callback:function(t){e.$set(e.deviceAdditionalForm,"port",t)},expression:"deviceAdditionalForm.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"子号",prop:"num"}},[a("el-input",{directives:[{name:"numberInput",rawName:"v-numberInput"}],model:{value:e.deviceAdditionalForm.num,callback:function(t){e.$set(e.deviceAdditionalForm,"num",t)},expression:"deviceAdditionalForm.num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"参考值最小值",prop:"rangeMin"}},[a("el-input",{model:{value:e.deviceAdditionalForm.rangeMin,callback:function(t){e.$set(e.deviceAdditionalForm,"rangeMin",t)},expression:"deviceAdditionalForm.rangeMin"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"参考值最大值",prop:"rangeMax"}},[a("el-input",{model:{value:e.deviceAdditionalForm.rangeMax,callback:function(t){e.$set(e.deviceAdditionalForm,"rangeMax",t)},expression:"deviceAdditionalForm.rangeMax"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位",prop:"unit"}},[a("el-input",{model:{value:e.deviceAdditionalForm.unit,callback:function(t){e.$set(e.deviceAdditionalForm,"unit",t)},expression:"deviceAdditionalForm.unit"}})],1),e._v(" "),a("el-form-item",{staticClass:"formfooter"},[a("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:function(t){return e.SubmitAdditionalForm("deviceAdditionalForm")}}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.closeInsert_UpdateAdditionaldialog}},[e._v("关闭")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%",heigth:"60%"},attrs:{data:e.deviceAdditionalData,border:""}},[a("el-table-column",{attrs:{prop:"customSys",label:"系统名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"signalName",label:"信号名称",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"num",label:"子号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"port",label:"端口号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"参考范围",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            "+e._s(t.row.rangeMin)+" - "+e._s(t.row.rangeMax)+"\n                        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"unit",label:"单位",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.editdeviceAdditionalData(t.row.id)}}},[e._v(" 编辑")]),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deviceAdditionalDelete(t.row.id)}}},[e._v(" 删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"bottom",staticStyle:{"padding-left":"5px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.SelectionChange}},[a("el-table-column",{attrs:{prop:"deviceAlias",label:"设备别名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"intelligentFireSystemDesc",label:"隶属系统",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceTypeDesc",label:"设备类型",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceModel",label:"设备型号",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceCode",label:"产品序列号",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"online",label:"在线状态",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.editDeviceData(t.row.deviceId,0)}}},[e._v(" 编辑")]),e._v(" "),54==t.row.deviceLibId?[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.openDeviceAdditionalBox(t.row.deviceId)}}},[e._v("设备值")])]:e._e(),e._v(" "),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.DeviceDataDetail(t.row.deviceId)}}},[e._v(" 查看详情")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row.deviceId)}}},[e._v(" 删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.changePartsOpen(t.row.deviceId)}}},[e._v(" 部件")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){return e.handleRelation(t.row.deviceId,t.row.deviceFloor)}}},[e._v("关联CAD图")])]}}])})],1),e._v(" "),a("div",{staticClass:"page_all"},[a("pagination",{ref:"paginationChild",attrs:{total:e.total},on:{pageChange:e.pageChange}})],1)],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,m,!1,function(e){a("wdtV"),a("xfGM")},"data-v-bb4725d8",null);t.default=p.exports},wdtV:function(e,t){},xfGM:function(e,t){}});