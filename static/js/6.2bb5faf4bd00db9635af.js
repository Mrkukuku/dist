webpackJsonp([6],{"+4vT":function(e,t,r){e.exports=r.p+"static/img/2.6cedc20.jpg"},"6KWl":function(e,t,r){e.exports=r.p+"static/img/1.89a424b.jpg"},TVhH:function(e,t){},qTwA:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=r("Dd8w"),o=r.n(l),i=(r("/IwO"),r("g5qz")),a=r("nQ03"),s=r("MCsY"),n={mixins:[a.a,i.a],components:{pagination:s.a},data:function(){var e=this;return{module:"building",userType:sessionStorage.getItem("userTypes"),buildingId:"",buildId:sessionStorage.getItem("unitId"),total:1,currentPage:1,rows:10,imgUrl:null,loading:!1,imgFile:"",buildFloorName:"",buildFloorOptions:[{floor:"第一层"}],storageFormOPtions:[{id:1,label:"固态"},{id:2,label:"液态"},{id:3,label:"气态"},{id:4,label:"混合"}],storageNatureOPtions:[{id:1,label:"甲"},{id:2,label:"乙"},{id:3,label:"丙"},{id:4,label:"丁"},{id:5,label:"戊"}],buildList:null,typeOptions:[],propertyOptions:[],fireRiskOptions:[],fireResistanceOptions:[],constructionOptions:[],fireFightingOPtions:[],exitsOPtions:[],fileList:[],exits:[],exitForm:"",exitSite:"",exitsMesseg:"请点击进行编辑",ruleForm:{unitId:"",id:"",name:"",address:"",longitude:"",latitude:"",type:"",application:"",fireHazardLevel:"",fireResistantLevel:"",structure:"",fireControlDeviceType:"",constructionTime:"",occupyArea:"",undergroundArea:"",undergroundFloorArea:"",underFloor:"",upperFloor:"",upperArea:"",height:"",standardFloorArea:"",floorArea:"",tunnelHeight:"",tunnelLength:"",fireControlRoomSite:"",refugeStoreyNum:"",refugeStoreyArea:"",refugeStoreySite:"",exitNum:"",fireElevatorNum:"",fireElevatorWeight:"",dailyWorkerNum:"",maxAccommodateNum:"",storageNum:"",storageNature:"",storageForm:"",storageCapacity:"",mainMaterials:"",mainProducts:"",unitName:"",exits:null},rules:{name:[{validator:function(t,r,l){""===r&&l(new Error("请输入建筑名称")),r&&e.axios({url:"/api/admin/building/check.name",method:"post",data:{name:r,unitId:e.buildId}}).then(function(t){1==t.data.code&&t.data.msg!=e.ruleForm.id?l(new Error("同家单位不可出现相同建筑名称")):l()})},required:!0,trigger:"blur"}],address:[{required:!0,message:"请输入建筑物地址",trigger:"blur"}],type:[{required:!1,message:"请输入建筑物类型",trigger:"blur"}],application:[{required:!1,message:"请输入建筑物使用性质",trigger:"blur"}],fireHazardLevel:[{required:!1,message:"请输入建筑物火灾危害等级",trigger:"blur"}],fireResistantLevel:[{required:!1,message:"请输入建筑物耐火等级",trigger:"blur"}],structure:[{required:!1,message:"请输入建筑物结构",trigger:"blur"}],fireControlDeviceType:[{required:!0,message:"请输入建筑消防设施类别",trigger:"blur"}],longitude:[{required:!0,message:"请输入建筑物经度",trigger:"blur"}],latitude:[{required:!0,message:"请输入建筑物维度",trigger:"blur"}],upperFloor:[{required:!0,message:"请输入地上层数",trigger:"blur"},{validator:function(t,r,l){if(""===r&&l(new Error("请输入层数")),r||0==r){var o=parseInt(r);e.ruleForm.upperFloor=o>=0?o:-1*o,l()}else l(new Error("请输入层数"))},required:!0,trigger:"change"}],underFloor:[{required:!0,message:"请输入地下层数",trigger:"blur"},{validator:function(t,r,l){if(""===r&&l(new Error("请输入层数")),r||0==r){var o=parseInt(r);e.ruleForm.underFloor=o>=0?o:-1*o,l()}else l(new Error("请输入层数"))},required:!0,trigger:"change"}],floorArea:[{required:!0,message:"请输入建筑面积",trigger:"blur"}],height:[{required:!0,message:"请输入建筑高度",trigger:"blur"}]},data:null,defaultProps:{children:"children",label:"label"},addFalg:!0,ArchitecturalVisible:!1,imgList:[{floor:"第一层",img:r("6KWl")},{floor:"第二层",img:r("+4vT")},{floor:"第三层",img:"https://oss-kaleidoscope.oss-cn-hangzhou.aliyuncs.com/common/no_pic.gif"}],Architect:{floor:""},Architectrules:{buildFloor:[{required:!0,message:"建筑物维度",trigger:"blur"}]},dialogFormVisible:!1,formLabelWidth:"120px",type:"",type1:""}},methods:{beforeUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),r="jpg"===t,l="png"===t,o=e.size/1024/1024<5;return r||l?o?(this.imgUrl=URL.createObjectURL(e.raw),void(this.imgFile=e.raw)):(this.$message({message:"上传文件大小不能超过 5MB!",type:"warning"}),this.$refs.upload.clearFiles(),void(this.files=null)):(this.$message({message:"上传文件只能是jpg,png格式!",type:"warning"}),this.$refs.upload.clearFiles(),void(this.imgFile=null))},uploads:function(){var e=this,t=this,r=new FormData;r.append("file",this.imgFile),r.append("fileType",3),this.loading=!0,this.axios({url:"/api/admin/file/upload",method:"post",data:r}).then(function(r){0==r.data.code?(t.imgUrl=r.data.data.fileUrl,e.loading=!1,e.$message({message:"上传成功",type:"success"})):(e.loading=!1,e.$message({message:r.data.msg,type:"error"}))})},cancelUpload:function(){this.imgUrl=null},renderContent:function(e,t){var r=t.node;return e("span",[e("i",{class:t.data.icon})," ",e("span",[r.label])])},handleNodeClick:function(e){this.buildId=e.id,this.ruleForm.unitId=e.id,this.rows=10,this.currentPage=1,0==e.type?this.addFalg=!0:this.addFalg=!1,this.getData()},openNode:function(e){e.icon="el-icon-folder-opened"},closeNode:function(e){e.icon="el-icon-folder"},openArchitectural:function(e){var t=this;this.ArchitecturalVisible=!0,this.buildingId=e,this.axios({url:"/api/admin/building/single.picture",method:"post",data:{id:e}}).then(function(e){0===e.data.code&&(t.imgList=e.data.data,t.buildFloorOptions=e.data.data)})},closeArchitectural:function(){this.ArchitecturalVisible=!1},photoSubmit:function(){var e=this;this.buildFloorName?(this.buildList={floor:this.buildFloorName,img:this.imgUrl&&this.imgUrl||"https://oss-kaleidoscope.oss-cn-hangzhou.aliyuncs.com/common/no_pic.gif",buildingId:this.buildingId},this.axios({url:"/api/admin/building/update.picture",method:"post",data:o()({},this.buildList)}).then(function(t){0===t.data.code?(e.photoReset(),e.openArchitectural(e.buildingId),e.$alert("添加成功","提示",{confirmButtonText:"OK"})):e.$alert(t.data.message,"提示",{confirmButtonText:"OK"})})):this.$alert("请选择建筑楼层","提示",{confirmButtonText:"OK"})},photoReset:function(){this.buildList=[],this.buildFloorName="",this.imgUrl=null},addExit:function(){""!==this.exitSite?(this.exits.push({exitSite:this.exitSite,exitForm:this.exitForm,exitFormName:this.exitsOPtions[0]&&this.exitsOPtions[this.exitForm-1].description}),this.exitSite="",this.exitForm="",this.ruleForm.exits=this.exits):alert("安全出口位置不能为空")},deleteExits:function(e){this.exits.splice(e.$index,1)},addBuild:function(){this.opendialog(),this.ruleForm.id=""},pageChange:function(e){this.currentPage=e.page_index,this.rows=e.page_limit,this.getData()},handleReset1:function(){this.type="",this.type1="",this.currentPage=1,this.$refs.paginations.changePageNum(1),this.getData()},seach:function(){this.currentPage=1,this.getData()}},created:function(){this.ruleForm.unitId=Number(sessionStorage.getItem("unitId")),this.buildId=Number(sessionStorage.getItem("unitId"))},mounted:function(){-1!=this.ruleForm.unitId&&this.getData()}},u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"allcontent",attrs:{id:"BuildingAreaManagement"}},[r("el-row",{staticStyle:{height:"100%"}},[3!=e.userType?r("el-col",{staticClass:"tree_box",attrs:{span:4}},[r("div",[r("el-input",{staticClass:"filter_text",attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),r("el-tree",{ref:"tree",attrs:{data:e.Treedata,props:e.defaultProps,"render-content":e.renderContent,"highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1)]):e._e(),e._v(" "),r("el-col",{staticStyle:{"padding-left":"10px",height:"100%"},attrs:{span:20}},[r("div",[r("div",[e._v("\n                   \n                      建构筑物类别 "),r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.typeOptions,function(e){return r("el-option",{key:e.code,attrs:{label:e.description,value:e.code}})}),1),e._v("\n                     结构类型 "),r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.type1,callback:function(t){e.type1=t},expression:"type1"}},e._l(e.constructionOptions,function(e){return r("el-option",{key:e.code,attrs:{label:e.description,value:e.code}})}),1),e._v(" "),3==e.userType?r("el-button",{style:{margin:" 0 auto"},attrs:{type:"primary"},on:{click:e.addBuild}},[r("i",{staticClass:"el-icon-plus"}),e._v(" 新增")]):r("el-button",{style:{margin:" 0 auto"},attrs:{type:"primary",disabled:e.addFalg},on:{click:e.addBuild}},[r("i",{staticClass:"el-icon-plus"}),e._v(" 新增")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.seach}},[e._v(" 查询")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.handleReset1}},[e._v("重置")])],1)]),e._v(" "),r("div",{staticClass:"bottom"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{prop:"unitName",label:"单位名称",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"name",label:"建构筑物名称",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"type",label:"建构筑物类别",width:"140"}}),e._v(" "),r("el-table-column",{attrs:{prop:"height",label:"建筑高度",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{prop:"fireResistantLevel",label:"耐火等级",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{prop:"structure",label:"建筑结构",width:"120"}}),e._v(" "),r("el-table-column",{attrs:{prop:"constructionTime",label:"建造日期",width:"120"}}),e._v(" "),r("el-table-column",{attrs:{prop:"upperFloor",label:"地上层数",width:"60"}}),e._v(" "),r("el-table-column",{attrs:{prop:"underFloor",label:"地下层数",width:"60"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.editData(t.row.id)}}},[e._v("编辑")]),e._v(" "),r("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.row.id)}}},[e._v("删除")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.openArchitectural(t.row.id)}}},[e._v("查看建筑图")])]}}])})],1),e._v(" "),r("div",{staticClass:"page_all"},[r("pagination",{ref:"paginations",attrs:{total:e.total},on:{pageChange:e.pageChange}})],1)],1),e._v(" "),r("el-dialog",{staticClass:"dialog",attrs:{title:"添加修改建筑信息",visible:e.dialogVisible,width:"50%","close-on-click-modal":!1,"before-close":e.closedialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,inline:!0,rules:e.rules,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"建构筑物名称",prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"建筑物地址",prop:"address","label-width":"150px"}},[r("el-input",{attrs:{disabled:!0,"label-width":"150px"},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}}),e._v(" "),r("el-button",{on:{click:e.openmap}},[e._v("点击地图")]),e._v(" "),r("div",{attrs:{id:"mapdiv"}},[r("el-dialog",{staticClass:"mapdialog",attrs:{title:"百度地图定位查询",visible:e.mapVisible,width:"95%","modal-append-to-body":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.mapVisible=t}}},[r("div",{staticClass:"amap-wrapper"},[r("el-amap-search-box",{staticClass:"search-box",attrs:{"search-option":e.searchOption,"on-search-result":e.onSearchResult}}),e._v(" "),r("el-button",{staticClass:"searchok",attrs:{type:"primary"},on:{click:e.getok}},[e._v("确定")]),e._v(" "),r("el-amap",{staticClass:"amap-demo bm_view",attrs:{vid:"amap-vue",plugin:e.plugins,events:e.events,zoom:e.zoom,center:e.center}},[e._l(e.markermap,function(e,t){return r("el-amap-marker",{key:e.index,attrs:{position:e.position,icon:e.icon,title:e.title,events:e.events,visible:e.visible,draggable:e.draggable,vid:t}})}),e._v(" "),r("el-amap-info-window",{attrs:{position:e.currentWindow.position,content:e.currentWindow.content,visible:e.currentWindow.visible,events:e.currentWindow.events}})],2)],1)])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"建构筑物类别",prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.typeOptions,function(e){return r("el-option",{key:e.code,attrs:{label:e.description,value:e.code}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"使用性质",prop:"application"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.application,callback:function(t){e.$set(e.ruleForm,"application",t)},expression:"ruleForm.application"}},e._l(e.propertyOptions,function(e){return r("el-option",{key:e.code,attrs:{label:e.description,value:e.code}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"火灾危险性",prop:"fireHazardLevel"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.fireHazardLevel,callback:function(t){e.$set(e.ruleForm,"fireHazardLevel",t)},expression:"ruleForm.fireHazardLevel"}},e._l(e.fireRiskOptions,function(e){return r("el-option",{key:e.code,attrs:{label:e.description,value:e.code}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"耐火等级",prop:"fireResistantLevel"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.fireResistantLevel,callback:function(t){e.$set(e.ruleForm,"fireResistantLevel",t)},expression:"ruleForm.fireResistantLevel"}},e._l(e.fireResistanceOptions,function(e){return r("el-option",{key:e.code,attrs:{label:e.description,value:e.code}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"结构类型",prop:"structure"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.structure,callback:function(t){e.$set(e.ruleForm,"structure",t)},expression:"ruleForm.structure"}},e._l(e.constructionOptions,function(e){return r("el-option",{key:e.code,attrs:{label:e.description,value:e.code}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"消防设备",prop:"fireControlDeviceType"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.fireControlDeviceType,callback:function(t){e.$set(e.ruleForm,"fireControlDeviceType",t)},expression:"ruleForm.fireControlDeviceType"}},e._l(e.fireFightingOPtions,function(e){return r("el-option",{key:e.code,attrs:{label:e.description,value:e.code}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"地上层数",prop:"upperFloor"}},[r("el-input",{attrs:{type:"number"},model:{value:e.ruleForm.upperFloor,callback:function(t){e.$set(e.ruleForm,"upperFloor",t)},expression:"ruleForm.upperFloor"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"地下层数",prop:"underFloor"}},[r("el-input",{attrs:{type:"number"},model:{value:e.ruleForm.underFloor,callback:function(t){e.$set(e.ruleForm,"underFloor",t)},expression:"ruleForm.underFloor"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"建筑高度",prop:"height"}},[r("el-input",{model:{value:e.ruleForm.height,callback:function(t){e.$set(e.ruleForm,"height",t)},expression:"ruleForm.height"}}),e._v(" m\n                        ")],1),e._v(" "),r("el-form-item",{attrs:{label:"建筑面积",prop:"floorArea"}},[r("el-input",{model:{value:e.ruleForm.floorArea,callback:function(t){e.$set(e.ruleForm,"floorArea",t)},expression:"ruleForm.floorArea"}}),e._v(" ㎡\n                        ")],1),e._v(" "),r("el-form-item",{attrs:{label:"建造日期",prop:"constructionTime"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.constructionTime,callback:function(t){e.$set(e.ruleForm,"constructionTime",t)},expression:"ruleForm.constructionTime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"占地面积",prop:"occupyArea"}},[r("el-input",{model:{value:e.ruleForm.occupyArea,callback:function(t){e.$set(e.ruleForm,"occupyArea",t)},expression:"ruleForm.occupyArea"}}),e._v(" ㎡\n                        ")],1),e._v(" "),r("el-form-item",{attrs:{label:"标准层面积",prop:"standardFloorArea"}},[r("el-input",{model:{value:e.ruleForm.standardFloorArea,callback:function(t){e.$set(e.ruleForm,"standardFloorArea",t)},expression:"ruleForm.standardFloorArea"}}),e._v(" ㎡\n                        ")],1),e._v(" "),r("el-form-item",{attrs:{label:"地上层面积",prop:"upperArea"}},[r("el-input",{model:{value:e.ruleForm.upperArea,callback:function(t){e.$set(e.ruleForm,"upperArea",t)},expression:"ruleForm.upperArea"}}),e._v(" ㎡\n                        ")],1),e._v(" "),r("el-form-item",{attrs:{label:"地下面积",prop:"undergroundArea"}},[r("el-input",{model:{value:e.ruleForm.undergroundArea,callback:function(t){e.$set(e.ruleForm,"undergroundArea",t)},expression:"ruleForm.undergroundArea"}}),e._v(" ㎡\n                        ")],1),e._v(" "),r("el-form-item",{attrs:{label:"地下层面积",prop:"undergroundFloorArea"}},[r("el-input",{model:{value:e.ruleForm.undergroundFloorArea,callback:function(t){e.$set(e.ruleForm,"undergroundFloorArea",t)},expression:"ruleForm.undergroundFloorArea"}}),e._v(" ㎡\n                        ")],1),e._v(" "),r("el-form-item",{attrs:{label:"隧道高度",prop:"tunnelHeight"}},[r("el-input",{model:{value:e.ruleForm.tunnelHeight,callback:function(t){e.$set(e.ruleForm,"tunnelHeight",t)},expression:"ruleForm.tunnelHeight"}}),e._v(" m\n                        ")],1),e._v(" "),r("el-form-item",{attrs:{label:"隧道长度",prop:"tunnelLength"}},[r("el-input",{model:{value:e.ruleForm.tunnelLength,callback:function(t){e.$set(e.ruleForm,"tunnelLength",t)},expression:"ruleForm.tunnelLength"}}),e._v(" m\n                        ")],1),e._v(" "),r("el-form-item",{attrs:{label:"消防控制室位置",prop:"fireControlRoomSite"}},[r("el-input",{model:{value:e.ruleForm.fireControlRoomSite,callback:function(t){e.$set(e.ruleForm,"fireControlRoomSite",t)},expression:"ruleForm.fireControlRoomSite"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"避难层数量",prop:"refugeStoreyNum"}},[r("el-input",{model:{value:e.ruleForm.refugeStoreyNum,callback:function(t){e.$set(e.ruleForm,"refugeStoreyNum",t)},expression:"ruleForm.refugeStoreyNum"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"避难层总面积",prop:"refugeStoreyArea"}},[r("el-input",{model:{value:e.ruleForm.refugeStoreyArea,callback:function(t){e.$set(e.ruleForm,"refugeStoreyArea",t)},expression:"ruleForm.refugeStoreyArea"}}),e._v(" ㎡\n                        ")],1),e._v(" "),r("el-form-item",{attrs:{label:"避难层位置",prop:"refugeStoreySite"}},[r("el-input",{model:{value:e.ruleForm.refugeStoreySite,callback:function(t){e.$set(e.ruleForm,"refugeStoreySite",t)},expression:"ruleForm.refugeStoreySite"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"安全出口数量",prop:"exitNum"}},[r("el-input",{model:{value:e.ruleForm.exitNum,callback:function(t){e.$set(e.ruleForm,"exitNum",t)},expression:"ruleForm.exitNum"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"安全出口位置/形式",prop:"buildname"}},[r("el-input",{on:{focus:function(t){e.dialogFormVisible=!0}},model:{value:e.exitsMesseg,callback:function(t){e.exitsMesseg=t},expression:"exitsMesseg"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"消防电梯数量",prop:"fireElevatorNum"}},[r("el-input",{model:{value:e.ruleForm.fireElevatorNum,callback:function(t){e.$set(e.ruleForm,"fireElevatorNum",t)},expression:"ruleForm.fireElevatorNum"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"消防电梯容纳总重量",prop:"fireElevatorWeight"}},[r("el-input",{model:{value:e.ruleForm.fireElevatorWeight,callback:function(t){e.$set(e.ruleForm,"fireElevatorWeight",t)},expression:"ruleForm.fireElevatorWeight"}}),e._v("kg\n                        ")],1),e._v(" "),r("el-form-item",{attrs:{label:"日常工作时间人数",prop:"dailyWorkerNum"}},[r("el-input",{model:{value:e.ruleForm.dailyWorkerNum,callback:function(t){e.$set(e.ruleForm,"dailyWorkerNum",t)},expression:"ruleForm.dailyWorkerNum"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"最大容纳人数",prop:"maxAccommodateNum"}},[r("el-input",{model:{value:e.ruleForm.maxAccommodateNum,callback:function(t){e.$set(e.ruleForm,"maxAccommodateNum",t)},expression:"ruleForm.maxAccommodateNum"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"储存物数量",prop:"storageNum"}},[r("el-input",{model:{value:e.ruleForm.storageNum,callback:function(t){e.$set(e.ruleForm,"storageNum",t)},expression:"ruleForm.storageNum"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"储存物性质",prop:"storageNature"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.storageNature,callback:function(t){e.$set(e.ruleForm,"storageNature",t)},expression:"ruleForm.storageNature"}},e._l(e.storageNatureOPtions,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.label}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"储存物形态",prop:"storageForm"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.storageForm,callback:function(t){e.$set(e.ruleForm,"storageForm",t)},expression:"ruleForm.storageForm"}},e._l(e.storageFormOPtions,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.label}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"储存容积",prop:"storageCapacity"}},[r("el-input",{model:{value:e.ruleForm.storageCapacity,callback:function(t){e.$set(e.ruleForm,"storageCapacity",t)},expression:"ruleForm.storageCapacity"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"主要原料",prop:"mainMaterials"}},[r("el-input",{model:{value:e.ruleForm.mainMaterials,callback:function(t){e.$set(e.ruleForm,"mainMaterials",t)},expression:"ruleForm.mainMaterials"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"主要产品",prop:"mainProducts"}},[r("el-input",{model:{value:e.ruleForm.mainProducts,callback:function(t){e.$set(e.ruleForm,"mainProducts",t)},expression:"ruleForm.mainProducts"}})],1),e._v(" "),r("el-form-item",{staticClass:"submitagency"},[r("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("ruleForm")}}},[e._v("立即提交")]),e._v(" "),r("el-button",{on:{click:e.closedialog}},[e._v("取 消")])],1)],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"安全出口位置与形式",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",[r("el-form-item",{attrs:{label:"安全出口位置","label-width":e.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.exitSite,callback:function(t){e.exitSite=t},expression:"exitSite"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"安全出口形式",prop:"exits","label-width":e.formLabelWidth}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.exitForm,callback:function(t){e.exitForm=t},expression:"exitForm"}},e._l(e.exitsOPtions,function(e){return r("el-option",{key:e.code,attrs:{label:e.description,value:e.code}})}),1),e._v(" "),r("el-button",{on:{click:e.addExit}},[e._v("添加")])],1),e._v(" "),r("el-table",{attrs:{data:e.exits}},[r("el-table-column",{attrs:{property:"exitSite",label:"安全出口位置",width:"150"}}),e._v(" "),r("el-table-column",{attrs:{property:"exitFormName",label:"安全出口形式",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.deleteExits(t)}}},[e._v("\n                                删除\n                            ")])]}}])})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{staticClass:"dialog",attrs:{title:"建筑物平面图",visible:e.ArchitecturalVisible,width:"50%","close-on-click-modal":!1,"before-close":e.closeArchitectural},on:{"update:visible":function(t){e.ArchitecturalVisible=t}}},[r("fieldset",[r("legend",[e._v("各层建筑物图")]),e._v(" "),r("el-carousel",{attrs:{autoplay:!1,arrow:"always",type:"card",height:"300px","initial-index":1}},e._l(e.imgList,function(t){return r("el-carousel-item",{key:t.floor,staticClass:"elbg"},[r("span",{staticStyle:{width:"100%","text-align":"center",display:"inline-block","margin-bottom":"5px"}},[e._v(" "+e._s(t.floor)+" ")]),e._v(" "),r("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.img,"preview-src-list":[t.img]}})],1)}),1)],1),e._v(" "),r("fieldset",[r("legend",[e._v("新增建筑物图")]),e._v(" "),r("el-form",{ref:"Architect",attrs:{rules:e.Architectrules,model:e.Architect,data:e.Architect,"status-icon":"","label-width":"100px"}},[r("el-form-item",{attrs:{label:"建筑楼层",prop:"buildFloor"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.buildFloorName,callback:function(t){e.buildFloorName=t},expression:"buildFloorName"}},e._l(e.buildFloorOptions,function(e){return r("el-option",{key:e.floor,attrs:{label:e.floor,value:e.floor}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"建筑物图",prop:"phone"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"",accept:".jpg,.png,.JPG,.PNG","show-file-list":!1,"on-change":e.beforeUpload,"auto-upload":!1}},[e.imgUrl?[e.loading?[e.imgUrl?r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"上传中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[r("img",{staticClass:"avatar",attrs:{src:e.imgUrl}})]):e._e()]:[r("img",{staticClass:"avatar",attrs:{src:e.imgUrl}})]]:r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],2)],1),e._v(" "),r("el-form-item",[r("el-button",{on:{click:e.uploads}},[e._v("立即上传")]),e._v(" "),r("el-button",{on:{click:e.cancelUpload}},[e._v("取消上传")])],1),e._v(" "),r("el-form-item",{attrs:{"solt-scope":"scope"}},[r("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{size:"small",type:"primary"},on:{click:e.photoSubmit}},[e._v("提交")]),e._v(" "),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.photoReset}},[e._v("重置")])],1)],1)],1)])],1)],1)],1)},staticRenderFns:[]};var c=r("VU/8")(n,u,!1,function(e){r("TVhH")},null,null);t.default=c.exports}});