webpackJsonp([35],{"6Cbe":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),l=i.n(a),s=i("Dd8w"),n=i.n(s),o=i("g5qz"),r=i("MCsY"),d={mixins:[o.a],components:{pagination:r.a},data:function(){var e=this;return{module:"PollingTask",search:"",userType:"",unitId:"",data:[],defaultProps:{children:"children",label:"label"},addFalg:!0,dialogVisible:!1,dialogVisible1:!1,detailFlag:!1,detailFlag1:!1,innerVisible:!1,tableData:[],detailTaskList:"",deviceTaskDetail:"",erWeiImg:"",typeName:"联网设备",unTypeName:"未联网设备",noneIng:"https://oss-kaleidoscope.oss-cn-hangzhou.aliyuncs.com/common/no_pic.gif",ruleForm:{name:"",time:"",uid:"",devices:[{deviceId:"",deviceName:"",planNum:"",deviceContent:"",type:1,position:""}],content:"",unitId:"",suer:sessionStorage.getItem("user_id"),type:1},rules:{name:[{required:!0,message:"请填写任务名称",trigger:"blur"}],time:[{required:!0,message:"请选择起始时间",trigger:"blur"}],uid:[{required:!0,message:"请选择人员",trigger:"blur"}],devices:[{validator:function(t,i,a){var l="";i.map(function(e){e.deviceName&&e.planNum&&e.position||(l=!0)}),l?e.addFalg&&3!=e.userType?a(new Error("请填写单位、次数")):a(new Error("请填写设备、次数、位置")):a()},required:!0,trigger:"blur"}]},peopleOptions:"",deviceOptions:"",unitOptions:"",pickerOptions1:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},currentPage:1,rows:10,total:1}},methods:{opendialog:function(e){e?(this.dialogVisible1=!0,this.ruleForm.devices[0].type=0):(this.dialogVisible=!0,this.ruleForm.devices[0].type=1)},print:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=void 0!==window.screenLeft?window.screenLeft:screen.left,l=void 0!==window.screenTop?window.screenTop:screen.top,s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,n=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,o=s/2-(t=0==+t?s:t)/2+a,r=n/2-(i=0==+i?n:i)/2+l,d=window.open("","打印","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, copyhistory=no, width="+t+", height="+i+", top="+r+", left="+o);return d.document.write(e+"<style type='text/css'>table.gridtable {font-family: verdana,arial,sans-serif;font-size:11px;color:#333333;border-width: 1px;border-color: #666666;border-collapse: collapse;}table.gridtable th {border-width: 1px;padding: 8px;border-style: solid;border-color: #666666;background-color: #dedede;}table.gridtable td {border-width: 1px;padding: 8px;border-style: solid;border-color: #666666;background-color: #ffffff;}</style>"),d.focus(),d.document.close(),d.print(),d},printImg:function(e){var t=this,i=this;this.axios({url:"/api/admin/inspection/qr/save",method:"post",data:{id:e}}).then(function(e){t.erWeiImg=e.data.data.crCode,t.$nextTick(function(){setTimeout(function(){i.print(document.getElementById("erwei").innerHTML,1e3,600)},500)})})},getData:function(){var e=this,t="";t=this.addFalg&&3!=this.userType?2:1,this.unitId&&this.axios({url:"/api/admin/inspection/list",method:"post",data:{unitId:this.unitId,pageNum:this.currentPage,pageSize:this.rows,type:t}}).then(function(t){e.tableData=t.data.list,e.tableData.map(function(t){t.startTime=t.startTime&&e.$moment(t.startTime).format("YYYY-MM-DD HH:mm")||"",t.endTime=t.endTime&&e.$moment(t.endTime).format("YYYY-MM-DD HH:mm")||"",t.time=t.startTime+" - "+t.endTime,1==t.status?t.status="已完成":0==t.status&&(t.status="未完成")}),e.total=t.data.total})},editData:function(e){var t=this;this.axios({url:"/api/admin/inspection/single",method:"post",data:{id:e}}).then(function(e){0==e.data.code?(t.addFalg&&3!=t.userType?t.detailFlag1=!0:t.detailFlag=!0,t.detailTaskList=e.data.data,t.detailTaskList.startTime=t.detailTaskList.startTime&&t.$moment(t.detailTaskList.startTime).format("YYYY-MM-DD HH:mm")||"",t.detailTaskList.endTime=t.detailTaskList.endTime&&t.$moment(t.detailTaskList.endTime).format("YYYY-MM-DD HH:mm")||"",t.detailTaskList.time=t.detailTaskList.startTime+" - "+t.detailTaskList.endTime,1==t.detailTaskList.status?t.detailTaskList.status="已完成":0==t.detailTaskList.status&&(t.detailTaskList.status="未完成")):t.$alert(e.data.msg,"提示",{confirmButtonText:"OK"})})},showTaskDetail:function(e){var t=this;this.axios({url:"/api/admin/inspection/patrol/search",method:"post",data:{id:e}}).then(function(e){0==e.data.code?(t.deviceTaskDetail=e.data.data,t.deviceTaskDetail.length?(t.deviceTaskDetail.map(function(e){e.imgUrl=e.imgUrl&&e.imgUrl.split(","),e.createdTime=e.createdTime&&t.$moment(e.createdTime).format("YYYY-MM-DD HH:mm")||""}),t.innerVisible=!0):t.$alert("没有记录","提示",{confirmButtonText:"OK"})):t.$alert(e.data.msg,"提示",{confirmButtonText:"OK"})})},handleDelete:function(e){var t=this;this.$confirm("你确定要删除吗").then(function(){t.axios({url:"/api/admin/inspection/delete",method:"post",data:{id:e}}).then(function(e){0==e.data.code?(t.getData(),t.$alert("删除成功","提示",{confirmButtonText:"OK"})):t.$alert(e.data.msg,"提示",{confirmButtonText:"OK"})})})},getDevicePosition:function(e,t,i){var a=this;i?this.axios({url:"/api/admin/device/task/single",method:"post",data:{id:e}}).then(function(e){a.ruleForm.devices[t].deviceName=e.data.data.deviceName,a.ruleForm.devices[t].position=e.data.data.addr}):this.axios({url:"/api/admin/unit/single",method:"post",data:{id:e}}).then(function(e){a.ruleForm.devices[t].deviceName=e.data.data.name,a.ruleForm.devices[t].position=e.data.data.address})},getOptions:function(){var e=this;this.addFalg&&3!=this.userType?this.axios({url:"/api/admin/unit/list",method:"post",data:{pageNum:1,pageSize:99999,unitId:this.unitId}}).then(function(t){e.unitOptions=t.data.list;var i="";e.unitOptions.map(function(e,t){e.id==sessionStorage.getItem("unitId")&&(i=t)}),e.unitOptions.splice(i,1)}):this.axios({url:"/api/admin/device/list",method:"post",data:{pageNum:1,pageSize:99999,unitId:this.unitId}}).then(function(t){e.deviceOptions=t.data.list}),this.axios({url:"/api/admin/user/list",method:"post",data:{pageNum:1,pageSize:99999,unitId:this.unitId}}).then(function(t){e.peopleOptions=t.data.list})},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$alert("添加数据失败,请填完必填字段!","提示",{confirmButtonText:"OK"}),!1;t.$confirm("你确定要添加任务吗").then(function(){t.addFalg&&3!=t.userType?t.ruleForm.type=2:t.ruleForm.type=1,t.axios({url:"/api/admin/inspection/add",method:"post",data:n()({},t.ruleForm)}).then(function(e){0==e.data.code?(t.getData(),t.$alert("添加成功","提示",{confirmButtonText:"OK"}),t.closedialog()):t.$alert(e.data.msg,"提示",{confirmButtonText:"OK"})})})})},deleteDevice:function(e){(e||this.ruleForm.devices.length>1)&&this.ruleForm.devices.splice(e,1)},addDevice:function(){this.addFalg&&3!=this.userType?this.ruleForm.devices.push({deviceName:"",deviceId:"",planNum:"",deviceContent:"",type:0,position:""}):this.ruleForm.devices.push({deviceName:"",deviceId:"",planNum:"",deviceContent:"",type:1,position:""})},addCustomeDevice:function(){this.ruleForm.devices.push({deviceName:"",planNum:"",deviceContent:"",type:2,position:""})},closedialog:function(){this.dialogVisible=!1,this.dialogVisible1=!1,this.handleReset()},closedialog1:function(){this.detailFlag=!1,this.detailFlag1=!1,this.erWeiImg=""},handleReset:function(){l()(this.$data.ruleForm,this.$options.data().ruleForm),this.ruleForm.unitId=this.unitId},renderContent:function(e,t){var i=t.node;return e("span",[e("i",{class:t.data.icon})," ",e("span",[i.label])])},handleNodeClick:function(e){this.unitId=e.id,this.ruleForm.unitId=e.id,this.rows=10,this.currentPage=1,0==e.type?this.addFalg=!0:this.addFalg=!1,this.getOptions(),this.getData()},pageChange:function(e){this.currentPage=e.page_index,this.rows=e.page_limit,this.getData()}},mounted:function(){this.userType=sessionStorage.getItem("userTypes"),this.ruleForm.unitId=Number(sessionStorage.getItem("unitId")),this.unitId=Number(sessionStorage.getItem("unitId")),this.getOptions(),this.getData()}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"allcontent",attrs:{id:"polling_task"}},[i("el-row",{staticStyle:{height:"100%"}},[3!=e.userType?i("el-col",{staticClass:"tree_box",attrs:{span:4}},[i("div",[i("el-input",{staticClass:"filter_text",attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),i("el-tree",{ref:"tree",attrs:{data:e.Treedata,props:e.defaultProps,"render-content":e.renderContent,"highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1)]):e._e(),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticClass:"top"},[i("div",[e.addFalg&&3!=e.userType?i("el-button",{attrs:{type:"success"},on:{click:function(t){return e.opendialog(1)}}},[i("i",{staticClass:"el-icon-plus"}),e._v(" 新增巡查任务")]):i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.opendialog(0)}}},[i("i",{staticClass:"el-icon-plus"}),e._v(" 新增巡检任务")])],1)]),e._v(" "),i("div",{staticStyle:{"margin-top":"10px",height:"88%",position:"relative"}},[i("el-table",{staticStyle:{width:"150"},attrs:{data:e.tableData,border:""}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"任务名称",width:"250"}}),e._v(" "),i("el-table-column",{attrs:{prop:"uname",label:"任务人员",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{prop:"time",label:"任务起始时间",width:"300"}}),e._v(" "),i("el-table-column",{attrs:{prop:"status",label:"任务完成情况",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.editData(t.row.id)}}},[e._v("查看")]),e._v(" "),i("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.handleDelete(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("div",{staticClass:"page",staticStyle:{position:"absolute",bottom:"0"}},[i("pagination",{attrs:{total:e.total},on:{pageChange:e.pageChange}})],1)],1),e._v(" "),i("el-dialog",{staticClass:"dialog",attrs:{title:"添加修改巡检任务",visible:e.dialogVisible,width:"32%","close-on-click-modal":!1,"before-close":e.closedialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"巡检任务名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入巡检任务名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"巡检人员",prop:"uid",placeholder:"请选择巡检人员"}},[i("el-select",{attrs:{filterable:""},model:{value:e.ruleForm.uid,callback:function(t){e.$set(e.ruleForm,"uid",t)},expression:"ruleForm.uid"}},e._l(e.peopleOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"起始时间",prop:"time"}},[i("el-date-picker",{staticClass:"picker_time",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions1},model:{value:e.ruleForm.time,callback:function(t){e.$set(e.ruleForm,"time",t)},expression:"ruleForm.time"}})],1),e._v(" "),e._l(e.ruleForm.devices,function(t,a){return[i("el-form-item",{attrs:{label:"设备及次数",prop:"devices"}},[1==t.type?i("el-select",{attrs:{filterable:"",placeholder:"请选择设备"},on:{change:function(i){return e.getDevicePosition(t.deviceId,a,1)}},model:{value:t.deviceId,callback:function(i){e.$set(t,"deviceId",i)},expression:"item.deviceId"}},e._l(e.deviceOptions,function(e){return i("el-option",{key:e.deviceId,attrs:{label:e.deviceAlias,value:e.deviceId}})}),1):e._e(),e._v(" "),2==t.type?i("el-input",{staticClass:"custom",attrs:{placeholder:"请输入自定义设备"},model:{value:t.deviceName,callback:function(i){e.$set(t,"deviceName",i)},expression:"item.deviceName"}}):e._e(),e._v(" "),i("el-input",{staticClass:"number",attrs:{type:"number",min:"1",placeholder:"次数"},model:{value:t.planNum,callback:function(i){e.$set(t,"planNum",i)},expression:"item.planNum"}}),e._v(" "),i("el-input",{staticClass:"position",attrs:{placeholder:"设备位置描述",disabled:1==t.type},model:{value:t.position,callback:function(i){e.$set(t,"position",i)},expression:"item.position"}}),e._v(" "),i("i",{staticClass:"el-icon-error plus",on:{click:function(t){return e.deleteDevice(a)}}}),e._v(" "),a==e.ruleForm.devices.length-1?i("i",{staticClass:"el-icon-circle-plus plus",on:{click:e.addDevice}}):e._e(),e._v(" "),a==e.ruleForm.devices.length-1?i("i",{staticClass:"el-icon-edit plus",on:{click:e.addCustomeDevice}}):e._e(),e._v(" "),i("el-input",{staticClass:"textarea1",attrs:{type:"textarea",rows:2,placeholder:"请输入设备描述"},model:{value:t.deviceContent,callback:function(i){e.$set(t,"deviceContent",i)},expression:"item.deviceContent"}})],1)]}),e._v(" "),i("el-form-item",{attrs:{label:"巡检描述"}},[i("el-input",{staticClass:"textarea",attrs:{type:"textarea",rows:2,placeholder:"请输入巡检描述"},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1),e._v(" "),i("el-form-item",{staticClass:"formfooter"},[i("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("ruleForm")}}},[e._v("立即提交")]),e._v(" "),i("el-button",{on:{click:e.closedialog}},[e._v("取 消")])],1)],2)],1),e._v(" "),i("el-dialog",{staticClass:"dialog",attrs:{title:"添加修改数据",visible:e.dialogVisible1,width:"32%","close-on-click-modal":!1,"before-close":e.closedialog},on:{"update:visible":function(t){e.dialogVisible1=t}}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"巡查任务名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入巡查任务名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"巡检人员",prop:"uid",placeholder:"请选择巡检人员"}},[i("el-select",{attrs:{filterable:""},model:{value:e.ruleForm.uid,callback:function(t){e.$set(e.ruleForm,"uid",t)},expression:"ruleForm.uid"}},e._l(e.peopleOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"起始时间",prop:"time"}},[i("el-date-picker",{staticClass:"picker_time",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions1},model:{value:e.ruleForm.time,callback:function(t){e.$set(e.ruleForm,"time",t)},expression:"ruleForm.time"}})],1),e._v(" "),e._l(e.ruleForm.devices,function(t,a){return[i("el-form-item",{attrs:{label:"单位及次数",prop:"devices"}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择单位"},on:{change:function(i){return e.getDevicePosition(t.deviceId,a,0)}},model:{value:t.deviceId,callback:function(i){e.$set(t,"deviceId",i)},expression:"item.deviceId"}},e._l(e.unitOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),i("el-input",{staticClass:"number",attrs:{type:"number",min:"1",placeholder:"次数"},model:{value:t.planNum,callback:function(i){e.$set(t,"planNum",i)},expression:"item.planNum"}}),e._v(" "),i("el-input",{staticClass:"position",attrs:{placeholder:"单位位置描述",disabled:0==t.type},model:{value:t.position,callback:function(i){e.$set(t,"position",i)},expression:"item.position"}}),e._v(" "),i("i",{staticClass:"el-icon-error plus",on:{click:function(t){return e.deleteDevice(a)}}}),e._v(" "),a==e.ruleForm.devices.length-1?i("i",{staticClass:"el-icon-circle-plus plus",on:{click:e.addDevice}}):e._e(),e._v(" "),i("el-input",{staticClass:"textarea1",attrs:{type:"textarea",rows:2,placeholder:"请输入描述"},model:{value:t.deviceContent,callback:function(i){e.$set(t,"deviceContent",i)},expression:"item.deviceContent"}})],1)]}),e._v(" "),i("el-form-item",{attrs:{label:"巡查描述"}},[i("el-input",{staticClass:"textarea",attrs:{type:"textarea",rows:2,placeholder:"请输入巡查描述"},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1),e._v(" "),i("el-form-item",{staticClass:"formfooter"},[i("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("ruleForm")}}},[e._v("立即提交")]),e._v(" "),i("el-button",{on:{click:e.closedialog}},[e._v("取 消")])],1)],2)],1),e._v(" "),i("el-dialog",{staticClass:"dialog",attrs:{title:"查看巡检任务",visible:e.detailFlag,width:"33%","close-on-click-modal":!1,"before-close":e.closedialog1},on:{"update:visible":function(t){e.detailFlag=t}}},[i("el-dialog",{attrs:{width:"23%",title:"设备巡检详情",visible:e.innerVisible,"modal-append-to-body":"",modal:!1,top:"27vh"},on:{"update:visible":function(t){e.innerVisible=t}}},[i("el-form",{staticClass:"device_detail",attrs:{"label-width":"100px"}},[e._l(e.deviceTaskDetail,function(t){return[i("el-form-item",{staticClass:"detail-ruleForm",attrs:{label:"巡检时间"}},[e._v("\n                            "+e._s(t.createdTime)+"\n                        ")]),e._v(" "),i("el-form-item",{staticClass:"detail-ruleForm",attrs:{label:"巡检地址"}},[e._v("\n                            "+e._s(t.site)+"\n                        ")]),e._v(" "),i("el-form-item",{staticClass:"detail-ruleForm",attrs:{label:"设备状态"}},[e._v("\n                            "+e._s(t.status?"故障":"正常")+"\n                        ")]),e._v(" "),i("el-form-item",{staticClass:"detail-ruleForm",attrs:{label:"巡检内容"}},[e._v("\n                           "+e._s(t.content)+"\n                        ")]),e._v(" "),i("el-form-item",{staticClass:"detail-ruleForm",attrs:{label:"巡检图片"}},[i("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.imgUrl&&t.imgUrl[0]||e.noneIng,"preview-src-list":t.imgUrl&&t.imgUrl||[]}})],1),e._v(" "),i("div",{staticClass:"line"})]})],2)],1),e._v(" "),i("el-form",{staticClass:"detail-ruleForm",attrs:{"label-width":"120px"}},[i("el-form-item",{attrs:{label:"巡检任务名称"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.detailTaskList.name,callback:function(t){e.$set(e.detailTaskList,"name",t)},expression:"detailTaskList.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"任务发布人员"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.detailTaskList.issuer,callback:function(t){e.$set(e.detailTaskList,"issuer",t)},expression:"detailTaskList.issuer"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"巡检人员"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.detailTaskList.uname,callback:function(t){e.$set(e.detailTaskList,"uname",t)},expression:"detailTaskList.uname"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"起始时间"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.detailTaskList.time,callback:function(t){e.$set(e.detailTaskList,"time",t)},expression:"detailTaskList.time"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"任务完成情况"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.detailTaskList.status,callback:function(t){e.$set(e.detailTaskList,"status",t)},expression:"detailTaskList.status"}})],1),e._v(" "),e._l(e.detailTaskList.dtos,function(t){return[i("el-form-item",{attrs:{label:1==t.type&&e.typeName||e.unTypeName}},[i("el-input",{staticClass:"more",model:{value:t.deviceName,callback:function(i){e.$set(t,"deviceName",i)},expression:"item.deviceName"}}),e._v(" "),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(" 总次数:"+e._s(t.planNum)+" 完成数:"+e._s(t.actualNum)+" ")]),e._v(" "),i("el-input",{staticClass:"more",model:{value:t.position,callback:function(i){e.$set(t,"position",i)},expression:"item.position"}}),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(i){return e.printImg(t.id)}}},[e._v("打印二维码")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(i){return e.showTaskDetail(t.id)}}},[e._v("查看详情")]),e._v(" "),i("el-input",{staticClass:"textarea1",attrs:{type:"textarea",rows:2,placeholder:"设备描述",disabled:!0},model:{value:t.deviceContent,callback:function(i){e.$set(t,"deviceContent",i)},expression:"item.deviceContent"}})],1)]}),e._v(" "),i("el-form-item",{attrs:{label:"巡检描述"}},[i("el-input",{staticClass:"textarea",attrs:{type:"textarea",rows:2,disabled:!0},model:{value:e.detailTaskList.content,callback:function(t){e.$set(e.detailTaskList,"content",t)},expression:"detailTaskList.content"}})],1)],2),e._v(" "),i("div",{attrs:{id:"erwei"}},[i("img",{attrs:{src:e.erWeiImg,alt:""}})])],1),e._v(" "),i("el-dialog",{staticClass:"dialog",attrs:{title:"查看巡查任务",visible:e.detailFlag1,width:"33%","close-on-click-modal":!1,"before-close":e.closedialog1},on:{"update:visible":function(t){e.detailFlag1=t}}},[i("el-dialog",{attrs:{width:"23%",title:"设备巡查详情",visible:e.innerVisible,"modal-append-to-body":"",modal:!1,top:"27vh"},on:{"update:visible":function(t){e.innerVisible=t}}},[i("el-form",{staticClass:"device_detail",attrs:{"label-width":"100px"}},[e._l(e.deviceTaskDetail,function(t){return[i("el-form-item",{staticClass:"detail-ruleForm",attrs:{label:"巡查时间"}},[e._v("\n                            "+e._s(t.createdTime)+"\n                        ")]),e._v(" "),i("el-form-item",{staticClass:"detail-ruleForm",attrs:{label:"巡查地址"}},[e._v("\n                            "+e._s(t.site)+"\n                        ")]),e._v(" "),i("el-form-item",{staticClass:"detail-ruleForm",attrs:{label:"单位状态"}},[e._v("\n                            "+e._s(t.status?"未通过":"通过")+"\n                        ")]),e._v(" "),i("el-form-item",{staticClass:"detail-ruleForm",attrs:{label:"巡查内容"}},[e._v("\n                           "+e._s(t.content)+"\n                        ")]),e._v(" "),i("el-form-item",{staticClass:"detail-ruleForm",attrs:{label:"巡查图片"}},[i("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.imgUrl&&t.imgUrl[0]||e.noneIng,"preview-src-list":t.imgUrl&&t.imgUrl||[]}})],1),e._v(" "),i("div",{staticClass:"line"})]})],2)],1),e._v(" "),i("el-form",{staticClass:"detail-ruleForm",attrs:{"label-width":"120px"}},[i("el-form-item",{attrs:{label:"巡查任务名称"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.detailTaskList.name,callback:function(t){e.$set(e.detailTaskList,"name",t)},expression:"detailTaskList.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"任务发布人员"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.detailTaskList.issuer,callback:function(t){e.$set(e.detailTaskList,"issuer",t)},expression:"detailTaskList.issuer"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"巡查人员"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.detailTaskList.uname,callback:function(t){e.$set(e.detailTaskList,"uname",t)},expression:"detailTaskList.uname"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"起始时间"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.detailTaskList.time,callback:function(t){e.$set(e.detailTaskList,"time",t)},expression:"detailTaskList.time"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"任务完成情况"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.detailTaskList.status,callback:function(t){e.$set(e.detailTaskList,"status",t)},expression:"detailTaskList.status"}})],1),e._v(" "),e._l(e.detailTaskList.dtos,function(t){return[i("el-form-item",{attrs:{label:"单位及次数"}},[i("el-input",{staticClass:"more",model:{value:t.deviceName,callback:function(i){e.$set(t,"deviceName",i)},expression:"item.deviceName"}}),e._v(" "),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(" 总次数:"+e._s(t.planNum)+" 完成数:"+e._s(t.actualNum)+" ")]),e._v(" "),i("el-input",{staticClass:"more",model:{value:t.position,callback:function(i){e.$set(t,"position",i)},expression:"item.position"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"10px",padding:"7px 29px"},attrs:{type:"primary"},on:{click:function(i){return e.showTaskDetail(t.id)}}},[e._v("查看详情")]),e._v(" "),i("el-input",{staticClass:"textarea1",attrs:{type:"textarea",rows:2,placeholder:"描述",disabled:!0},model:{value:t.deviceContent,callback:function(i){e.$set(t,"deviceContent",i)},expression:"item.deviceContent"}})],1)]}),e._v(" "),i("el-form-item",{attrs:{label:"巡查描述"}},[i("el-input",{staticClass:"textarea",attrs:{type:"textarea",rows:2,disabled:!0},model:{value:e.detailTaskList.content,callback:function(t){e.$set(e.detailTaskList,"content",t)},expression:"detailTaskList.content"}})],1)],2)],1)],1)],1)],1)},staticRenderFns:[]};var u=i("VU/8")(d,c,!1,function(e){i("zMdx")},null,null);t.default=u.exports},zMdx:function(e,t){}});