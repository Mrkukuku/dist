webpackJsonp([32],{"A/sD":function(t,e){},CIci:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("g5qz"),l=a("MCsY"),n={mixins:[i.a],components:{pagination:l.a},data:function(){return{module:"train/file",key:"",upload:"",currentPage:1,rows:10,total:1}},methods:{handleDown:function(t){t&&(location.href=t)},beforeUpload:function(t){this.upload=t.raw},submitUpload:function(){var t=this,e=new FormData;e.append("file",this.upload),this.axios({url:"/api/admin/train/file/add",method:"post",data:e}).then(function(e){0==e.data.code?(t.$alert("添加成功","提示",{confirmButtonText:"OK",callback:function(){t.upload="",document.getElementsByClassName("el-upload-list")[0].innerHTML="",t.dialogVisible=!1}}),t.getData()):t.$alert(e.data.msg,"提示",{confirmButtonText:"OK"})})},searchdata:function(){var t=this,e=this;this.currentPage=1,this.$refs.paginationChild.changePageNum(this.currentPage),this.axios({url:"/api/admin/train/file/list",method:"post",data:{key:this.key,unitId:sessionStorage.getItem("unitId"),pageNum:this.currentPage,pageSize:this.rows}}).then(function(a){0==a.data.code?(e.tableData=a.data.list,e.tableData.map(function(e){e.createdTime=e.createdTime&&t.$moment(e.createdTime).format("YYYY-MM-DD HH:mm")||""}),e.total=a.data.total,e.currentPage=a.data.pageNum):e.$alert(a.data.msg,"提示",{confirmButtonText:"OK"})})},searchReset:function(){this.key="",this.searchdata()},pageChange:function(t){this.currentPage=t.page_index,this.rows=t.page_limit,this.getData()}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"allcontent",attrs:{id:"database"}},[a("div",{staticClass:"top"},[a("div",[t._v("\n             文件名:\n            "),a("el-input",{model:{value:t.key,callback:function(e){t.key=e},expression:"key"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.searchdata}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:t.searchReset}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.opendialog}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 新增")])],1)]),t._v(" "),a("div",{staticStyle:{"margin-top":"10px",height:"88%",position:"relative"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fileName",label:"文件名称",width:"230"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"上传者",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createdTime",label:"上传时间",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.row.id)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleDown(e.row.filePath)}}},[t._v("下载")])]}}])})],1),t._v(" "),a("div",{staticStyle:{position:"absolute",bottom:"0"}},[a("pagination",{ref:"paginationChild",attrs:{total:t.total},on:{pageChange:t.pageChange}})],1)],1),t._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{title:"添加修改数据",visible:t.dialogVisible,width:"30%","close-on-click-modal":!1,"before-close":t.closedialog},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"","on-change":t.beforeUpload,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("请选择文件")]),t._v(" "),a("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传文件")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("files with a size less than 500kb")])],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,o,!1,function(t){a("A/sD")},"data-v-48cc2a2b",null);e.default=s.exports}});