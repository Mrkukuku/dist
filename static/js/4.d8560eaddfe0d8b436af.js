webpackJsonp([4],{"9LKW":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mvHQ"),i=a.n(r),o=a("woOf"),n=a.n(o),s=a("Dd8w"),l=a.n(s),c=a("MCsY"),u=a("g5qz"),d=a("NYxO"),m=a("gRE1"),p=a.n(m),f=a("fZjL"),h=a.n(f),g=a("7+uW");const v=g.default.prototype.$isServer,b=(v||Number(document.documentMode),!v&&document.addEventListener?function(e,t,a){e&&t&&a&&e.addEventListener(t,a,!1)}:function(e,t,a){e&&t&&a&&e.attachEvent("on"+t,a)}),_=!v&&document.removeEventListener?function(e,t,a){e&&t&&e.removeEventListener(t,a,!1)}:function(e,t,a){e&&t&&e.detachEvent("on"+t,a)};Object.prototype.hasOwnProperty;function w(e){let t=!1;return function(...a){t||(t=!0,window.requestAnimationFrame(r=>{e.apply(this,a),t=!1}))}}var y={CONTAIN:{name:"contain",icon:"el-icon-full-screen"},ORIGINAL:{name:"original",icon:"el-icon-c-scale-to-original"}},k=!g.default.prototype.$isServer&&window.navigator.userAgent.match(/firefox/i)?"DOMMouseScroll":"mousewheel",F={name:"elImageViewer",props:{urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},onClose:{type:Function,default:function(){}}},data:function(){return{index:0,isShow:!1,infinite:!0,loading:!1,mode:y.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}},computed:{isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.urlList[this.index]},imgStyle:function(){var e=this.transform,t=e.scale,a=e.deg,r=e.offsetX,i=e.offsetY,o={transform:"scale("+t+") rotate("+a+"deg)",transition:e.enableTransition?"transform .3s":"","margin-left":r+"px","margin-top":i+"px"};return this.mode===y.CONTAIN&&(o.maxWidth=o.maxHeight="100%"),o}},watch:{index:{handler:function(e){this.reset(),this.onSwitch(e)}},currentImg:function(e){var t=this;this.$nextTick(function(e){t.$refs.img[0].complete||(t.loading=!0)})}},methods:{hide:function(){this.deviceSupportUninstall(),this.onClose()},deviceSupportInstall:function(){var e=this;this._keyDownHandler=w(function(t){switch(t.keyCode){case 27:e.hide();break;case 32:e.toggleMode();break;case 37:e.prev();break;case 38:e.handleActions("zoomIn");break;case 39:e.next();break;case 40:e.handleActions("zoomOut")}}),this._mouseWheelHandler=w(function(t){(t.wheelDelta?t.wheelDelta:-t.detail)>0?e.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):e.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})}),b(document,"keydown",this._keyDownHandler),b(document,k,this._mouseWheelHandler)},deviceSupportUninstall:function(){_(document,"keydown",this._keyDownHandler),_(document,k,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(e){this.loading=!1},handleImgError:function(e){this.loading=!1,e.target.alt="加载失败"},handleMouseDown:function(e){var t=this;if(!this.loading&&0===e.button){var a=this.transform,r=a.offsetX,i=a.offsetY,o=e.pageX,n=e.pageY;this._dragHandler=w(function(e){t.transform.offsetX=r+e.pageX-o,t.transform.offsetY=i+e.pageY-n}),b(document,"mousemove",this._dragHandler),b(document,"mouseup",function(e){_(document,"mousemove",t._dragHandler)}),e.preventDefault()}},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var e=h()(y),t=(p()(y).indexOf(this.mode)+1)%e.length;this.mode=y[e[t]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var e=this.urlList.length;this.index=(this.index-1+e)%e}},next:function(){if(!this.isLast||this.infinite){var e=this.urlList.length;this.index=(this.index+1)%e}},handleActions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var a=l()({zoomRate:.2,rotateDeg:90,enableTransition:!0},t),r=a.zoomRate,i=a.rotateDeg,o=a.enableTransition,n=this.transform;switch(e){case"zoomOut":n.scale>.2&&(n.scale=parseFloat((n.scale-r).toFixed(3)));break;case"zoomIn":n.scale=parseFloat((n.scale+r).toFixed(3));break;case"clocelise":n.deg+=i;break;case"anticlocelise":n.deg-=i}n.enableTransition=o}}},mounted:function(){this.deviceSupportInstall()}},T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"viewer-fade"}},[a("div",{staticClass:"el-image-viewer__wrapper",style:{"z-index":e.zIndex}},[a("div",{staticClass:"el-image-viewer__mask"}),e._v(" "),a("span",{staticClass:"el-image-viewer__btn el-image-viewer__close",on:{click:e.hide}},[a("i",{staticClass:"el-icon-circle-close"})]),e._v(" "),e.isSingle?e._e():[a("span",{staticClass:"el-image-viewer__btn el-image-viewer__prev",class:{"is-disabled":!e.infinite&&e.isFirst},on:{click:e.prev}},[a("i",{staticClass:"el-icon-arrow-left"})]),e._v(" "),a("span",{staticClass:"el-image-viewer__btn el-image-viewer__next",class:{"is-disabled":!e.infinite&&e.isLast},on:{click:e.next}},[a("i",{staticClass:"el-icon-arrow-right"})])],e._v(" "),a("div",{staticClass:"el-image-viewer__btn el-image-viewer__actions"},[a("div",{staticClass:"el-image-viewer__actions__inner"},[a("i",{staticClass:"el-icon-zoom-out",on:{click:function(t){return e.handleActions("zoomOut")}}}),e._v(" "),a("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){return e.handleActions("zoomIn")}}}),e._v(" "),a("i",{staticClass:"el-image-viewer__actions__divider"}),e._v(" "),a("i",{class:e.mode.icon,on:{click:e.toggleMode}}),e._v(" "),a("i",{staticClass:"el-image-viewer__actions__divider"}),e._v(" "),a("i",{staticClass:"el-icon-refresh-left",on:{click:function(t){return e.handleActions("anticlocelise")}}}),e._v(" "),a("i",{staticClass:"el-icon-refresh-right",on:{click:function(t){return e.handleActions("clocelise")}}})])]),e._v(" "),a("div",{staticClass:"el-image-viewer__canvas"},e._l(e.urlList,function(t,r){return r===e.index?a("img",{key:t,ref:"img",refInFor:!0,staticClass:"el-image-viewer__img",style:e.imgStyle,attrs:{src:e.currentImg},on:{load:e.handleImgLoad,error:e.handleImgError,mousedown:e.handleMouseDown}}):e._e()}),0)],2)])},staticRenderFns:[]},x=a("VU/8")(F,T,!1,null,null,null).exports,D={mixins:[u.a],data:function(){var e=this;return{module:"user",name:"",company:"",phone:"",Jurisdiction:sessionStorage.getItem("user_id"),companyId:sessionStorage.getItem("unitId"),posterURL:"",posterURL1:"",upload:"",upload1:"",userType:sessionStorage.getItem("userTypes"),updateVisible:!0,options:[],ruleForm:{companyId:"",id:null,account:"",password:"",repassword:"",username:"",userTypeDesc:"",userType:"",email:"",phone:"",description:"",avatar:"",certificateImage:"",certificated:"0",certificateNumber:"",fireControlPermissions:[1]},rules:{account:[{required:!0,message:"请输入账户名",trigger:"blur"}],username:[{required:!0,message:"请输入姓名",trigger:"blur"},{max:10,min:2,message:"姓名长度在2到10个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{max:15,min:6,message:"密码长度在6到15个字符之间",trigger:"blur"}],repassword:[{validator:function(t,a,r){""===a?r(new Error("请再一次输入密码")):a!==e.ruleForm.password?r(new Error("两次密码不一致，请重新输入!")):r()},required:!0,trigger:"blur"}],email:[{required:!1,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],phone:[{validator:function(e,t,a){t?/^0\d{2,3}-\d{7,8}$/.test(t)||/^1[3|5|8|4|6|7|9]\d{9}$/.test(t)?a():a(new Error("手机号格式出错")):a(new Error("请输入联系方式"))},required:!0,trigger:"blur"}],description:[{required:!1,message:"请输入账号描述",trigger:"blur"}],certificated:[{required:!1,message:"请选择是否持证",trigger:"blur"}],userType:[{required:!0,message:"请选择账号类型",trigger:"blur"}],avatar:[{required:!1,message:"请选择头像",trigger:"blur"}],certificateImage:[{required:!0,message:"请上传证书图片",trigger:"blur"}],certificateNumber:[{required:!0,message:"请填写证书编号",trigger:"blur"}]},FrozenForm:{time:"",frozenDesc:"",unitId:null},rulesFrozen:{time:[{required:!0,message:"冻结时间",trigger:"blur"}],frozenDesc:[{required:!0,message:"冻结原因",trigger:"blur"}]},treedefaultProps:{children:"children",label:"label"},expireTimeOption:{disabledDate:function(e){return e.getTime()+864e5<Date.now()}},workVisibleList:!1,workTimeData:[],personAddTimeDialog:!1,workType:1,workTypeH:1,weekData:[{id:1,name:"星期一"},{id:2,name:"星期二"},{id:3,name:"星期三"},{id:4,name:"星期四"},{id:5,name:"星期五"},{id:6,name:"星期六"},{id:7,name:"星期日"},{id:8,name:"下周一"}],userId:"",timeDayForm:{startWeek:"",startTime:"",endWeek:"",endTime:""},timeDayRules:{type1:[{validator:function(t,a,r){""==e.timeDayForm.startWeek||""==e.timeDayForm.startTime?r(new Error("上班时间不能为空")):r()},required:!0,trigger:["blur","change"]}],type2:[{validator:function(t,a,r){""==e.timeDayForm.endWeek||""==e.timeDayForm.endTime?r(new Error("下班时间不能为空")):e.timeDayForm.endWeek<e.timeDayForm.startWeek?r(new Error("开始上班不能大于结束上班天")):e.timeDayForm.endWeek==e.timeDayForm.startWeek?Date.parse(e.timeDayForm.startTime)>Date.parse(e.timeDayForm.endTime)?r(new Error("上班时间点不能大于下班时间点")):r():e.timeDayForm.endWeek-e.timeDayForm.startWeek>=2?r(new Error("上班时间下班时间不能隔两天")):r()},required:!0,trigger:["blur","change"]}]},page_index:1,total:10,page_size:10,fileLoading:!1,uid:sessionStorage.getItem("user_id"),selectType:"",showViewer:!1,showViewer1:!1}},components:{pagination:c.a,ElImageViewer:x},methods:l()({},Object(d.b)("routeJump",["changeLogin","setMenuData"]),{closeViewer:function(){this.showViewer=!1,this.showViewer1=!1},beforeUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="jpg"===t,r="png"===t,i=e.size/1024/1024<5;return a||r?i?(this.posterURL=URL.createObjectURL(e.raw),void(this.upload=e.raw)):(this.$message({message:"上传文件大小不能超过 5MB!",type:"warning"}),this.$refs.upload.clearFiles(),void(this.files=null)):(this.$message({message:"上传文件只能是jpg,png格式!",type:"warning"}),this.$refs.upload.clearFiles(),void(this.ruleForm.avatar=null))},beforeUpload1:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="jpg"===t,r="png"===t,i=e.size/1024/1024<5;return a||r?i?(this.posterURL1=URL.createObjectURL(e.raw),this.upload1=e.raw,void console.log(this.upload1)):(this.$message({message:"上传文件大小不能超过 5MB!",type:"warning"}),this.$refs.upload.clearFiles(),void(this.files=null)):(this.$message({message:"上传文件只能是jpg,png格式!",type:"warning"}),this.$refs.upload1.clearFiles(),void(this.ruleForm.certificateImage=null))},uploads:function(e){var t=this,a=new FormData;2==e?a.append("file",this.upload):a.append("file",this.upload1),a.append("fileType",2),this.axios({url:"/api/admin/file/upload",method:"post",data:a}).then(function(a){0==a.data.code?(2==e?t.ruleForm.avatar=a.data.data.fileUrl:t.ruleForm.certificateImage=a.data.data.fileUrl,t.$alert("上传成功","提示",{confirmButtonText:"OK"})):t.$alert(a.data.msg,"提示",{confirmButtonText:"OK"})})},resetUploads:function(){this.ruleForm.avatar=null,this.posterURL=""},resetUploads1:function(){this.ruleForm.certificateImage=null,this.posterURL1=""},handleExceed:function(){this.$message.warning("图片只能上传一张,")},renderContent:function(e,t){var a=t.node;return e("span",[e("i",{class:t.data.icon})," ",e("span",[a.label])])},handleNodeClick:function(e){this.companyId=e.id,this.rows=10,this.currentPage=1,this.getData()},handleResetPassword:function(e){var t=this;this.axios({url:"/api/admin/user/reset.password",method:"post",data:{uid:e}}).then(function(e){0==e.data.code?t.$alert("重置成功","提示",{confirmButtonText:"OK"}):t.$alert(e.data.msg,"提示",{confirmButtonText:"OK"})})},searchreset:function(){this.name="",this.phone="",this.selectType="",this.searchsubmit()},searchsubmit:function(){var e=this;this.currentPage=1,this.$refs.paginationChild.changePageNum(this.currentPage),this.axios({url:"/api/admin/user/list",method:"post",data:{pageNum:this.currentPage,pageSize:this.rows,username:this.name,unitId:this.companyId,phone:this.phone,userType:this.selectType}}).then(function(t){0==t.data.code&&(e.tableData=t.data.list,e.total=t.data.total,e.currentPage=t.data.pageNum)})},change:function(e){},handleWork:function(e){this.userId=e,this.personTimeList(),this.workVisibleList=!0},closeWorkList:function(){this.workVisibleList=!1},changeWorkType:function(){var e=this;this.workTypeH!=this.workType&&this.$confirm("你确定修改值班类型？保存后将清空之前类型的值班时间列表！！！").then(function(){}).catch(function(){e.workType=e.workTypeH})},addPersonWorkTime:function(){this.personAddTimeDialog=!0,this.workType=this.workTypeH},personTimeList:function(){var e=this,t=this;this.axios({url:"/api/admin/user/rota/list",method:"post",data:{id:this.userId}}).then(function(a){if(0==a.data.code)for(var r in t.workTimeData=a.data.data.list,e.workType=a.data.data.type?a.data.data.type:1,e.workTypeH=a.data.data.type?a.data.data.type:1,t.workTimeData)t.workTimeData[r].start="周"+t.workTimeData[r].startWeek+",时间:"+t.workTimeData[r].startTime,t.workTimeData[r].end="周"+t.workTimeData[r].endWeek+",时间:"+t.workTimeData[r].endTime;else t.$alert(a.data.msg,"提示",{confirmButtonText:"OK"})})},personAddTimeDialogFun:function(){this.personAddTimeDialog=!1,n()(this.$data.timeDayForm,this.$options.data().timeDayForm)},personTimeSubmit:function(e){var t=this;3==this.workType?this.axios({url:"/api/admin/user/rota/add/unlimited",method:"post",data:{id:this.userId}}).then(function(e){0==e.data.code?(t.$message({type:"success",message:"保存成功"}),t.personAddTimeDialogFun(),t.personTimeList()):t.$message.error(e.data.msg)}):this.$refs[e].validate(function(e){if(e){t.timeDayForm.uid=t.userId;var a,r=t;1==t.workType?a="/api/admin/user/rota/add/normal":2==t.workType&&(a="/api/admin/user/rota/add/day"),t.axios({url:a,method:"post",data:t.timeDayForm}).then(function(e){0==e.data.code?r.$alert("添加成功","提示",{confirmButtonText:"OK",callback:function(){r.personAddTimeDialogFun(),r.personTimeList()}}):t.$message.error(e.data.msg)})}})},deletePersonData:function(e){var t=this,a=this;this.$confirm("你确定要删除吗").then(function(){t.axios({url:"/api/admin/user/rota/delete",method:"post",data:{id:e}}).then(function(e){0==e.data.code?a.$alert("删除成功","提示",{confirmButtonText:"OK",callback:function(){a.personTimeList()}}):a.$alert(e.data.msg,"提示",{confirmButtonText:"OK"})})})},pageChange:function(e){this.currentPage=e.page_index,this.rows=e.page_limit,this.getData()},DropdownData:function(){var e=this;this.axios({url:"/api/admin/user/type.add",method:"post"}).then(function(t){0==t.data.code?e.options=t.data.data:e.$alert(t.data.msg,"提示",{confirmButtonText:"OK"})})},getuser:function(){var e=this;this.axios({method:"post",url:"/api/admin/user"}).then(function(t){sessionStorage.setItem("user_id",t.data.data.id),sessionStorage.setItem("unitId",t.data.data.unitId?t.data.data.unitId:-1),sessionStorage.setItem("userTypes",t.data.data.userType),e.$router.replace("/unitmanagement/userManagement"),e.$store.state.routeJump.openTab=[],e.$store.state.routeJump.activeIndex="/unitmanagement",e.companyId=t.data.data.unitId})},getMenuData:function(){var e=this;this.axios({method:"post",url:"/api/admin/user/pilot/group/user"}).then(function(t){0==t.data.code?(e.setMenuData({menuData:i()(t.data.data)}),e.getuser()):e.$message.error(t.data.msg)})},downFile:function(){location.href="https://oss-kaleidoscope.oss-cn-hangzhou.aliyuncs.com/人员导入模板.xls"},uploadsFile:function(e){var t=this,a=this,r=new FormData;r.append("multis",e.file),r.append("unitId",a.companyId),this.fileLoading=!0,this.axios({url:"api/admin/user/batch/import",method:"post",data:r,dataType:"json"}).then(function(e){e&&200==e.status?0==e.data.code?(t.fileLoading=!1,t.$alert("导入成功"+e.data.data.successCount+"条\n导入失败"+e.data.data.errorCount+"条"),t.getData(),t.$refs["my-upload"].clearFiles(),t.instance&&t.instance.close(),e.data.data.errorCount&&(t.instance=t.$notify.error({title:"提示",dangerouslyUseHTMLString:!0,message:'<p style="cursor: pointer;">点击下载导入错误原因</p>',duration:0,position:"bottom-right",offset:100}),t.instance.onClick=function(){a.downErrorFlie(e.data.data.id)})):t.$alert(e.data.msg):(t.fileLoading=!1,t.$alert("导入失败"),t.$refs["my-upload"].clearFiles())})},downErrorFlie:function(e){this.instance.close(),e&&(location.href="https://admin.dingrennet.cn/api/admin/user/backup?id="+e+"&uid="+this.uid)},userChange:function(e){this.ruleForm.fireControlPermissions=6==e?[2,3]:[1]}}),created:function(){this.$route.query.token?(this.changeLogin({Authorization:this.$route.query.token}),sessionStorage.setItem("user_name",this.$route.query.name),this.getMenuData()):this.companyId=sessionStorage.getItem("unitId"),this.DropdownData()}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"allcontent",attrs:{id:"usermanagement"}},[3!=e.userType?a("el-col",{staticClass:"tree_box",attrs:{span:4}},[a("div",[a("el-input",{staticClass:"filter_text",attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",attrs:{data:e.Treedata,props:e.treedefaultProps,"render-content":e.renderContent,"highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1)]):e._e(),e._v(" "),a("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[a("div",{staticClass:"top"},[a("div",[e._v("\n                    姓名:\n                    "),a("el-input",{model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v("  \n                    手机号:"),a("el-input",{model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),e._v("\n                    用户类型: "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},e._l(e.options,function(e){return a("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.searchsubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.searchreset}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.opendialog}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 新增")]),e._v(" "),a("el-upload",{ref:"my-upload",staticStyle:{display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/","http-request":e.uploadsFile,"show-file-list":!1,limit:1}},[a("el-button",{attrs:{size:"small",type:"primary",disabled:e.fileLoading}},[e._v("导入")])],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.downFile}},[e._v("下载模板")])],1)]),e._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{title:"添加修改人员信息",visible:e.dialogVisible,width:"30%","close-on-click-modal":!1,"before-close":e.closedialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,data:e.ruleForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"username"}},[a("el-input",{model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账号",prop:"account"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),e._v(" "),e.updateVisible?[a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},on:{input:function(t){return e.change(t)}},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"repassword"}},[a("el-input",{attrs:{type:"password"},on:{input:function(t){return e.change(t)}},model:{value:e.ruleForm.repassword,callback:function(t){e.$set(e.ruleForm,"repassword",t)},expression:"ruleForm.repassword"}})],1)]:e._e(),e._v(" "),3!=e.ruleForm.userType&&2!=e.ruleForm.userType?[a("el-form-item",{attrs:{label:"用户类型",prop:"userType"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.userChange},model:{value:e.ruleForm.userType,callback:function(t){e.$set(e.ruleForm,"userType",t)},expression:"ruleForm.userType"}},e._l(e.options,function(e){return a("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})}),1)],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"是否持证",prop:"certificated"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.ruleForm.certificated,callback:function(t){e.$set(e.ruleForm,"certificated",t)},expression:"ruleForm.certificated"}},[e._v("否")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.certificated,callback:function(t){e.$set(e.ruleForm,"certificated",t)},expression:"ruleForm.certificated"}},[e._v("是")])],1),e._v(" "),6==e.ruleForm.userType||4==e.ruleForm.userType||5==e.ruleForm.userType?[a("el-form-item",{attrs:{label:""}},[a("el-checkbox-group",{model:{value:e.ruleForm.fireControlPermissions,callback:function(t){e.$set(e.ruleForm,"fireControlPermissions",t)},expression:"ruleForm.fireControlPermissions"}},[a("el-checkbox",{attrs:{label:1}},[e._v("巡检填表")]),e._v(" "),a("el-checkbox",{attrs:{label:2}},[e._v("值班填表")]),e._v(" "),a("el-checkbox",{attrs:{label:3}},[e._v("人员交接")])],1)],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"证书编号",rules:[{required:1==e.ruleForm.certificated,message:"请填写证书编号",trigger:"blur"}]}},[a("el-input",{model:{value:e.ruleForm.certificateNumber,callback:function(t){e.$set(e.ruleForm,"certificateNumber",t)},expression:"ruleForm.certificateNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"证书照片",rules:[{required:1==e.ruleForm.certificated,message:"请上传证书照片",trigger:"blur"}]}},[a("div",{staticStyle:{display:"flex"}},[a("el-upload",{ref:"upload1",staticClass:"avatar-uploader",attrs:{action:"",accept:".jpg,.png,.JPG,.PNG","show-file-list":!1,"on-change":e.beforeUpload1,"auto-upload":!1}},[e.posterURL1?a("img",{staticClass:"avatar",attrs:{src:e.posterURL1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),e.showViewer?a("el-image-viewer",{attrs:{"on-close":e.closeViewer,"url-list":[e.posterURL1]}}):e._e()],1),e._v(" "),a("el-button",{on:{click:function(t){return e.uploads(1)}}},[e._v("上传")]),e._v(" "),a("el-button",{on:{click:e.resetUploads1}},[e._v("取消")]),e._v(" "),e.posterURL1?a("el-button",{on:{click:function(t){e.showViewer=!0}}},[e._v("查看大图")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传头像",prop:"avatar"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"",accept:".jpg,.png,.JPG,.PNG","show-file-list":!1,"on-change":e.beforeUpload,"auto-upload":!1}},[e.posterURL?a("img",{staticClass:"avatar",attrs:{src:e.posterURL}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),e.showViewer1?a("el-image-viewer",{attrs:{"on-close":e.closeViewer,"url-list":[e.posterURL]}}):e._e(),e._v(" "),a("el-button",{on:{click:function(t){return e.uploads(2)}}},[e._v("立即上传")]),e._v(" "),a("el-button",{on:{click:e.resetUploads}},[e._v("取消")]),e._v(" "),e.posterURL?a("el-button",{on:{click:function(t){e.showViewer1=!0}}},[e._v("查看大图")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"账号描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1),e._v(" "),a("el-form-item",{staticClass:"formfooter"},[a("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("ruleForm")}}},[e._v("立即提交")]),e._v(" "),a("el-button",{on:{click:e.closedialog}},[e._v("取 消")])],1)],2)],1),e._v(" "),a("el-dialog",{attrs:{title:"冻结账号",visible:e.FrozenVisible,width:"30%","close-on-click-modal":!1,"before-close":e.closeFrozen},on:{"update:visible":function(t){e.FrozenVisible=t}}},[a("el-form",{ref:"FrozenForm",staticClass:"demo-ruleForm FrozenForm",attrs:{rules:e.rulesFrozen,model:e.FrozenForm,data:e.FrozenForm,"status-icon":"","label-width":"130px"}},[a("el-form-item",{attrs:{label:"冻结时间",prop:"time"}},[a("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始时间","end-placeholder":"结束时间","picker-options":e.expireTimeOption},model:{value:e.FrozenForm.time,callback:function(t){e.$set(e.FrozenForm,"time",t)},expression:"FrozenForm.time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"封号原因",prop:"frozenDesc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.FrozenForm.frozenDesc,callback:function(t){e.$set(e.FrozenForm,"frozenDesc",t)},expression:"FrozenForm.frozenDesc"}})],1),e._v(" "),a("el-form-item",{staticClass:"formfooter"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.FrozenSubmit("FrozenForm")}}},[e._v("冻结")]),e._v(" "),a("el-button",{on:{click:e.closeFrozen}},[e._v("取 消")])],1)],1)],1),e._v(" "),a("el-dialog",{staticClass:"workDialog",attrs:{title:"添加修改数据",visible:e.workVisibleList,"close-on-click-modal":!1,"before-close":e.closeWorkList},on:{"update:visible":function(t){e.workVisibleList=t}}},[a("div",{staticClass:"personTop"},[e._v("\n                            当前值班类型是：\n                            "),2==e.workTypeH?[e._v("\n                                24小时制\n                            ")]:3==e.workTypeH?[e._v("\n                               无限制\n                            ")]:[e._v("\n                                排班制\n                            ")],e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addPersonWorkTime}},[e._v("新增")])],2),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.workTimeData,border:""}},[a("el-table-column",{attrs:{prop:"start",label:"开始时间",width:"250"}}),e._v(" "),1==e.workType?[a("el-table-column",{attrs:{prop:"end",label:"结束时间",width:"250"}})]:e._e(),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deletePersonData(t.row.id)}}},[e._v("删除")])]}}])})],2),e._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{title:"人员信息",visible:e.personAddTimeDialog,width:"40%","close-on-click-modal":!1,"append-to-body":!0,"before-close":e.personAddTimeDialogFun},on:{"update:visible":function(t){e.personAddTimeDialog=t}}},[a("el-radio-group",{on:{change:e.changeWorkType},model:{value:e.workType,callback:function(t){e.workType=t},expression:"workType"}},[a("el-radio",{attrs:{label:1}},[e._v("排班制")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("24小时制")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("无限制")])],1),e._v(" "),a("el-form",{ref:"timeDayForm",staticClass:"demo-ruleForm",attrs:{model:e.timeDayForm,rules:e.timeDayRules,"label-width":"150px"}},[3!=e.workType?[a("el-form-item",{attrs:{label:"上班时间",prop:"type1"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.timeDayForm.startWeek,callback:function(t){e.$set(e.timeDayForm,"startWeek",t)},expression:"timeDayForm.startWeek"}},e._l(e.weekData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-time-picker",{attrs:{format:"HH:mm",placeholder:"任意时间点"},model:{value:e.timeDayForm.startTime,callback:function(t){e.$set(e.timeDayForm,"startTime",t)},expression:"timeDayForm.startTime"}})],1),e._v(" "),1==e.workType?[a("el-form-item",{attrs:{label:"下班时间",prop:"type2"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.timeDayForm.endWeek,callback:function(t){e.$set(e.timeDayForm,"endWeek",t)},expression:"timeDayForm.endWeek"}},e._l(e.weekData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-time-picker",{attrs:{format:"HH:mm",placeholder:"任意时间点"},model:{value:e.timeDayForm.endTime,callback:function(t){e.$set(e.timeDayForm,"endTime",t)},expression:"timeDayForm.endTime"}})],1)]:e._e()]:e._e(),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"100px"}},[a("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:function(t){return e.personTimeSubmit("timeDayForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.personAddTimeDialogFun}},[e._v("取消")])],1)],2)],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.fileLoading,expression:"fileLoading"}],staticClass:"bottom"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.SelectionChange}},[a("el-table-column",{attrs:{prop:"username",label:"姓名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"账号",width:"230"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userTypeDesc",label:"用户类型",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleWork(t.row.id)}}},[e._v("上班时间")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.editData(t.row.id)}}},[e._v("编辑")]),e._v(" "),3==t.row.userType||2==t.row.userType?a("span",[a("el-button",{attrs:{size:"mini",type:"danger",disabled:!0},on:{click:function(a){return e.handleDelete(t.row.id)}}},[e._v("删除\n                                ")])],1):a("span",[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row.id)}}},[e._v("删除\n                                ")])],1),e._v(" "),e.Jurisdiction!=t.row.id?a("span",[a("el-button",{staticClass:"el-icon-refresh",attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){return e.handleResetPassword(t.row.id)}}},[e._v("重置密码")])],1):e._e(),e._v(" "),e.Jurisdiction!=t.row.id?a("span",[1==t.row.isFrozen?a("span",[a("el-button",{staticClass:"Frozen",attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleFrozen(t.row.id,t.row.isFrozen)}}},[e._v("解冻")])],1):a("span",[a("el-button",{staticClass:"Frozen",attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.handleFrozen(t.row.id,t.row.isFrozen)}}},[e._v("冻结")])],1)]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"page_all"},[a("pagination",{ref:"paginationChild",attrs:{total:e.total},on:{pageChange:e.pageChange}})],1)],1)],1)],1)},staticRenderFns:[]};var I=a("VU/8")(D,C,!1,function(e){a("EpQ1")},null,null);t.default=I.exports},EpQ1:function(e,t){},TmV0:function(e,t,a){a("fZOM"),e.exports=a("FeBl").Object.values},fZOM:function(e,t,a){var r=a("kM2E"),i=a("mbce")(!1);r(r.S,"Object",{values:function(e){return i(e)}})},gRE1:function(e,t,a){e.exports={default:a("TmV0"),__esModule:!0}},mbce:function(e,t,a){var r=a("+E39"),i=a("lktj"),o=a("TcQ7"),n=a("NpIQ").f;e.exports=function(e){return function(t){for(var a,s=o(t),l=i(s),c=l.length,u=0,d=[];c>u;)a=l[u++],r&&!n.call(s,a)||d.push(e?[a,s[a]]:s[a]);return d}}}});