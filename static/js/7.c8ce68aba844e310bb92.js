webpackJsonp([7],{"4IE2":function(t,a,e){t.exports=e.p+"static/media/song1.87b62eb.mp3"},FbgM:function(t,a,e){t.exports=e.p+"static/media/song.9fc3912.wav"},GP4H:function(t,a){},Xclf:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("g5qz"),o=e("FbgM"),n=e.n(o),r=e("4IE2"),s=e.n(r),d={mixins:[i.a],data:function(){return{module:"AudioConfig",userType:"",unitId:"",voiceId:"",activeName:"1",radio:1,radio1:2,alarmAudio:1,audios:n.a,value:!1}},methods:{submit:function(t){var a=this,e="";if(1==t)e={id:this.voiceId,voiceType:this.radio,openStatus:1,type:t};else if(2==t){var i="";i=this.value?1:0,e={id:this.voiceId,voiceType:this.radio1,openStatus:i,type:t}}this.axios({url:"/api/admin/voice/update",method:"post",data:e}).then(function(t){0==t.data.code?a.$alert("修改成功",{confirmButtonText:"确定"}):a.$alert(t.data.msg,{confirmButtonText:"确定"})})},audioPlay:function(t){var a=this;1==t?this.audios=n.a:2==t&&(this.audios=s.a),this.$refs.audio.load();var e=this.$refs.audio.play();e&&e.then(function(){setTimeout(function(){},1e3*audio.duration)}).catch(function(t){}),clearTimeout(this.timer),this.timer=setTimeout(function(){a.$refs.audio.paused||a.$refs.audio.pause()},3e3)},handleClick:function(t){this.alarmAudio=t.name},getData:function(){var t=this;this.axios({url:"/api/admin/voice/detail",method:"post",data:{id:this.unitId}}).then(function(a){t.voiceId=a.data.data.id,t.radio=a.data.data.importantAlarmVoice.voice,t.radio1=a.data.data.unimportanceAlarmVoice.voice;var e=a.data.data.unimportanceAlarmVoice.open;t.value=!!e})},handleNodeClick:function(t){this.unitId=t.id,this.getData()},Treeunit:function(){var t=this;this.axios({url:"api/admin/unit/list.left",method:"post",params:{pageNum:1,pageSize:1e3}}).then(function(a){if(0==a.data.code){if(a.data.data){t.Treedata=a.data.data,t.data=a.data.data;for(var e=0;e<t.Treedata.length;e++)t.Treedata[e].icon="el-icon-folder"}}else t.$alert(a.data.msg,"提示",{confirmButtonText:"OK"})})}},mounted:function(){this.userType=sessionStorage.getItem("userTypes"),this.unitId=Number(sessionStorage.getItem("unitId")),3!=this.userType&&this.Treeunit(),this.getData()}},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"allcontent",attrs:{id:"audio_config"}},[e("el-row",{staticStyle:{height:"100%"}},[3!=t.userType?e("el-col",{staticClass:"tree_box",attrs:{span:4}},[e("div",[e("el-input",{staticClass:"filter_text",attrs:{placeholder:"输入关键字进行过滤"},model:{value:t.filterText,callback:function(a){t.filterText=a},expression:"filterText"}}),t._v(" "),e("el-tree",{ref:"tree",attrs:{data:t.Treedata,props:t.defaultProps,"render-content":t.renderContent,"highlight-current":"","filter-node-method":t.filterNode},on:{"node-click":t.handleNodeClick}})],1)]):t._e(),t._v(" "),e("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[e("div",{staticStyle:{"margin-top":"10px",height:"88%",position:"relative","padding-left":"10px"}},[e("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"重要报警声音配置",name:"1"}},[t._v("重要报警声音配置")]),t._v(" "),e("el-tab-pane",{attrs:{label:"非重要报警声音配置",name:"2"}},[t._v("非重要报警声音配置")])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:1==t.alarmAudio,expression:"alarmAudio == 1"}],staticClass:"audio"},[e("el-radio-group",{model:{value:t.radio,callback:function(a){t.radio=a},expression:"radio"}},[e("el-radio",{attrs:{label:1},nativeOn:{click:function(a){return t.audioPlay(1)}}},[t._v("音频一")]),t._v(" "),e("el-radio",{attrs:{label:2},nativeOn:{click:function(a){return t.audioPlay(2)}}},[t._v("音频二")])],1),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.submit(1)}}},[t._v(" 提交 ")])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:2==t.alarmAudio,expression:"alarmAudio == 2"}],staticClass:"audio"},[e("el-radio-group",{model:{value:t.radio1,callback:function(a){t.radio1=a},expression:"radio1"}},[e("el-radio",{attrs:{label:1},nativeOn:{click:function(a){return t.audioPlay(1)}}},[t._v("音频一")]),t._v(" "),e("el-radio",{attrs:{label:2},nativeOn:{click:function(a){return t.audioPlay(2)}}},[t._v("音频二")]),t._v(" "),e("el-switch",{attrs:{"active-text":"开启","inactive-text":"关闭"},model:{value:t.value,callback:function(a){t.value=a},expression:"value"}}),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.submit(2)}}},[t._v(" 提交 ")])],1)],1),t._v(" "),e("audio",{ref:"audio",attrs:{src:t.audios,preload:""}})],1)])],1)],1)},staticRenderFns:[]};var u=e("VU/8")(d,l,!1,function(t){e("GP4H")},null,null);a.default=u.exports}});